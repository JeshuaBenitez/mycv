import{a as V,b as xe,c as Sf,d as M,e as aI,f as hu,g as cI,h as uI,i as lI,j as Af,k as dI,l as oa,m as xf,n as fu,o as hI,p as fI,q as Mf,r as Fe,s as oi,t as _n,u as pu,v as sa,w as pI,x as gI,y as mr,z as Lt}from"./chunk-U3NIYLHF.js";var Nf=null;var Rf=1,mI=Symbol("SIGNAL");function De(n){let e=Nf;return Nf=n,e}function yI(){return Nf}var Pf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kx(n){if(!(Vf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Rf)){if(!n.producerMustRecompute(n)&&!Of(n)){n.dirty=!1,n.lastCleanEpoch=Rf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Rf}}function kf(n){return n&&(n.nextProducerIndex=0),De(n)}function vI(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Vf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Lf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Of(n){jf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(kx(t),r!==t.version))return!0}return!1}function Ff(n){if(jf(n),Vf(n))for(let e=0;e<n.producerNode.length;e++)Lf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Lf(n,e){if(Ox(n),n.liveConsumerNode.length===1&&Fx(n))for(let r=0;r<n.producerNode.length;r++)Lf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jf(i),i.producerIndexOfThis[r]=e}}function Vf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ox(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Fx(n){return n.producerNode!==void 0}function Lx(){throw new Error}var Vx=Lx;function _I(n){Vx=n}function ie(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gu=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof gu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wI(o)}catch(s){e=e??[],s instanceof gu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)}remove(e){let{_finalizers:t}=this;t&&si(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var Bf=Ue.EMPTY;function mu(n){return n instanceof Ue||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function wI(n){ie(n)?n():n.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yu(n){ao.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(n);else throw n})}function aa(){}var II=Uf("C",void 0,void 0);function EI(n){return Uf("E",void 0,n)}function DI(n){return Uf("N",n,void 0)}function Uf(n,e,t){return{kind:n,value:e,error:t}}var ai=null;function co(n){if(on.useDeprecatedSynchronousErrorHandling){let e=!ai;if(e&&(ai={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ai;if(ai=null,t)throw r}}else n()}function CI(n){on.useDeprecatedSynchronousErrorHandling&&ai&&(ai.errorThrown=!0,ai.error=n)}var ci=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,mu(e)&&e.add(this)):this.destination=Ux}static create(e,t,r){return new $n(e,t,r)}next(e){this.isStopped?Hf(DI(e),this):this._next(e)}error(e){this.isStopped?Hf(EI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hf(II,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jx=Function.prototype.bind;function $f(n,e){return jx.call(n,e)}var qf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vu(r)}else vu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vu(t)}}},$n=class extends ci{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$f(e.next,o),error:e.error&&$f(e.error,o),complete:e.complete&&$f(e.complete,o)}):i=e}this.destination=new qf(i)}};function vu(n){on.useDeprecatedSynchronousErrorHandling?CI(n):yu(n)}function Bx(n){throw n}function Hf(n,e){let{onStoppedNotification:t}=on;t&&ao.setTimeout(()=>t(n,e))}var Ux={closed:!0,next:aa,error:Bx,complete:aa};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function zf(...n){return Gf(n)}function Gf(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Hx(t)?t:new $n(t,r,i);return co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=TI(r),new r((i,o)=>{let s=new $n({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return Gf(t)(this)}toPromise(t){return t=TI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function TI(n){var e;return(e=n??on.Promise)!==null&&e!==void 0?e:Promise}function $x(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function Hx(n){return n&&n instanceof ci||$x(n)&&mu(n)}function Wf(n){return ie(n?.lift)}function ue(n){return e=>{if(Wf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new Kf(n,e,t,r,i)}var Kf=class extends ci{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lo(){return ue((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return lo()(this)}};var bI=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _u(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new bI}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bf:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,si(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new _u(e,t),n})(),_u=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Bf}};var ct=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ca={now(){return(ca.delegate||Date).now()},delegate:void 0};var wu=class extends qe{constructor(e=1/0,t=1/0,r=ca){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Iu=class extends Ue{constructor(e,t){super()}schedule(e,t=0){return this}};var ua={setInterval(n,e,...t){let{delegate:r}=ua;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ua;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fo=class extends Iu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ua.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ua.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};po.now=ca.now;var go=class extends po{constructor(e,t=po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var la=new go(fo);var Eu=class extends fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Du=class extends go{};var Qf=new Du(Eu);var It=new fe(n=>n.complete());function SI(n){return n&&ie(n.schedule)}function Yf(n){return n[n.length-1]}function AI(n){return ie(Yf(n))?n.pop():void 0}function wn(n){return SI(Yf(n))?n.pop():void 0}function xI(n,e){return typeof Yf(n)=="number"?n.pop():e}var Cu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tu(n){return ie(n?.then)}function bu(n){return ie(n[uo])}function Su(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Au(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xu=qx();function Mu(n){return ie(n?.[xu])}function Ru(n){return cI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hu(t.read());if(i)return yield hu(void 0);yield yield hu(r)}}finally{t.releaseLock()}})}function Nu(n){return ie(n?.getReader)}function Le(n){if(n instanceof fe)return n;if(n!=null){if(bu(n))return zx(n);if(Cu(n))return Gx(n);if(Tu(n))return Wx(n);if(Su(n))return MI(n);if(Mu(n))return Kx(n);if(Nu(n))return Qx(n)}throw Au(n)}function zx(n){return new fe(e=>{let t=n[uo]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gx(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Wx(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yu)})}function Kx(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function MI(n){return new fe(e=>{Yx(n,e).catch(t=>e.error(t))})}function Qx(n){return MI(Ru(n))}function Yx(n,e){var t,r,i,o;return aI(this,void 0,void 0,function*(){try{for(t=uI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function zt(n,e=0){return ue((t,r)=>{t.subscribe(de(r,i=>xt(r,n,()=>r.next(i),e),()=>xt(r,n,()=>r.complete(),e),i=>xt(r,n,()=>r.error(i),e)))})}function sn(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function RI(n,e){return Le(n).pipe(sn(e),zt(e))}function NI(n,e){return Le(n).pipe(sn(e),zt(e))}function PI(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function kI(n,e){return new fe(t=>{let r;return xt(t,e,()=>{r=n[xu](),xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Pu(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{xt(t,e,()=>{let r=n[Symbol.asyncIterator]();xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function OI(n,e){return Pu(Ru(n),e)}function FI(n,e){if(n!=null){if(bu(n))return RI(n,e);if(Cu(n))return PI(n,e);if(Tu(n))return NI(n,e);if(Su(n))return Pu(n,e);if(Mu(n))return kI(n,e);if(Nu(n))return OI(n,e)}throw Au(n)}function Ie(n,e){return e?FI(n,e):Le(n)}function ee(...n){let e=wn(n);return Ie(n,e)}function mo(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function Zf(n){return!!n&&(n instanceof fe||ie(n.lift)&&ie(n.subscribe))}var Hn=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Zx}=Array;function Jx(n,e){return Zx(e)?n(...e):n(e)}function LI(n){return G(e=>Jx(n,e))}var{isArray:Xx}=Array,{getPrototypeOf:eM,prototype:tM,keys:nM}=Object;function VI(n){if(n.length===1){let e=n[0];if(Xx(e))return{args:e,keys:null};if(rM(e)){let t=nM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rM(n){return n&&typeof n=="object"&&eM(n)===tM}function jI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function da(...n){let e=wn(n),t=AI(n),{args:r,keys:i}=VI(n);if(r.length===0)return Ie([],e);let o=new fe(iM(r,e,i?s=>jI(i,s):wt));return t?o.pipe(LI(t)):o}function iM(n,e,t=wt){return r=>{BI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)BI(e,()=>{let l=Ie(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function BI(n,e,t){n?xt(t,n,e):e()}function UI(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=R=>l<r?b(R):u.push(R),b=R=>{o&&e.next(R),l++;let N=!1;Le(t(R,h++)).subscribe(de(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?xt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(de(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Qe(n,e,t=1/0){return ie(e)?Qe((r,i)=>G((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>UI(r,i,n,t)))}function yr(n=1/0){return Qe(wt,n)}function $I(){return yr(1)}function yo(...n){return $I()(Ie(n,wn(n)))}function ku(n){return new fe(e=>{Le(n()).subscribe(e)})}function Jf(...n){let e=wn(n),t=xI(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):yr(t)(Ie(r,e)):It}function ut(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function vr(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Le(n(s,vr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function HI(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ui(n,e){return ie(e)?Qe(n,e,1):Qe(n,1)}function _r(n){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qn(n){return n<=0?()=>It:ue((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xf(n){return G(()=>n)}function ep(n,e=wt){return n=n??oM,ue((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function oM(n,e){return n===e}function Ou(n=sM){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sM(){return new Hn}function ha(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):wt,qn(1),t?_r(e):Ou(()=>new Hn))}function vo(n){return n<=0?()=>It:ue((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):wt,vo(1),t?_r(e):Ou(()=>new Hn))}function fa(){return ue((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function li(n,e){return ue(HI(n,e,arguments.length>=2,!0))}function qI(n={}){let{connector:e=()=>new qe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let R=s;v(),R?.unsubscribe()};return ue((R,N)=>{l++,!p&&!h&&m();let B=u=u??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=np(b,i))}),B.subscribe(N),!s&&l>0&&(s=new $n({next:q=>B.next(q),error:q=>{p=!0,m(),a=np(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=np(v,r),B.complete()}}),Le(R).subscribe(s))})(o)}}function np(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new $n({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function Fu(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,qI({connector:()=>new wu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=wn(n);return ue((t,r)=>{(e?yo(n,t,e):yo(n,t)).subscribe(r)})}function $e(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Lu(n,e){return ie(e)?$e(()=>n,e):$e(()=>n)}function rp(n){return ue((e,t)=>{Le(n).subscribe(de(t,()=>t.complete(),aa)),!t.closed&&e.subscribe(t)})}function et(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var Z=class extends Error{constructor(e,t){super(Jp(e,t)),this.code=e}};function Jp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ta(n){return{toString:n}.toString()}var Vu="__parameters__";function aM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function AE(n,e,t){return Ta(()=>{let r=aM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Vu)?u[Vu]:Object.defineProperty(u,Vu,{value:[]})[Vu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Qn=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Vt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function zI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var cM=Se({__forward_ref__:Se});function xE(n){return n.__forward_ref__=xE,n.toString=function(){return Vt(this())},n}function Kt(n){return ME(n)?n():n}function ME(n){return typeof n=="function"&&n.hasOwnProperty(cM)&&n.__forward_ref__===xE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function ml(n){return GI(n,NE)||GI(n,PE)}function RE(n){return ml(n)!==null}function GI(n,e){return n.hasOwnProperty(e)?n[e]:null}function uM(n){let e=n&&(n[NE]||n[PE]);return e||null}function WI(n){return n&&(n.hasOwnProperty(KI)||n.hasOwnProperty(lM))?n[KI]:null}var NE=Se({\u0275prov:Se}),KI=Se({\u0275inj:Se}),PE=Se({ngInjectableDef:Se}),lM=Se({ngInjectorDef:Se}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function kE(n){return n&&!!n.\u0275providers}var dM=Se({\u0275cmp:Se}),hM=Se({\u0275dir:Se}),fM=Se({\u0275pipe:Se}),pM=Se({\u0275mod:Se}),zu=Se({\u0275fac:Se}),ga=Se({__NG_ELEMENT_ID__:Se}),QI=Se({__NG_ENV_ID__:Se});function Gu(n){return typeof n=="string"?n:n==null?"":String(n)}function gM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Gu(n)}function mM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,n)}function Xp(n,e){throw new Z(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),hp;function OE(){return hp}function Wt(n){let e=hp;return hp=n,e}function FE(n,e,t){let r=ml(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;Xp(n,"Injector")}var yM={},ya=yM,fp="__NG_DI_FLAG__",Wu="ngTempTokenPath",vM="ngTokenPath",_M=/\n/gm,wM="\u0275",YI="__source",Do;function IM(){return Do}function wr(n){let e=Do;return Do=n,e}function EM(n,e=le.Default){if(Do===void 0)throw new Z(-203,!1);return Do===null?FE(n,void 0,e):Do.get(n,e&le.Optional?null:void 0,e)}function O(n,e=le.Default){return(OE()||EM)(Kt(n),e)}function j(n,e=le.Default){return O(n,yl(e))}function yl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pp(n){let e=[];for(let t=0;t<n.length;t++){let r=Kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=DM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function LE(n,e){return n[fp]=e,n.prototype[fp]=e,n}function DM(n){return n[fp]}function CM(n,e,t,r){let i=n[Wu];throw e[YI]&&i.unshift(e[YI]),n.message=TM(`
`+n.message,i,t,r),n[vM]=i,n[Wu]=null,n}function TM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==wM?n.slice(2):n;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(_M,`
  `)}`}var vi=LE(AE("Optional"),8);var vl=LE(AE("SkipSelf"),4);function To(n,e){let t=n.hasOwnProperty(zu);return t?n[zu]:null}function eg(n,e){n.forEach(t=>Array.isArray(t)?eg(t,e):e(t))}function VE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ku(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var va={},In=[],bo=new W(""),jE=new W("",-1),BE=new W(""),Qu=class{get(e,t=ya){if(t===ya){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return t}},UE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(UE||{}),Dn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dn||{}),Cr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Cr||{});function bM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function gp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];AM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function SM(n){return n===3||n===4||n===6}function AM(n){return n.charCodeAt(0)===64}function tg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ZI(n,t,i,null,e[++r]):ZI(n,t,i,null,null))}}return n}function ZI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var $E="ng-template";function xM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&bM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ng(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ng(n){return n.type===4&&n.value!==$E}function MM(n,e,t){let r=n.type===4&&!t?$E:n.value;return e===r}function RM(n,e,t){let r=4,i=n.attrs,o=i!==null?kM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!an(r)&&!an(u))return!1;if(s&&an(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!MM(n,u,t)||u===""&&e.length===1){if(an(r))return!1;s=!0}}else if(r&8){if(i===null||!xM(n,i,u,t)){if(an(r))return!1;s=!0}}else{let l=e[++a],h=NM(u,i,ng(n),t);if(h===-1){if(an(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(an(r))return!1;s=!0}}}}return an(r)||s}function an(n){return(n&1)===0}function NM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return OM(e,n)}function PM(n,e,t=!1){for(let r=0;r<e.length;r++)if(RM(n,e[r],t))return!0;return!1}function kM(n){for(let e=0;e<n.length;e++){let t=n[e];if(SM(t))return e}return n.length}function OM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function JI(n,e){return n?":not("+e.trim()+")":e}function FM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!an(s)&&(e+=JI(o,i),i=""),r=s,o=o||!an(r);t++}return i!==""&&(e+=JI(o,i)),e}function LM(n){return n.map(FM).join(",")}function VM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!an(i))break;i=o}r++}return{attrs:e,classes:t}}function ot(n){return Ta(()=>{let e=WE(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===UE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dn.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""});KE(t);let r=n.dependencies;return t.directiveDefs=eE(r,!1),t.pipeDefs=eE(r,!0),t.id=UM(t),t})}function jM(n){return Tr(n)||HE(n)}function BM(n){return n!==null}function Tt(n){return Ta(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function XI(n,e){if(n==null)return va;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Cr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Cr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function ba(n){return Ta(()=>{let e=WE(n);return KE(e),e})}function Tr(n){return n[dM]||null}function HE(n){return n[hM]||null}function qE(n){return n[fM]||null}function zE(n){let e=Tr(n)||HE(n)||qE(n);return e!==null?e.standalone:!1}function GE(n,e){let t=n[pM]||null;if(!t&&e===!0)throw new Error(`Type ${Vt(n)} does not have '\u0275mod' property.`);return t}function WE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||va,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XI(n.inputs,e),outputs:XI(n.outputs),debugInfo:null}}function KE(n){n.features?.forEach(e=>e(n))}function eE(n,e){if(!n)return null;let t=e?qE:jM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(BM)}function UM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $M(...n){return{\u0275providers:QE(!0,n),\u0275fromNgModule:!0}}function QE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return eg(e,s=>{let a=s;mp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YE(i,o),t}function YE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rg(i,o=>{e(o,r)})}}function mp(n,e,t,r){if(n=Kt(n),!n)return!1;let i=null,o=WI(n),s=!o&&Tr(n);if(!o&&!s){let u=n.ngModule;if(o=WI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)mp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{eg(o.imports,h=>{mp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&YE(l,e)}if(!a){let l=To(i)||(()=>new i);e({provide:i,useFactory:l,deps:In},i),e({provide:BE,useValue:i,multi:!0},i),e({provide:bo,useValue:()=>O(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;rg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function rg(n,e){for(let t of n)kE(t)&&(t=t.\u0275providers),Array.isArray(t)?rg(t,e):e(t)}var HM=Se({provide:String,useValue:Se});function ZE(n){return n!==null&&typeof n=="object"&&HM in n}function qM(n){return!!(n&&n.useExisting)}function zM(n){return!!(n&&n.useFactory)}function yp(n){return typeof n=="function"}var _l=new W(""),Uu={},GM={},ip;function ig(){return ip===void 0&&(ip=new Qu),ip}var jt=class{},_a=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_p(e,s=>this.processProvider(s)),this.records.set(jE,_o(void 0,this)),i.has("environment")&&this.records.set(jt,_o(void 0,this));let o=this.records.get(_l);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(BE,In,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wr(this),r=Wt(void 0),i;try{return e()}finally{wr(t),Wt(r)}}get(e,t=ya,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(QI))return e[QI](this);r=yl(r);let i,o=wr(this),s=Wt(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=JM(e)&&ml(e);l&&this.injectableDefInScope(l)?u=_o(vp(e),Uu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?ig():this.parent;return t=r&le.Optional&&t===ya?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Wu]=a[Wu]||[]).unshift(Vt(e)),o)throw a;return CM(a,e,"R3InjectorError",this.source)}else throw a}finally{Wt(s),wr(o)}}resolveInjectorInitializers(){let e=De(null),t=wr(this),r=Wt(void 0),i;try{let o=this.get(bo,In,le.Self);for(let s of o)s()}finally{wr(t),Wt(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=Kt(e);let t=yp(e)?e:Kt(e&&e.provide),r=KM(e);if(!yp(e)&&e.multi===!0){let i=this.records.get(t);i||(i=_o(void 0,Uu,!0),i.factory=()=>pp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Uu&&(t.value=GM,t.value=t.factory()),typeof t.value=="object"&&t.value&&ZM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vp(n){let e=ml(n),t=e!==null?e.factory:To(n);if(t!==null)return t;if(n instanceof W)throw new Z(204,!1);if(n instanceof Function)return WM(n);throw new Z(204,!1)}function WM(n){if(n.length>0)throw new Z(204,!1);let t=uM(n);return t!==null?()=>t.factory(n):()=>new n}function KM(n){if(ZE(n))return _o(void 0,n.useValue);{let e=QM(n);return _o(e,Uu)}}function QM(n,e,t){let r;if(yp(n)){let i=Kt(n);return To(i)||vp(i)}else if(ZE(n))r=()=>Kt(n.useValue);else if(zM(n))r=()=>n.useFactory(...pp(n.deps||[]));else if(qM(n))r=()=>O(Kt(n.useExisting));else{let i=Kt(n&&(n.useClass||n.provide));if(YM(n))r=()=>new i(...pp(n.deps));else return To(i)||vp(i)}return r}function _o(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YM(n){return!!n.deps}function ZM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function JM(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function _p(n,e){for(let t of n)Array.isArray(t)?_p(t,e):t&&kE(t)?_p(t.\u0275providers,e):e(t)}function Tn(n,e){n instanceof _a&&n.assertNotDestroyed();let t,r=wr(n),i=Wt(void 0);try{return e()}finally{wr(r),Wt(i)}}function JE(){return OE()!==void 0||IM()!=null}function XM(n){if(!JE())throw new Z(-203,!1)}function eR(n){let e=Qn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function tR(n){return typeof n=="function"}var Yn=0,pe=1,oe=2,Dt=3,cn=4,un=5,Yu=6,tE=7,zn=8,So=9,Gn=10,Mt=11,wa=12,nE=13,ko=14,Cn=15,Ao=16,wo=17,xo=18,wl=19,XE=20,Er=21,op=22,Qt=23,br=25,eD=1;var fi=7,Zu=8,Ju=9,Yt=10,Xu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Xu||{});function Dr(n){return Array.isArray(n)&&typeof n[eD]=="object"}function Zn(n){return Array.isArray(n)&&n[eD]===!0}function tD(n){return(n.flags&4)!==0}function Il(n){return n.componentOffset>-1}function nD(n){return(n.flags&1)===1}function Sa(n){return!!n.template}function wp(n){return(n[oe]&512)!==0}var Ip=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function rD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function El(){return iD}function iD(n){return n.type.prototype.ngOnChanges&&(n.setInput=rR),nR}El.ngInherit=!0;function nR(){let n=sD(this),e=n?.current;if(e){let t=n.previous;if(t===va)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function rR(n,e,t,r,i){let o=this.declaredInputs[r],s=sD(n)||iR(n,{previous:va,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Ip(l&&l.currentValue,t,u===va),rD(n,e,i,t)}var oD="__ngSimpleChanges__";function sD(n){return n[oD]||null}function iR(n,e){return n[oD]=e}var rE=null;var Ir=function(n,e,t){rE?.(n,e,t)},oR="svg",sR="math";function Wn(n){for(;Array.isArray(n);)n=n[Yn];return n}function aR(n,e){return Wn(e[n])}function bn(n,e){return Wn(e[n.index])}function aD(n,e){return n.data[e]}function _i(n,e){let t=e[n];return Dr(t)?t:t[Yn]}function og(n){return(n[oe]&128)===128}function cR(n){return Zn(n[Dt])}function el(n,e){return e==null?null:n[e]}function cD(n){n[wo]=0}function uD(n){n[oe]&1024||(n[oe]|=1024,og(n)&&Cl(n))}function uR(n,e){for(;n>0;)e=e[ko],n--;return e}function Dl(n){return!!(n[oe]&9216||n[Qt]?.dirty)}function Ep(n){n[Gn].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),Dl(n)&&Cl(n)}function Cl(n){n[Gn].changeDetectionScheduler?.notify(0);let e=pi(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!og(e)));)e=pi(e)}function lD(n,e){if((n[oe]&256)===256)throw new Z(911,!1);n[Er]===null&&(n[Er]=[]),n[Er].push(e)}function lR(n,e){if(n[Er]===null)return;let t=n[Er].indexOf(e);t!==-1&&n[Er].splice(t,1)}function pi(n){let e=n[Dt];return Zn(e)?e[Dt]:e}var ge={lFrame:wD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dD=!1;function dR(){return ge.lFrame.elementDepthCount}function hR(){ge.lFrame.elementDepthCount++}function fR(){ge.lFrame.elementDepthCount--}function hD(){return ge.bindingsEnabled}function pR(){return ge.skipHydrationRootTNode!==null}function gR(n){return ge.skipHydrationRootTNode===n}function mR(){ge.skipHydrationRootTNode=null}function tt(){return ge.lFrame.lView}function Oo(){return ge.lFrame.tView}function ln(){let n=fD();for(;n!==null&&n.type===64;)n=n.parent;return n}function fD(){return ge.lFrame.currentTNode}function yR(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Aa(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function pD(){return ge.lFrame.isParent}function vR(){ge.lFrame.isParent=!1}function gD(){return dD}function iE(n){dD=n}function _R(){let n=ge.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function wR(){return ge.lFrame.bindingIndex}function IR(n){return ge.lFrame.bindingIndex=n}function mD(){return ge.lFrame.bindingIndex++}function ER(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function DR(){return ge.lFrame.inI18n}function CR(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,Dp(e)}function TR(){return ge.lFrame.currentDirectiveIndex}function Dp(n){ge.lFrame.currentDirectiveIndex=n}function yD(n){ge.lFrame.currentQueryIndex=n}function bR(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[un]:null}function vD(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=bR(o),i===null||(o=o[ko],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=_D();return r.currentTNode=e,r.lView=n,!0}function sg(n){let e=_D(),t=n[pe];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _D(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?wD(n):e}function wD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ID(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ED=ID;function ag(){let n=ID();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SR(n){return(ge.lFrame.contextLView=uR(n,ge.lFrame.contextLView))[zn]}function Tl(){return ge.lFrame.selectedIndex}function gi(n){ge.lFrame.selectedIndex=n}function AR(){let n=ge.lFrame;return aD(n.tView,n.selectedIndex)}function xR(){return ge.lFrame.currentNamespace}var DD=!0;function cg(){return DD}function ug(n){DD=n}function MR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=iD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function lg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function $u(n,e,t){CD(n,e,3,t)}function Hu(n,e,t,r){(n[oe]&3)===t&&CD(n,e,t,r)}function sp(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function CD(n,e,t,r){let i=r!==void 0?n[wo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[wo]+=65536),(a<o||o==-1)&&(RR(n,t,e,u),n[wo]=(n[wo]&4294901760)+u+2),u++}function oE(n,e){Ir(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),Ir(5,n,e)}}function RR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[wo]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,oE(a,o)):oE(a,o)}var Co=-1,Ia=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function NR(n){return n instanceof Ia}function PR(n){return(n.flags&8)!==0}function kR(n){return(n.flags&16)!==0}var ap={},Cp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yl(r);let i=this.injector.get(e,ap,r);return i!==ap||t===ap?i:this.parentInjector.get(e,t,r)}};function TD(n){return n!==Co}function tl(n){return n&32767}function OR(n){return n>>16}function nl(n,e){let t=OR(n),r=e;for(;t>0;)r=r[ko],t--;return r}var Tp=!0;function sE(n){let e=Tp;return Tp=n,e}var FR=256,bD=FR-1,SD=5,LR=0,En={};function VR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ga)&&(r=t[ga]),r==null&&(r=t[ga]=LR++);let i=r&bD,o=1<<i;e.data[n+(i>>SD)]|=o}function AD(n,e){let t=xD(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,cp(r.data,n),cp(e,null),cp(r.blueprint,null));let i=dg(n,e),o=n.injectorIndex;if(TD(i)){let s=tl(i),a=nl(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function cp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function xD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function dg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=kD(i),r===null)return Co;if(t++,i=i[ko],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function jR(n,e,t){VR(n,e,t)}function MD(n,e,t){if(t&le.Optional||n!==void 0)return n;Xp(e,"NodeInjector")}function RD(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[So],o=Wt(void 0);try{return i?i.get(e,r,t&le.Optional):FE(e,r,t&le.Optional)}finally{Wt(o)}}return MD(r,e,t)}function ND(n,e,t,r=le.Default,i){if(n!==null){if(e[oe]&2048&&!(r&le.Self)){let s=qR(n,e,t,r,En);if(s!==En)return s}let o=PD(n,e,t,r,En);if(o!==En)return o}return RD(e,t,r,i)}function PD(n,e,t,r,i){let o=$R(t);if(typeof o=="function"){if(!vD(e,n,r))return r&le.Host?MD(i,t,r):RD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))Xp(t);else return s}finally{ED()}}else if(typeof o=="number"){let s=null,a=xD(n,e),u=Co,l=r&le.Host?e[Cn][un]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?dg(n,e):e[a+8],u===Co||!cE(r,!1)?a=-1:(s=e[pe],a=tl(u),e=nl(u,e)));a!==-1;){let h=e[pe];if(aE(o,a,h.data)){let p=BR(a,e,t,s,r,l);if(p!==En)return p}u=e[a+8],u!==Co&&cE(r,e[pe].data[a+8]===l)&&aE(o,a,e)?(s=h,a=tl(u),e=nl(u,e)):a=-1}}return i}function BR(n,e,t,r,i,o){let s=e[pe],a=s.data[n+8],u=r==null?Il(a)&&Tp:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=UR(a,s,t,u,l);return h!==null?Ea(e,s,h,a):En}function UR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){let v=s[u];if(v&&Sa(v)&&v.type===t)return u}return null}function Ea(n,e,t,r){let i=n[t],o=e.data;if(NR(i)){let s=i;s.resolving&&mM(gM(o[t]));let a=sE(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Wt(s.injectImpl):null,h=vD(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&MR(t,o[t],e)}finally{l!==null&&Wt(l),sE(a),s.resolving=!1,ED()}}return i}function $R(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ga)?n[ga]:void 0;return typeof e=="number"?e>=0?e&bD:HR:e}function aE(n,e,t){let r=1<<n;return!!(t[e+(n>>SD)]&r)}function cE(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var hi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ND(this._tNode,this._lView,e,yl(r),t)}};function HR(){return new hi(ln(),tt())}function hg(n){return Ta(()=>{let e=n.prototype.constructor,t=e[zu]||bp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[zu]||bp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bp(n){return ME(n)?()=>{let e=bp(Kt(n));return e&&e()}:To(n)}function qR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=PD(o,s,t,r|le.Self,En);if(a!==En)return a;let u=o.parent;if(!u){let l=s[XE];if(l){let h=l.get(t,En,r);if(h!==En)return h}u=kD(s),s=s[ko]}o=u}return i}function kD(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[un]:null}function uE(n,e=null,t=null,r){let i=OD(n,e,t,r);return i.resolveInjectorInitializers(),i}function OD(n,e=null,t=null,r,i=new Set){let o=[t||In,$M(n)];return r=r||(typeof n=="object"?void 0:Vt(n)),new _a(o,e||ig(),r||null,i)}var Zt=class n{static{this.THROW_IF_NOT_FOUND=ya}static{this.NULL=new Qu}static create(e,t){if(Array.isArray(e))return uE({name:""},t,e,"");{let r=e.name??"";return uE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(jE)})}static{this.__NG_ELEMENT_ID__=-1}};var zR=new W("");zR.__NG_ELEMENT_ID__=n=>{let e=ln();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new Z(204,!1)};var GR="ngOriginalError";function up(n){return n[GR]}var FD=!0,fg=(()=>{class n{static{this.__NG_ELEMENT_ID__=WR}static{this.__NG_ENV_ID__=t=>t}}return n})(),Sp=class extends fg{constructor(e){super(),this._lView=e}onDestroy(e){return lD(this._lView,e),()=>lR(this._lView,e)}};function WR(){return new Sp(tt())}var Fo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Ap=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,JE()&&(this.destroyRef=j(fg,{optional:!0})??void 0,this.pendingTasks=j(Fo,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Et=Ap;function rl(...n){}function LD(n){let e,t;function r(){n=rl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function lE(n){return queueMicrotask(()=>n()),()=>{n=rl}}var pg="isAngularZone",il=pg+"_ID",KR=0,me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=FD}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ZR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(pg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,QR,rl,rl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},QR={};function gg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function YR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){LD(()=>{n.callbackScheduled=!1,xp(n),n.isCheckStableRunning=!0,gg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),xp(n)}function ZR(n){let e=()=>{YR(n)},t=KR++;n._inner=n._inner.fork({name:"angular",properties:{[pg]:!0,[il]:t,[il+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(JR(u))return r.invokeTask(o,s,a,u);try{return dE(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),hE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return dE(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!XR(u)&&e(),hE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,xp(n),gg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function xp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function dE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hE(n){n._nesting--,gg(n)}var ol=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function JR(n){return VD(n,"__ignore_ng_zone__")}function XR(n){return VD(n,"__scheduler_tick__")}function VD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function eN(n="zone.js",e){return n==="noop"?new ol:n==="zone.js"?new me(e):n}var Kn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&up(e);for(;t&&up(t);)t=up(t);return t||null}},tN=new W("",{providedIn:"root",factory:()=>{let n=j(me),e=j(Kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function nN(){return bl(ln(),tt())}function bl(n,e){return new xa(bn(n,e))}var xa=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=nN}}return n})();function jD(n){return(n.flags&128)===128}var BD=new Map,rN=0;function iN(){return rN++}function oN(n){BD.set(n[wl],n)}function Mp(n){BD.delete(n[wl])}var fE="__ngContext__";function mi(n,e){Dr(e)?(n[fE]=e[wl],oN(e)):n[fE]=e}function UD(n){return HD(n[wa])}function $D(n){return HD(n[cn])}function HD(n){for(;n!==null&&!Zn(n);)n=n[cn];return n}var Rp;function qD(n){Rp=n}function sN(){if(Rp!==void 0)return Rp;if(typeof document<"u")return document;throw new Z(210,!1)}var Sl=new W("",{providedIn:"root",factory:()=>aN}),aN="ng",mg=new W(""),Rt=new W("",{providedIn:"platform",factory:()=>"unknown"});var yg=new W("",{providedIn:"root",factory:()=>sN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cN="h",uN="b";var lN=()=>null;function vg(n,e,t=!1){return lN(n,e,t)}var zD=!1,dN=new W("",{providedIn:"root",factory:()=>zD});function GD(n){return n instanceof Function?n():n}function hN(n){return(n??j(Zt)).get(Rt)==="browser"}var xr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(xr||{}),fN;function _g(n,e){return fN(n,e)}function Io(n,e,t,r,i){if(r!=null){let o,s=!1;Zn(r)?o=r:Dr(r)&&(s=!0,r=r[Yn]);let a=Wn(r);n===0&&t!==null?i==null?ZD(e,t,a):sl(e,t,a,i||null,!0):n===1&&t!==null?sl(e,t,a,i||null,!0):n===2?AN(e,a,s):n===3&&e.destroyNode(a),o!=null&&MN(e,n,o,t,i)}}function pN(n,e){return n.createText(e)}function gN(n,e,t){n.setValue(e,t)}function WD(n,e,t){return n.createElement(e,t)}function mN(n,e){KD(n,e),e[Yn]=null,e[un]=null}function yN(n,e,t,r,i,o){r[Yn]=i,r[un]=e,Al(n,r,t,1,i,o)}function KD(n,e){e[Gn].changeDetectionScheduler?.notify(9),Al(n,e,e[Mt],2,null,null)}function vN(n){let e=n[wa];if(!e)return lp(n[pe],n);for(;e;){let t=null;if(Dr(e))t=e[wa];else{let r=e[Yt];r&&(t=r)}if(!t){for(;e&&!e[cn]&&e!==n;)Dr(e)&&lp(e[pe],e),e=e[Dt];e===null&&(e=n),Dr(e)&&lp(e[pe],e),t=e&&e[cn]}e=t}}function _N(n,e,t,r){let i=Yt+r,o=t.length;r>0&&(t[i-1][cn]=e),r<o-Yt?(e[cn]=t[i],VE(t,Yt+r,e)):(t.push(e),e[cn]=null),e[Dt]=t;let s=e[Ao];s!==null&&t!==s&&QD(s,e);let a=e[xo];a!==null&&a.insertView(n),Ep(e),e[oe]|=128}function QD(n,e){let t=n[Ju],r=e[Dt];if(Dr(r))n[oe]|=Xu.HasTransplantedViews;else{let i=r[Dt][Cn];e[Cn]!==i&&(n[oe]|=Xu.HasTransplantedViews)}t===null?n[Ju]=[e]:t.push(e)}function wg(n,e){let t=n[Ju],r=t.indexOf(e);t.splice(r,1)}function Np(n,e){if(n.length<=Yt)return;let t=Yt+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&wg(i,r),e>0&&(n[t-1][cn]=r[cn]);let o=Ku(n,Yt+e);mN(r[pe],r);let s=o[xo];s!==null&&s.detachView(o[pe]),r[Dt]=null,r[cn]=null,r[oe]&=-129}return r}function YD(n,e){if(!(e[oe]&256)){let t=e[Mt];t.destroyNode&&Al(n,e,t,3,null,null),vN(e)}}function lp(n,e){if(e[oe]&256)return;let t=De(null);try{e[oe]&=-129,e[oe]|=256,e[Qt]&&Ff(e[Qt]),IN(n,e),wN(n,e),e[pe].type===1&&e[Mt].destroy();let r=e[Ao];if(r!==null&&Zn(e[Dt])){r!==e[Dt]&&wg(r,e);let i=e[xo];i!==null&&i.detachView(n)}Mp(e)}finally{De(t)}}function wN(n,e){let t=n.cleanup,r=e[tE];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[tE]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function IN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ia)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ir(4,a,u);try{u.call(a)}finally{Ir(5,a,u)}}else{Ir(4,i,o);try{o.call(i)}finally{Ir(5,i,o)}}}}}function EN(n,e,t){return DN(n,e.parent,t)}function DN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Dn.None||o===Dn.Emulated)return null}return bn(r,t)}}function sl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ZD(n,e,t){n.appendChild(e,t)}function pE(n,e,t,r,i){r!==null?sl(n,e,t,r,i):ZD(n,e,t)}function JD(n,e){return n.parentNode(e)}function CN(n,e){return n.nextSibling(e)}function TN(n,e,t){return SN(n,e,t)}function bN(n,e,t){return n.type&40?bn(n,t):null}var SN=bN,gE;function Ig(n,e,t,r){let i=EN(n,r,e),o=e[Mt],s=r.parent||e[un],a=TN(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)pE(o,i,t[u],a,!1);else pE(o,i,t,a,!1);gE!==void 0&&gE(o,r,e,t,i)}function pa(n,e){if(e!==null){let t=e.type;if(t&3)return bn(e,n);if(t&4)return Pp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return pa(n,r);{let i=n[e.index];return Zn(i)?Pp(-1,i):Wn(i)}}else{if(t&128)return pa(n,e.next);if(t&32)return _g(e,n)()||Wn(n[e.index]);{let r=XD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=pi(n[Cn]);return pa(i,r)}else return pa(n,e.next)}}}return null}function XD(n,e){if(e!==null){let r=n[Cn][un],i=e.projection;return r.projection[i]}return null}function Pp(n,e){let t=Yt+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return pa(r,i)}return e[fi]}function AN(n,e,t){n.removeChild(null,e,t)}function Eg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&mi(Wn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Eg(n,e,t.child,r,i,o,!1),Io(e,n,i,a,o);else if(u&32){let l=_g(t,r),h;for(;h=l();)Io(e,n,i,h,o);Io(e,n,i,a,o)}else u&16?xN(n,e,r,t,i,o):Io(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Al(n,e,t,r,i,o){Eg(t,r,n.firstChild,e,i,o,!1)}function xN(n,e,t,r,i,o){let s=t[Cn],u=s[un].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Io(e,n,i,h,o)}else{let l=u,h=s[Dt];jD(r)&&(l.flags|=128),Eg(n,e,l,h,i,o,!0)}}function MN(n,e,t,r,i){let o=t[fi],s=Wn(t);o!==s&&Io(e,n,r,o,i);for(let a=Yt;a<t.length;a++){let u=t[a];Al(u[pe],u,n,e,r,o)}}function RN(n,e,t){n.setAttribute(e,"style",t)}function eC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function tC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&gp(n,e,r),i!==null&&eC(n,e,i),o!==null&&RN(n,e,o)}var wi={};function Ce(n=1){nC(Oo(),tt(),Tl()+n,!1)}function nC(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&$u(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Hu(e,o,0,t)}gi(t)}function Pe(n,e=le.Default){let t=tt();if(t===null)return O(n,e);let r=ln();return ND(r,t,Kt(n),e)}function rC(){let n="invalid";throw new Error(n)}function iC(n,e,t,r,i,o){let s=De(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][mI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Cr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):rD(e,a,r,o)}finally{De(s)}}function NN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gi(~i);else{let o=i,s=t[++r],a=t[++r];CR(s,o);let u=e[o];a(2,u)}}}finally{gi(-1)}}function xl(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Yn]=i,p[oe]=r|4|128|8|64,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),cD(p),p[Dt]=p[ko]=n,p[zn]=t,p[Gn]=s||n&&n[Gn],p[Mt]=a||n&&n[Mt],p[So]=u||n&&n[So]||null,p[un]=o,p[wl]=iN(),p[Yu]=h,p[XE]=l,p[Cn]=e.type==2?n[Cn]:p,p}function Ml(n,e,t,r,i){let o=n.data[e];if(o===null)o=PN(n,e,t,r,i),DR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=yR();o.injectorIndex=s===null?-1:s.injectorIndex}return Aa(o,!0),o}function PN(n,e,t,r,i){let o=fD(),s=pD(),a=s?o:o&&o.parent,u=n.data[e]=VN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function oC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sC(n,e,t,r,i){let o=Tl(),s=r&2;try{gi(-1),s&&e.length>br&&nC(n,e,br,!1),Ir(s?2:0,i),t(r,i)}finally{gi(o),Ir(s?3:1,i)}}function aC(n,e,t){if(tD(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{De(r)}}}function cC(n,e,t){hD()&&(zN(n,e,t,bn(t,e)),(t.flags&64)===64&&fC(n,e,t))}function uC(n,e,t=bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function lC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Dg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Dg(n,e,t,r,i,o,s,a,u,l,h){let p=br+r,m=p+i,v=kN(p,m),b=typeof l=="function"?l():l;return v[pe]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function kN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wi);return t}function ON(n,e,t,r){let o=r.get(dN,zD)||t===Dn.ShadowDom,s=n.selectRootElement(e,o);return FN(s),s}function FN(n){LN(n)}var LN=()=>null;function VN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return pR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?yE(r,t,l,a,u):yE(r,t,l,a)}return r}function yE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function jN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=mE(0,p.inputs,h,u,v),l=mE(1,p.outputs,h,l,b);let R=u!==null&&s!==null&&!ng(e)?eP(u,h,s):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function BN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function UN(n,e,t,r,i,o,s,a){let u=bn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Cg(n,t,h,r,i),Il(e)&&$N(t,e.index)):e.type&3?(r=BN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function $N(n,e){let t=_i(e,n);t[oe]&16||(t[oe]|=64)}function dC(n,e,t,r){if(hD()){let i=r===null?null:{"":-1},o=WN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&hC(n,e,t,s,i,a),i&&KN(t,r,i)}t.mergedAttrs=tg(t.mergedAttrs,t.attrs)}function hC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)jR(AD(t,e),n,r[l].type);YN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=oC(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=tg(t.mergedAttrs,h.hostAttrs),ZN(n,t,e,u,h),QN(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}jN(n,t,o)}function HN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;qN(s)!=a&&s.push(a),s.push(t,r,o)}}function qN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function zN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Il(t)&&JN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||AD(t,e),mi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Ea(e,n,a,t);if(mi(l,e),s!==null&&XN(e,a-i,l,u,t,s),Sa(u)){let h=_i(t.index,e);h[zn]=Ea(e,n,a,t)}}}function fC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=TR();try{gi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Dp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&GN(u,l)}}finally{gi(-1),Dp(s)}}function GN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function WN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(PM(e,s.selectors,!1))if(r||(r=[]),Sa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;kp(n,e,u)}else r.unshift(s),kp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function kp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function KN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}}function QN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Sa(e)&&(t[""]=n)}}function YN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ZN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new Ia(o,Sa(i),Pe);n.blueprint[r]=s,t[r]=s,HN(n,e,r,oC(n,t,i.hostVars,wi),i)}function JN(n,e,t){let r=bn(e,n),i=lC(t),o=n[Gn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Rl(n,xl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function XN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];iC(r,t,u,l,h,p)}}function eP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function pC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function gC(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];yD(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function Rl(n,e){return n[wa]?n[nE][cn]=e:n[wa]=e,n[nE]=e,e}function Op(n,e,t){yD(0);let r=De(null);try{e(n,t)}finally{De(r)}}function tP(n,e){let t=n[So],r=t?t.get(Kn,null):null;r&&r.handleError(e)}function Cg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];iC(h,l,r,a,u,i)}}function mC(n,e,t){let r=aR(e,n);gN(n[Mt],r,t)}function nP(n,e){let t=_i(e,n),r=t[pe];rP(r,t);let i=t[Yn];i!==null&&t[Yu]===null&&(t[Yu]=vg(i,t[So])),Tg(r,t,t[zn])}function rP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Tg(n,e,t){sg(e);try{let r=n.viewQuery;r!==null&&Op(1,r,t);let i=n.template;i!==null&&sC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&gC(n,e),n.staticViewQueries&&Op(2,n.viewQuery,t);let o=n.components;o!==null&&iP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,ag()}}function iP(n,e){for(let t=0;t<e.length;t++)nP(n,e[t])}function oP(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=xl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ao]=l;let h=n[xo];return h!==null&&(u[xo]=h.createEmbeddedView(o)),Tg(o,u,t),u}finally{De(i)}}function vE(n,e){return!e||e.firstChild===null||jD(n)}function sP(n,e,t,r=!0){let i=e[pe];if(_N(i,e,n,t),r){let s=Pp(t,n),a=e[Mt],u=JD(a,n[fi]);u!==null&&yN(i,n[un],a,e,u,s)}let o=e[Yu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function al(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wn(o)),Zn(o)&&aP(o,r);let s=t.type;if(s&8)al(n,e,t.child,r);else if(s&32){let a=_g(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=XD(e,t);if(Array.isArray(a))r.push(...a);else{let u=pi(e[Cn]);al(u[pe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function aP(n,e){for(let t=Yt;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&al(r[pe],r,i,e)}n[fi]!==n[Yn]&&e.push(n[fi])}var yC=[];function cP(n){return n[Qt]??uP(n)}function uP(n){let e=yC.pop()??Object.create(dP);return e.lView=n,e}function lP(n){n.lView[Qt]!==n&&(n.lView=null,yC.push(n))}var dP=xe(V({},Pf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Cl(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function hP(n){let e=n[Qt]??Object.create(fP);return e.lView=n,e}var fP=xe(V({},Pf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=pi(n.lView);for(;e&&!vC(e[pe]);)e=pi(e);e&&uD(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function vC(n){return n.type!==2}var pP=100;function _C(n,e=!0,t=0){let r=n[Gn],i=r.rendererFactory,o=!1;o||i.begin?.();try{gP(n,t)}catch(s){throw e&&tP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function gP(n,e){let t=gD();try{iE(!0),Fp(n,e);let r=0;for(;Dl(n);){if(r===pP)throw new Z(103,!1);r++,Fp(n,1)}}finally{iE(t)}}function mP(n,e,t,r){let i=e[oe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Gn].inlineEffectRunner?.flush(),sg(e);let a=!0,u=null,l=null;o||(vC(n)?(l=cP(e),u=kf(l)):yI()===null?(a=!1,l=hP(e),u=kf(l)):e[Qt]&&(Ff(e[Qt]),e[Qt]=null));try{cD(e),IR(n.bindingStartIndex),t!==null&&sC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&$u(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Hu(e,v,0,null),sp(e,0)}if(s||yP(e),wC(e,0),n.contentQueries!==null&&gC(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&$u(e,v)}else{let v=n.contentHooks;v!==null&&Hu(e,v,1),sp(e,1)}NN(n,e);let p=n.components;p!==null&&EC(e,p,0);let m=n.viewQuery;if(m!==null&&Op(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&$u(e,v)}else{let v=n.viewHooks;v!==null&&Hu(e,v,2),sp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[op]){for(let v of e[op])v();e[op]=null}o||(e[oe]&=-73)}catch(h){throw o||Cl(e),h}finally{l!==null&&(vI(l,u),a&&lP(l)),ag()}}function wC(n,e){for(let t=UD(n);t!==null;t=$D(t))for(let r=Yt;r<t.length;r++){let i=t[r];IC(i,e)}}function yP(n){for(let e=UD(n);e!==null;e=$D(e)){if(!(e[oe]&Xu.HasTransplantedViews))continue;let t=e[Ju];for(let r=0;r<t.length;r++){let i=t[r];uD(i)}}}function vP(n,e,t){let r=_i(e,n);IC(r,t)}function IC(n,e){og(n)&&Fp(n,e)}function Fp(n,e){let r=n[pe],i=n[oe],o=n[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Of(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)mP(r,n,r.template,n[zn]);else if(i&8192){wC(n,1);let a=r.components;a!==null&&EC(n,a,1)}}function EC(n,e,t){for(let r=0;r<e.length;r++)vP(n,e[r],t)}function DC(n,e){let t=gD()?64:1088;for(n[Gn].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=pi(n);if(wp(n)&&!r)return n;n=r}return null}var yi=class{get rootNodes(){let e=this._lView,t=e[pe];return al(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(e){this._lView[zn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(Zn(e)){let t=e[Zu],r=t?t.indexOf(this):-1;r>-1&&(Np(e,r),Ku(t,r))}this._attachedToViewContainer=!1}YD(this._lView[pe],this._lView)}onDestroy(e){lD(this._lView,e)}markForCheck(){DC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Ep(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,_C(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wp(this._lView),t=this._lView[Ao];t!==null&&!e&&wg(t,this._lView),KD(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=wp(this._lView),r=this._lView[Ao];r!==null&&!t&&QD(r,this._lView),Ep(this._lView)}},bg=(()=>{class n{static{this.__NG_ELEMENT_ID__=IP}}return n})(),_P=bg,wP=class extends _P{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=oP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new yi(i)}};function IP(){return EP(ln(),tt())}function EP(n,e){return n.type&4?new wP(e,n,bl(n,e)):null}var xq=new RegExp(`^(\\d+)*(${uN}|${cN})*(.*)`);var DP=()=>null;function _E(n,e){return DP(n,e)}var Mo=class{},Sg=new W("",{providedIn:"root",factory:()=>!1});var CC=new W(""),TC=new W(""),Lp=class{},cl=class{};function CP(n){let e=Error(`No component factory found for ${Vt(n)}.`);return e[TP]=n,e}var TP="ngComponent";var Vp=class{resolveComponentFactory(e){throw CP(e)}},Ro=class{static{this.NULL=new Vp}},No=class{},Nl=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>bP()}}return n})();function bP(){let n=tt(),e=ln(),t=_i(e.index,n);return(Dr(t)?t:n)[Mt]}var SP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function jp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=zI(i,a);else if(o==2){let u=a,l=e[++s];r=zI(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ul=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Tr(e);return new Po(t,this.ngModule)}};function wE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Cr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function AP(n){let e=n.toLowerCase();return e==="svg"?oR:e==="math"?sR:null}var Po=class extends cl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=wE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return wE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=LM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof jt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Cp(e,s):e,u=a.get(No,null);if(u===null)throw new Z(407,!1);let l=a.get(SP,null),h=a.get(Mo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?ON(m,r,this.componentDef.encapsulation,a):WD(m,v,AP(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;b!==null&&(N=vg(b,a,!0));let B=Dg(0,null,null,1,0,null,null,null,null,null,null),q=xl(null,B,null,R,null,null,p,m,a,null,N);sg(q);let F,J,ne=null;try{let X=this.componentDef,I,y=null;X.findHostDirectiveDefs?(I=[],y=new Map,X.findHostDirectiveDefs(X,I,y),I.push(X)):I=[X];let w=xP(q,b);ne=MP(w,b,X,I,q,p,m),J=aD(B,br),b&&PP(m,X,b,r),t!==void 0&&kP(J,this.ngContentSelectors,t),F=NP(ne,X,I,y,q,[OP]),Tg(B,q,null)}catch(X){throw ne!==null&&Mp(ne),Mp(q),X}finally{ag()}return new Bp(this.componentType,F,bl(J,q),q,J)}finally{De(o)}}},Bp=class extends Lp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Cg(o[pe],o,i,e,t),this.previousInputValues.set(e,t);let s=_i(this._tNode.index,o);DC(s,1)}}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xP(n,e){let t=n[pe],r=br;return n[r]=e,Ml(t,r,2,"#host",null)}function MP(n,e,t,r,i,o,s){let a=i[pe];RP(r,n,e,s);let u=null;e!==null&&(u=vg(e,i[So]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=xl(i,lC(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&kp(a,n,r.length-1),Rl(i,p),i[n.index]=p}function RP(n,e,t,r){for(let i of n)e.mergedAttrs=tg(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(jp(e,e.mergedAttrs,!0),t!==null&&tC(r,t,e))}function NP(n,e,t,r,i,o){let s=ln(),a=i[pe],u=bn(s,i);hC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Ea(i,a,p,s);mi(m,i)}fC(a,i,s),u&&mi(u,i);let l=Ea(i,a,s.directiveStart+s.componentOffset,s);if(n[zn]=i[zn]=l,o!==null)for(let h of o)h(l,e);return aC(a,s,i),l}function PP(n,e,t,r){if(r)gp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=VM(e.selectors[0]);i&&gp(n,t,i),o&&o.length>0&&eC(n,t,o.join(" "))}}function kP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function OP(){let n=ln();lg(tt()[pe],n)}var Ma=(()=>{class n{static{this.__NG_ELEMENT_ID__=FP}}return n})();function FP(){let n=ln();return VP(n,tt())}var LP=Ma,bC=class extends LP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=dg(this._hostTNode,this._hostLView);if(TD(e)){let t=nl(e,this._hostLView),r=tl(e),i=t[pe].data[r+8];return new hi(i,t)}else return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=IE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=_E(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,vE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!tR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new Po(Tr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(jt,null);R&&(o=R)}let h=Tr(u.componentType??{}),p=_E(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,vE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(cR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Dt],l=new bC(u,u[un],u[Dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return sP(s,i,o,r),e.attachToViewContainerRef(),VE(dp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=IE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Np(this._lContainer,t);r&&(Ku(dp(this._lContainer),t),YD(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Np(this._lContainer,t);return r&&Ku(dp(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function IE(n){return n[Zu]}function dp(n){return n[Zu]||(n[Zu]=[])}function VP(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=pC(r,e,null,n),e[n.index]=t,Rl(e,t)),BP(t,e,n,r),new bC(t,n,e)}function jP(n,e){let t=n[Mt],r=t.createComment(""),i=bn(e,n),o=JD(t,i);return sl(t,o,r,CN(t,i),!1),r}var BP=HP,UP=()=>!1;function $P(n,e,t){return UP(n,e,t)}function HP(n,e,t,r){if(n[fi])return;let i;t.type&8?i=Wn(r):i=jP(e,t),n[fi]=i}var EE=new Set;function Ag(n){EE.has(n)||(EE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function qP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(KP))}return o}return ll.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>QP(o));e.push(u)}),GP(),Promise.all(e).then(()=>{})}var ll=new Map,zP=new Set;function GP(){let n=ll;return ll=new Map,n}function WP(){return ll.size===0}function KP(n){return typeof n=="string"?n:n.text()}function QP(n){zP.delete(n)}var Sr=class{},Da=class{};var dl=class extends Sr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ul(this);let o=GE(e);this._bootstrapComponents=GD(o.bootstrap),this._r3Injector=OD(e,t,[{provide:Sr,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},hl=class extends Da{constructor(e){super(),this.moduleType=e}create(e){return new dl(this.moduleType,e,[])}};function YP(n,e,t){return new dl(n,e,t,!1)}var Up=class extends Sr{constructor(e){super(),this.componentFactoryResolver=new ul(this),this.instance=null;let t=new _a([...e.providers,{provide:Sr,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||ig(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pl(n,e,t=null){return new Up({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function SC(n){return xg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function ZP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function xg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function JP(n,e,t){return n[e]=t}function Ca(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function XP(n,e,t,r){let i=Ca(n,e,t);return Ca(n,e+1,r)||i}function e1(n){return(n.flags&32)===32}function t1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Ml(e,n,4,s||null,a||null);dC(e,t,h,el(l,u)),lg(e,h);let p=h.tView=Dg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function n1(n,e,t,r,i,o,s,a,u,l){let h=t+br,p=e.firstCreatePass?t1(h,e,n,r,i,o,s,a,u):e.data[h];Aa(p,!1);let m=r1(e,n,p,t);cg()&&Ig(e,n,m,p),mi(m,n);let v=pC(m,n,m,p);return n[h]=v,Rl(n,v),$P(v,p,n),nD(p)&&cC(e,n,p),u!=null&&uC(n,p,l),p}function dn(n,e,t,r,i,o,s,a){let u=tt(),l=Oo(),h=el(l.consts,o);return n1(u,l,n,e,t,r,i,h,s,a),dn}var r1=i1;function i1(n,e,t,r){return ug(!0),e[Mt].createComment("")}var Eo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Eo||{}),AC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),$p=class n{constructor(){this.ngZone=j(me),this.scheduler=j(Mo),this.errorHandler=j(Kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Eo.EarlyRead,Eo.Write,Eo.MixedReadWrite,Eo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Hp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Mg(n,e){!e?.injector&&XM(Mg);let t=e?.injector??j(Zt);return hN(t)?(Ag("NgAfterNextRender"),s1(n,t,e,!0)):a1}function o1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function s1(n,e,t,r){let i=e.get(AC);i.impl??=e.get($p);let o=t?.phase??Eo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(fg):null,a=new Hp(i.impl,o1(n,o),r,s);return i.impl.register(a),a}var a1={destroy(){}};function c1(n,e,t,r){return Ca(n,mD(),t)?e+Gu(t)+r:wi}function u1(n,e,t,r,i,o){let s=wR(),a=XP(n,s,t,i);return ER(2),a?e+Gu(t)+r+Gu(i)+o:wi}function Jt(n,e,t){let r=tt(),i=mD();if(Ca(r,i,e)){let o=Oo(),s=AR();UN(o,s,r,n,e,r[Mt],t,!1)}return Jt}function DE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Cg(n,t,o[s],s,r)}function l1(n,e,t,r,i,o){let s=e.consts,a=el(s,i),u=Ml(e,n,2,r,a);return dC(e,t,u,el(s,o)),u.attrs!==null&&jp(u,u.attrs,!1),u.mergedAttrs!==null&&jp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function re(n,e,t,r){let i=tt(),o=Oo(),s=br+n,a=i[Mt],u=o.firstCreatePass?l1(s,o,i,e,t,r):o.data[s],l=d1(o,i,u,a,e,n);i[s]=l;let h=nD(u);return Aa(u,!0),tC(a,l,u),!e1(u)&&cg()&&Ig(o,i,l,u),dR()===0&&mi(l,i),hR(),h&&(cC(o,i,u),aC(o,u,i)),r!==null&&uC(i,u),re}function K(){let n=ln();pD()?vR():(n=n.parent,Aa(n,!1));let e=n;gR(e)&&mR(),fR();let t=Oo();return t.firstCreatePass&&(lg(t,n),tD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&PR(e)&&DE(t,e,tt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kR(e)&&DE(t,e,tt(),e.stylesWithoutHost,!1),K}function Bt(n,e,t,r){return re(n,e,t,r),K(),Bt}var d1=(n,e,t,r,i,o)=>(ug(!0),WD(r,i,xR()));var fl="en-US";var h1=fl;function f1(n){typeof n=="string"&&(h1=n.toLowerCase().replace(/_/g,"-"))}function xC(n=1){return SR(n)}function te(n,e=""){let t=tt(),r=Oo(),i=n+br,o=r.firstCreatePass?Ml(r,i,1,e,null):r.data[i],s=p1(r,t,o,e,n);t[i]=s,cg()&&Ig(r,t,s,o),Aa(o,!1)}var p1=(n,e,t,r,i)=>(ug(!0),pN(e[Mt],r));function Mr(n){return nt("",n,""),Mr}function nt(n,e,t){let r=tt(),i=c1(r,n,e,t);return i!==wi&&mC(r,Tl(),i),nt}function Rg(n,e,t,r,i){let o=tt(),s=u1(o,n,e,t,r,i);return s!==wi&&mC(o,Tl(),s),Rg}var g1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=QE(!1,t.type),i=r.length>0?Pl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(jt))})}}return n})();function MC(n){Ag("NgStandalone"),n.getStandaloneInjector=e=>e.get(g1).getOrCreateStandaloneInjector(n)}function RC(n,e,t,r){return y1(tt(),_R(),n,e,t,r)}function m1(n,e){let t=n[e];return t===wi?void 0:t}function y1(n,e,t,r,i,o){let s=e+t;return Ca(n,s,i)?JP(n,s+1,o?r.call(o,i):r(i)):m1(n,s+1)}var ju=null;function v1(n){ju!==null&&(n.defaultEncapsulation!==ju.defaultEncapsulation||n.preserveWhitespaces!==ju.preserveWhitespaces)||(ju=n)}var Ar=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},NC=new Ar("18.2.13");var kl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Ng=new W(""),Ra=new W(""),Ol=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Pg||(_1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(me),O(Fl),O(Ra))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Fl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Pg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function _1(n){Pg=n}var Pg;function Na(n){return!!n&&typeof n.then=="function"}function PC(n){return!!n&&typeof n.subscribe=="function"}var Ll=new W(""),kC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Ll,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Na(o))t.push(o);else if(PC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kg=new W("");function w1(){_I(()=>{throw new Z(600,!1)})}function I1(n){return n.isBoundToModule}var E1=10;function D1(n,e,t){try{let r=t();return Na(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function OC(n,e){return Array.isArray(e)?e.reduce(OC,n):V(V({},n),e)}var Rr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(tN),this.afterRenderManager=j(AC),this.zonelessEnabled=j(Sg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=j(Fo).hasPendingTasks.pipe(G(t=>!t)),this._injector=j(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof cl;if(!this._injector.get(kC).done){let m=!i&&zE(t),v=!1;throw new Z(405,v)}let s;i?s=t:s=this._injector.get(Ro).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=I1(s)?void 0:this._injector.get(Sr),u=r||s.selector,l=s.create(Zt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Ng,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),qu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Z(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(No,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<E1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)C1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Dl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;qu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(kg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function C1(n,e,t,r){if(!t&&!Dl(n))return;_C(n,e,t&&!r?0:1)}var qp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Vl=(()=>{class n{compileModuleSync(t){return new hl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=GE(t),o=GD(i.declarations).reduce((s,a)=>{let u=Tr(a);return u&&s.push(new Po(u)),s},[]);return new qp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),T1=new W("");function b1(n,e,t){let r=new hl(t);return Promise.resolve(r)}function CE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var S1=(()=>{class n{constructor(){this.zone=j(me),this.changeDetectionScheduler=j(Mo),this.applicationRef=j(Rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(xe(V({},FC()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:bo,multi:!0,useFactory:()=>{let r=j(S1,{optional:!0});return()=>r.initialize()}},{provide:bo,multi:!0,useFactory:()=>{let r=j(x1);return()=>{r.initialize()}}},e===!0?{provide:CC,useValue:!0}:[],{provide:TC,useValue:t??FD}]}function FC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var x1=(()=>{class n{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=j(me),this.pendingTasks=j(Fo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var M1=(()=>{class n{constructor(){this.appRef=j(Rr),this.taskService=j(Fo),this.ngZone=j(me),this.zonelessEnabled=j(Sg),this.disableScheduling=j(CC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ue,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(il):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(TC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ol||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?lE:LD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R1(){return typeof $localize<"u"&&$localize.locale||fl}var Og=new W("",{providedIn:"root",factory:()=>j(Og,le.Optional|le.SkipSelf)||R1()});var pl=new W("");function Bu(n){return!n.moduleRef}function N1(n){let e=Bu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{Bu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Bu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(pl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pl);s.add(o),n.moduleRef.onDestroy(()=>{qu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return D1(r,t,()=>{let o=e.get(kC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Og,fl);if(f1(s||fl),Bu(n)){let a=e.get(Rr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return P1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function P1(n,e){let t=n.injector.get(Rr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}var LC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>eN(r?.ngZone,xe(V({},FC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[A1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Mo,useExisting:M1}],u=YP(t.moduleType,this.injector,a);return N1({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=OC({},r);return b1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(pl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Zt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ma=null,VC=new W("");function k1(n){if(ma&&!ma.get(VC,!1))throw new Z(400,!1);w1(),ma=n;let e=n.get(LC);return L1(n),e}function Fg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=jC();if(!s||s.injector.get(VC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):k1(O1(a,r))}return F1(i)}}function O1(n=[],e){return Zt.create({name:e,providers:[{provide:_l,useValue:"platform"},{provide:pl,useValue:new Set([()=>ma=null])},...n]})}function F1(n){let e=jC();if(!e)throw new Z(401,!1);return e}function jC(){return ma?.get(LC)??null}function L1(n){n.get(mg,null)?.forEach(t=>t())}function Lg(){return!1}var Pa=(()=>{class n{static{this.__NG_ELEMENT_ID__=V1}}return n})();function V1(n){return j1(ln(),tt(),(n&16)===16)}function j1(n,e,t){if(Il(n)&&!t){let r=_i(n.index,e);return new yi(r,r)}else if(n.type&175){let r=e[Cn];return new yi(r,e)}return null}var zp=class{constructor(){}supports(e){return SC(e)}create(e){return new Gp(e)}},B1=(n,e)=>e,Gp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||B1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<TE(r,i,o)?t:r,a=TE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!SC(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,ZP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Wp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new gl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Wp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Kp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},gl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Kp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Qp=class{constructor(){}supports(e){return e instanceof Map||xg(e)}create(){return new Yp}},Yp=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||xg(e)))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Zp(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Zp=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function bE(){return new Vg([new zp])}var Vg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:bE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||bE()),deps:[[n,new vl,new vi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function SE(){return new jg([new Qp])}var jg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:SE})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||SE()),deps:[[n,new vl,new vi]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Z(901,!1)}}return n})();var BC=Fg(null,"core",[]),UC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Rr))}}static{this.\u0275mod=Tt({type:n})}static{this.\u0275inj=Ct({})}}return n})();function $C(n){let e=Tr(n);if(!e)return null;let t=new Po(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var GC=null;function Ii(){return GC}function WC(n){GC??=n}var jl=class{};var Nt=new W(""),Hg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(z1),providedIn:"platform"})}}return n})(),KC=new W(""),z1=(()=>{class n extends Hg{constructor(){super(),this._doc=j(Nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ii().getBaseHref(this._doc)}onPopState(t){let r=Ii().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ii().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function qg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function HC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Jn(n){return n&&n[0]!=="?"?"?"+n:n}var Ei=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(zg),providedIn:"root"})}}return n})(),QC=new W(""),zg=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Hg),O(QC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YC=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=qg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Hg),O(QC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Lo=(()=>{class n{constructor(t){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=K1(HC(qC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Jn(r))}normalize(t){return n.stripTrailingSlash(W1(this._basePath,qC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Jn}static{this.joinWithSlash=qg}static{this.stripTrailingSlash=HC}static{this.\u0275fac=function(r){return new(r||n)(O(Ei))}}static{this.\u0275prov=H({token:n,factory:()=>G1(),providedIn:"root"})}}return n})();function G1(){return new Lo(O(Ei))}function W1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qC(n){return n.replace(/\/index.html$/,"")}function K1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function ZC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Bg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Sn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Bg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),zC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);zC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Pe(Ma),Pe(bg),Pe(Vg))}}static{this.\u0275dir=ba({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function zC(n,e){n.context.$implicit=e.item}var JC=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:xr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Pe(xa),Pe(jg),Pe(Nl))}}static{this.\u0275dir=ba({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var XC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Tt({type:n})}static{this.\u0275inj=Ct({})}}return n})(),Gg="browser",Q1="server";function Y1(n){return n===Gg}function Di(n){return n===Q1}var e0=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>Y1(j(Rt))?new Ug(j(Nt),window):new $g})}}return n})(),Ug=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Z1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function Z1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var $g=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Bl=class{};var Qg=class extends jl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Yg=class n extends Qg{static makeCurrent(){WC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=X1();return t==null?null:ek(t)}resetBaseElement(){Oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ZC(document.cookie,e)}},Oa=null;function X1(){return Oa=Oa||document.querySelector("base"),Oa?Oa.getAttribute("href"):null}function ek(n){return new URL(n,document.baseURI).pathname}var Zg=class{addToWindow(e){Qn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Z(5103,!1);return o},Qn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Qn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Qn.frameworkStabilizers||(Qn.frameworkStabilizers=[]),Qn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ii().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},tk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Jg=new W(""),i0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Jg),O(me))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ul=class{constructor(e){this._doc=e}},Wg="ng-app-id",o0=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Di(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Wg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Wg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Wg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Nt),O(Sl),O(yg,8),O(Rt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Kg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},em=/%COMP%/g,s0="%COMP%",nk=`_nghost-${s0}`,rk=`_ngcontent-${s0}`,ik=!0,ok=new W("",{providedIn:"root",factory:()=>ik});function sk(n){return rk.replace(em,n)}function ak(n){return nk.replace(em,n)}function a0(n,e){return e.map(t=>t.replace(em,n))}var t0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Di(a),this.defaultRenderer=new Fa(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dn.ShadowDom&&(r=xe(V({},r),{encapsulation:Dn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof $l?i.applyToHost(t):i instanceof La&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Dn.Emulated:o=new $l(u,l,r,this.appId,h,s,a,p);break;case Dn.ShadowDom:return new Xg(u,l,t,r,s,a,this.nonce,p);default:o=new La(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(i0),O(o0),O(Sl),O(ok),O(Nt),O(Rt),O(me),O(yg))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Fa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Kg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(n0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(n0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Kg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Kg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xr.DashCase|xr.Important)?e.style.setProperty(t,r,i&xr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ii().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function n0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xg=class extends Fa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=a0(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Fa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?a0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$l=class extends La{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=sk(l),this.hostAttr=ak(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},ck=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),r0=["alt","control","meta","shift"],uk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dk=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ii().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),r0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=uk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),r0.forEach(s=>{if(s!==i){let a=lk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function hk(){Yg.makeCurrent()}function fk(){return new Kn}function pk(){return qD(document),document}var gk=[{provide:Rt,useValue:Gg},{provide:mg,useValue:hk,multi:!0},{provide:Nt,useFactory:pk,deps:[]}],c0=Fg(BC,"browser",gk),mk=new W(""),yk=[{provide:Ra,useClass:Zg,deps:[]},{provide:Ng,useClass:Ol,deps:[me,Fl,Ra]},{provide:Ol,useClass:Ol,deps:[me,Fl,Ra]}],vk=[{provide:_l,useValue:"root"},{provide:Kn,useFactory:fk,deps:[]},{provide:Jg,useClass:ck,multi:!0,deps:[Nt,me,Rt]},{provide:Jg,useClass:dk,multi:!0,deps:[Nt]},t0,o0,i0,{provide:No,useExisting:t0},{provide:Bl,useClass:tk,deps:[]},[]],u0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Sl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(mk,12))}}static{this.\u0275mod=Tt({type:n})}static{this.\u0275inj=Ct({providers:[...vk,...yk],imports:[XC,UC]})}}return n})();var l0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ce="primary",Ja=Symbol("RouteTitle"),om=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ho(n){return new om(n)}function _k(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!An(n[t],e[t]))return!1;return!0}function An(n,e){let t=n?sm(n):void 0,r=e?sm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!E0(n[i],e[i]))return!1;return!0}function sm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function E0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function D0(n){return n.length>0?n[n.length-1]:null}function Pr(n){return Zf(n)?n:Na(n)?Ie(Promise.resolve(n)):ee(n)}var Ik={exact:T0,subset:b0},C0={exact:Ek,subset:Dk,ignored:()=>!0};function h0(n,e,t){return Ik[t.paths](n.root,e.root,t.matrixParams)&&C0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Ek(n,e){return An(n,e)}function T0(n,e,t){if(!Ti(n.segments,e.segments)||!zl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!T0(n.children[r],e.children[r],t))return!1;return!0}function Dk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>E0(n[t],e[t]))}function b0(n,e,t){return S0(n,e,e.segments,t)}function S0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ti(i,t)||e.hasChildren()||!zl(i,t,r))}else if(n.segments.length===t.length){if(!Ti(n.segments,t)||!zl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!b0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ti(n.segments,i)||!zl(n.segments,i,r)||!n.children[ce]?!1:S0(n.children[ce],e,o,r)}}function zl(n,e,t){return e.every((r,i)=>C0[t](n[i].parameters,r.parameters))}var er=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ho(this.queryParams),this._queryParamMap}toString(){return bk.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gl(this)}},Ci=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ho(this.parameters),this._parameterMap}toString(){return x0(this)}};function Ck(n,e){return Ti(n,e)&&n.every((t,r)=>An(t.parameters,e[r].parameters))}function Ti(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Tk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Xa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new qo,providedIn:"root"})}}return n})(),qo=class{parse(e){let t=new cm(e);return new er(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Va(e.root,!0)}`,r=xk(e.queryParams),i=typeof e.fragment=="string"?`#${Sk(e.fragment)}`:"";return`${t}${r}${i}`}},bk=new qo;function Gl(n){return n.segments.map(e=>x0(e)).join("/")}function Va(n,e){if(!n.hasChildren())return Gl(n);if(e){let t=n.children[ce]?Va(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${Va(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Tk(n,(r,i)=>i===ce?[Va(n.children[ce],!1)]:[`${i}:${Va(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${Gl(n)}/${t[0]}`:`${Gl(n)}/(${t.join("//")})`}}function A0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hl(n){return A0(n).replace(/%3B/gi,";")}function Sk(n){return encodeURI(n)}function am(n){return A0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wl(n){return decodeURIComponent(n)}function f0(n){return Wl(n.replace(/\+/g,"%20"))}function x0(n){return`${am(n.path)}${Ak(n.parameters)}`}function Ak(n){return Object.entries(n).map(([e,t])=>`;${am(e)}=${am(t)}`).join("")}function xk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hl(t)}=${Hl(i)}`).join("&"):`${Hl(t)}=${Hl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Mk=/^[^\/()?;#]+/;function tm(n){let e=n.match(Mk);return e?e[0]:""}var Rk=/^[^\/()?;=#]+/;function Nk(n){let e=n.match(Rk);return e?e[0]:""}var Pk=/^[^=?&#]+/;function kk(n){let e=n.match(Pk);return e?e[0]:""}var Ok=/^[^&#]+/;function Fk(n){let e=n.match(Ok);return e?e[0]:""}var cm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new Ee(e,t)),r}parseSegment(){let e=tm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new Ci(Wl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Nk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=tm(this.remaining);i&&(r=i,this.capture(r))}e[Wl(t)]=Wl(r)}parseQueryParam(e){let t=kk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Fk(this.remaining);s&&(r=s,this.capture(r))}let i=f0(t),o=f0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function M0(n){return n.segments.length>0?new Ee([],{[ce]:n}):n}function R0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=R0(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return Lk(t)}function Lk(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new Ee(n.segments.concat(e.segments),e.children)}return n}function qa(n){return n instanceof er}function Vk(n,e,t=null,r=null){let i=N0(n);return P0(i,e,t,r)}function N0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=M0(r);return e??i}function P0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return nm(i,i,i,t,r);let o=jk(e);if(o.toRoot())return nm(i,i,new Ee([],{}),t,r);let s=Bk(o,i,n),a=s.processChildren?Ua(s.segmentGroup,s.index,o.commands):O0(s.segmentGroup,s.index,o.commands);return nm(i,s.segmentGroup,a,t,r)}function Kl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function za(n){return typeof n=="object"&&n!=null&&n.outlets}function nm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=k0(n,e,t);let a=M0(R0(s));return new er(a,o,i)}function k0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=k0(o,e,t)}),new Ee(n.segments,r)}var Ql=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kl(r[0]))throw new Z(4003,!1);let i=r.find(za);if(i&&i!==D0(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ql(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ql(t,e,r)}var Bo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Bk(n,e,t){if(n.isAbsolute)return new Bo(e,!0,0);if(!t)return new Bo(e,!1,NaN);if(t.parent===null)return new Bo(t,!0,0);let r=Kl(n.commands[0])?0:1,i=t.segments.length-1+r;return Uk(t,i,n.numberOfDoubleDots)}function Uk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Bo(r,!1,i-o)}function $k(n){return za(n[0])?n[0].outlets:{[ce]:n}}function O0(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return Ua(n,e,t);let r=Hk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new Ee(n.segments.slice(r.pathIndex),n.children),Ua(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?um(n,e,t):r.match?Ua(n,0,i):um(n,e,t)}function Ua(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=$k(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=Ua(n.children[ce],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=O0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function Hk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(za(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!g0(u,l,s))return o;r+=2}else{if(!g0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function um(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(za(o)){let u=qk(o.outlets);return new Ee(r,u)}if(i===0&&Kl(t[0])){let u=n.segments[e];r.push(new Ci(u.path,p0(t[0]))),i++;continue}let s=za(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Kl(a)?(r.push(new Ci(s,p0(a))),i+=2):(r.push(new Ci(s,{})),i++)}return new Ee(r,{})}function qk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=um(new Ee([],{}),0,r))}),e}function p0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function g0(n,e,t){return n==t.path&&An(e,t.parameters)}var $a="imperative",st=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(st||{}),Xt=class{constructor(e,t){this.id=e,this.url=t}},zo=class extends Xt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=st.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends Xt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($t||{}),Yl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Yl||{}),Xn=class extends Xt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends Xt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationSkipped}},Ga=class extends Xt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zl=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lm=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dm=class extends Xt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hm=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fm=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pm=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gm=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mm=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ym=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vm=class{constructor(e){this.snapshot=e,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_m=class{constructor(e){this.snapshot=e,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=st.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wa=class{},Go=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function zk(n,e){return n.providers&&!n._injector&&(n._injector=Pl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hn(n){return n.outlet||ce}function Gk(n,e){let t=n.filter(r=>hn(r)===e);return t.push(...n.filter(r=>hn(r)!==e)),t}function ec(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var wm=class{get injector(){return ec(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new tc(this.rootInjector),this.attachRef=null}},tc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new wm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Im(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Im(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Em(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Em(e,this._root).map(t=>t.value)}};function Im(n,e){if(n===e.value)return e;for(let t of e.children){let r=Im(n,t);if(r)return r}return null}function Em(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Em(n,t);if(r.length)return r.unshift(e),r}return[]}var Ut=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function jo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ed=class extends Xl{constructor(e,t){super(e),this.snapshot=t,Rm(this,e)}toString(){return this.snapshot.toString()}};function F0(n){let e=Wk(n),t=new ct([new Ci("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Wo(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new ed(new Ut(a,[]),e)}function Wk(n){let e={},t={},r={},i="",o=new Uo([],e,r,i,t,ce,n,null,{});return new nd("",new Ut(o,[]))}var Wo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(G(l=>l[Ja]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Ho(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Ho(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function td(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&V0(i)&&(r.resolve[Ja]=i.title),r}var Uo=class{get title(){return this.data?.[Ja]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ho(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ho(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},nd=class extends Xl{constructor(e,t){super(t),this.url=e,Rm(this,t)}toString(){return L0(this._root)}};function Rm(n,e){e.value._routerState=n,e.children.forEach(t=>Rm(n,t))}function L0(n){let e=n.children.length>0?` { ${n.children.map(L0).join(", ")} } `:"";return`${n.value}${e}`}function rm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,An(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),An(e.params,t.params)||n.paramsSubject.next(t.params),wk(e.url,t.url)||n.urlSubject.next(t.url),An(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Dm(n,e){let t=An(n.params,e.params)&&Ck(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Dm(n.parent,e.parent))}function V0(n){return typeof n.title=="string"||n.title===null}var Kk=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=j(tc),this.location=j(Ma),this.changeDetector=j(Pa),this.inputBinder=j(ad,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Cm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ba({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[El]})}}return n})(),Cm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wo?this.route:e===tc?this.childContexts:this.parent.get(e,t)}},ad=new W(""),m0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=da([r.queryParams,r.params,r.data]).pipe($e(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=$C(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Qk(n,e,t){let r=Ka(n,e._root,t?t._root:void 0);return new ed(r,e)}function Ka(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Yk(n,e,t);return new Ut(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ka(n,a)),s}}let r=Zk(e.value),i=e.children.map(o=>Ka(n,o));return new Ut(r,i)}}function Yk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ka(n,r,i);return Ka(n,r)})}function Zk(n){return new Wo(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Qa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},j0="ngNavigationCancelingError";function rd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=B0(!1,$t.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function B0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[j0]=!0,t.cancellationCode=e,t}function Jk(n){return U0(n)&&qa(n.url)}function U0(n){return!!n&&n[j0]}var Xk=(n,e,t,r)=>G(i=>(new Tm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Tm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=jo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=jo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new _m(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ym(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(rm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},id=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$o=class{constructor(e,t){this.component=e,this.route=t}};function eO(n,e,t){let r=n._root,i=e?e._root:null;return ja(r,i,t,[r.value])}function tO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Qo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!RE(n)?n:e.get(n):r}function ja(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=jo(e);return n.children.forEach(s=>{nO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ha(a,t.getContext(s),i)),i}function nO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=rO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new id(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ja(n,e,a?a.children:null,r,i):ja(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $o(a.outlet.component,s))}else s&&Ha(e,a,i),i.canActivateChecks.push(new id(r)),o.component?ja(n,null,a?a.children:null,r,i):ja(n,null,t,r,i);return i}function rO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ti(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ti(n.url,e.url)||!An(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dm(n,e)||!An(n.queryParams,e.queryParams);case"paramsChange":default:return!Dm(n,e)}}function Ha(n,e,t){let r=jo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ha(s,e.children.getContext(o),t):Ha(s,null,t):Ha(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new $o(e.outlet.component,i)):t.canDeactivateChecks.push(new $o(null,i)):t.canDeactivateChecks.push(new $o(null,i))}function nc(n){return typeof n=="function"}function iO(n){return typeof n=="boolean"}function oO(n){return n&&nc(n.canLoad)}function sO(n){return n&&nc(n.canActivate)}function aO(n){return n&&nc(n.canActivateChild)}function cO(n){return n&&nc(n.canDeactivate)}function uO(n){return n&&nc(n.canMatch)}function $0(n){return n instanceof Hn||n?.name==="EmptyError"}var ql=Symbol("INITIAL_VALUE");function Ko(){return $e(n=>da(n.map(e=>e.pipe(qn(1),di(ql)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===ql)return ql;if(t===!1||lO(t))return t}return!0}),ut(e=>e!==ql),qn(1)))}function lO(n){return qa(n)||n instanceof Qa}function dO(n,e){return Qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(xe(V({},t),{guardsResult:!0})):hO(s,r,i,n).pipe(Qe(a=>a&&iO(a)?fO(r,o,n,e):ee(a)),G(a=>xe(V({},t),{guardsResult:a})))})}function hO(n,e,t,r){return Ie(n).pipe(Qe(i=>vO(i.component,i.route,t,e,r)),Gt(i=>i!==!0,!0))}function fO(n,e,t,r){return Ie(e).pipe(ui(i=>yo(gO(i.route.parent,r),pO(i.route,r),yO(n,i.path,t),mO(n,i.route,t))),Gt(i=>i!==!0,!0))}function pO(n,e){return n!==null&&e&&e(new vm(n)),ee(!0)}function gO(n,e){return n!==null&&e&&e(new mm(n)),ee(!0)}function mO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>ku(()=>{let s=ec(e)??t,a=Qo(o,s),u=sO(a)?a.canActivate(e,n):Tn(s,()=>a(e,n));return Pr(u).pipe(Gt())}));return ee(i).pipe(Ko())}function yO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tO(s)).filter(s=>s!==null).map(s=>ku(()=>{let a=s.guards.map(u=>{let l=ec(s.node)??t,h=Qo(u,l),p=aO(h)?h.canActivateChild(r,n):Tn(l,()=>h(r,n));return Pr(p).pipe(Gt())});return ee(a).pipe(Ko())}));return ee(o).pipe(Ko())}function vO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=ec(e)??i,l=Qo(a,u),h=cO(l)?l.canDeactivate(n,e,t,r):Tn(u,()=>l(n,e,t,r));return Pr(h).pipe(Gt())});return ee(s).pipe(Ko())}function _O(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Qo(s,n),u=oO(a)?a.canLoad(e,t):Tn(n,()=>a(e,t));return Pr(u)});return ee(o).pipe(Ko(),H0(r))}function H0(n){return zf(et(e=>{if(typeof e!="boolean")throw rd(n,e)}),G(e=>e===!0))}function wO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Qo(s,n),u=uO(a)?a.canMatch(e,t):Tn(n,()=>a(e,t));return Pr(u)});return ee(o).pipe(Ko(),H0(r))}var Ya=class{constructor(e){this.segmentGroup=e||null}},Za=class extends Error{constructor(e){super(),this.urlTree=e}};function Vo(n){return mo(new Ya(n))}function IO(n){return mo(new Z(4e3,!1))}function EO(n){return mo(B0(!1,$t.GuardRejected))}var bm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ce])return IO(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:R}=i,N=Tn(o,()=>a({params:v,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof er)throw new Za(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Za(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new er(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function DO(n,e,t,r,i){let o=q0(n,e,t);return o.matched?(r=zk(e,r),wO(r,e,t,i).pipe(G(s=>s===!0?o:V({},Sm)))):ee(o)}function q0(n,e,t){if(e.path==="**")return CO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Sm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_k)(t,n,e);if(!i)return V({},Sm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function CO(n){return{matched:!0,parameters:n.length>0?D0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function y0(n,e,t,r){return t.length>0&&SO(n,t,r)?{segmentGroup:new Ee(e,bO(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&AO(n,t,r)?{segmentGroup:new Ee(n.segments,TO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function TO(n,e,t,r){let i={};for(let o of t)if(cd(n,e,o)&&!r[hn(o)]){let s=new Ee([],{});i[hn(o)]=s}return V(V({},r),i)}function bO(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&hn(r)!==ce){let i=new Ee([],{});t[hn(r)]=i}return t}function SO(n,e,t){return t.some(r=>cd(n,e,r)&&hn(r)!==ce)}function AO(n,e,t){return t.some(r=>cd(n,e,r))}function cd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function xO(n,e,t){return e.length===0&&!n.children[t]}var Am=class{};function MO(n,e,t,r,i,o,s="emptyOnly"){return new xm(n,e,t,r,i,s,o).recognize()}var RO=31,xm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=y0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ut(r,t),o=new nd("",i),s=Vk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Uo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(G(r=>({children:r,rootSnapshot:t})),vr(r=>{if(r instanceof Za)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ya?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ut?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(ui(s=>{let a=r.children[s],u=Gk(t,s);return this.processSegmentGroup(e,u,a,s,i)}),li((s,a)=>(s.push(...a),s)),_r(null),tp(),Qe(s=>{if(s===null)return Vo(r);let a=z0(s);return NO(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(ui(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(vr(l=>{if(l instanceof Ya)return ee(null);throw l}))),Gt(u=>!!u),vr(u=>{if($0(u))return xO(r,i,o)?ee(new Am):Vo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return hn(r)!==s&&(s===ce||!cd(i,o,r))?Vo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Vo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=q0(t,i,o);if(!u)return Vo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>RO&&(this.allowRedirects=!1));let v=new Uo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,v0(i),hn(i),i.component??i._loadedComponent??null,i,_0(i)),b=td(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Qe(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=DO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,b=new Uo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,v0(r),hn(r),r.component??r._loadedComponent??null,r,_0(r)),R=td(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(R.params),b.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:B}=y0(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ut(b,F)));if(l.length===0&&B.length===0)return ee(new Ut(b,[]));let q=hn(r)===o;return this.processSegment(h,l,N,B,q?ce:o,!0,b).pipe(G(F=>new Ut(b,F instanceof Ut?[F]:[])))}))):Vo(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):_O(e,t,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,t).pipe(et(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):EO(t))):ee({routes:[],injector:e})}};function NO(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function PO(n){let e=n.value.routeConfig;return e&&e.path===""}function z0(n){let e=[],t=new Set;for(let r of n){if(!PO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=z0(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!t.has(r))}function v0(n){return n.data||{}}function _0(n){return n.resolve||{}}function kO(n,e,t,r,i,o){return Qe(s=>MO(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:u})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function OO(n,e){return Qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of G0(u))s.add(l);let a=0;return Ie(s).pipe(ui(u=>o.has(u)?FO(u,r,n,e):(u.data=td(u,u.parent,n).resolve,ee(void 0))),et(()=>a++),vo(1),Qe(u=>a===s.size?ee(t):It))})}function G0(n){let e=n.children.map(t=>G0(t)).flat();return[n,...e]}function FO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!V0(i)&&(o[Ja]=i.title),LO(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=td(n,n.parent,t).resolve,null)))}function LO(n,e,t,r){let i=sm(n);if(i.length===0)return ee({});let o={};return Ie(i).pipe(Qe(s=>VO(n[s],e,t,r).pipe(Gt(),et(a=>{if(a instanceof Qa)throw rd(new qo,a);o[s]=a}))),vo(1),Xf(o),vr(s=>$0(s)?It:mo(s)))}function VO(n,e,t,r){let i=ec(e)??r,o=Qo(n,i),s=o.resolve?o.resolve(e,t):Tn(i,()=>o(e,t));return Pr(s)}function im(n){return $e(e=>{let t=n(e);return t?Ie(t).pipe(G(()=>e)):ee(e)})}var W0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[Ja]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(jO),providedIn:"root"})}}return n})(),jO=(()=>{class n extends W0{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(l0))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rc=new W("",{providedIn:"root",factory:()=>({})}),BO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["ng-component"]],standalone:!0,features:[MC],decls:1,vars:0,template:function(r,i){r&1&&Bt(0,"router-outlet")},dependencies:[Kk],encapsulation:2})}}return n})();function Nm(n){let e=n.children&&n.children.map(Nm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=BO),t}var od=new W(""),Pm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Vl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pr(t.loadComponent()).pipe(G(K0),et(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ha(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new qe).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=UO(r,this.compiler,t,this.onLoadEndListener).pipe(ha(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new qe).pipe(lo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UO(n,e,t,r){return Pr(n.loadChildren()).pipe(G(K0),Qe(i=>i instanceof Da||Array.isArray(i)?ee(i):Ie(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(od,[],{optional:!0,self:!0}).flat()),{routes:s.map(Nm),injector:o}}))}function $O(n){return n&&typeof n=="object"&&"default"in n}function K0(n){return $O(n)?n.default:n}var km=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(HO),providedIn:"root"})}}return n})(),HO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Q0=new W(""),Y0=new W("");function qO(n,e,t){let r=n.get(Y0),i=n.get(Nt);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),zO(n))),{onViewTransitionCreated:u}=r;return u&&Tn(n,()=>u({transition:a,from:e,to:t})),s})}function zO(n){return new Promise(e=>{Mg({read:()=>setTimeout(e)},{injector:n})})}var GO=new W(""),Om=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=j(Pm),this.environmentInjector=j(jt),this.urlSerializer=j(Xa),this.rootContexts=j(tc),this.location=j(Lo),this.inputBindingEnabled=j(ad,{optional:!0})!==null,this.titleStrategy=j(W0),this.options=j(rc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(km),this.createViewTransition=j(Q0,{optional:!0}),this.navigationErrorHandler=j(GO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let t=i=>this.events.next(new pm(i)),r=i=>this.events.next(new gm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$a,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),G(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let s=!1,a=!1;return ee(o).pipe($e(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),It;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Yl.IgnoredSameUrlNavigation)),u.resolve(!1),It}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ee(u).pipe($e(p=>{let m=this.transitions?.getValue();return this.events.next(new zo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?It:Promise.resolve(p)}),kO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),et(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Zl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:R}=u,N=new zo(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=F0(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:xe(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(o)}else{let p="";return this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Yl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),It}}),et(u=>{let l=new lm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),G(u=>(this.currentTransition=o=xe(V({},u),{guards:eO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),dO(this.environmentInjector,u=>this.events.next(u)),et(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw rd(this.urlSerializer,u.guardsResult);let l=new dm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",$t.GuardRejected),!1)),im(u=>{if(u.guards.canActivateChecks.length)return ee(u).pipe(et(l=>{let h=new hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),$e(l=>{let h=!1;return ee(l).pipe(OO(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",$t.NoDataFromResolver)}}))}),et(l=>{let h=new fm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),im(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(et(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return da(l(u.targetSnapshot.root)).pipe(_r(null),qn(1))}),im(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ie(h).pipe(G(()=>o)):ee(o)}),G(u=>{let l=Qk(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=xe(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),et(()=>{this.events.next(new Wa)}),Xk(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),qn(1),et({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),rp(this.transitionAbortSubject.pipe(et(u=>{throw u}))),ha(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(u=>{if(a=!0,U0(u))this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Jk(u)?this.events.next(new Go(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ga(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Tn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Qa){let{message:p,cancellationCode:m}=rd(this.urlSerializer,h);this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Go(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return It}))}))}cancelNavigationTransition(t,r,i){let o=new Xn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function WO(n){return n!==$a}var KO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(QO),providedIn:"root"})}}return n})(),Mm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},QO=(()=>{class n extends Mm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Z0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(YO),providedIn:"root"})}}return n})(),YO=(()=>{class n extends Z0{constructor(){super(...arguments),this.location=j(Lo),this.urlSerializer=j(Xa),this.options=j(rc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=F0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof zo)this.stateMemento=this.createStateMemento();else if(t instanceof Nr)this.rawUrlTree=r.initialUrl;else if(t instanceof Zl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Wa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Xn&&(t.code===$t.GuardRejected||t.code===$t.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ga?this.restoreHistory(r,!0):t instanceof tr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof er?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=hg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ba=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ba||{});function J0(n,e){n.events.pipe(ut(t=>t instanceof tr||t instanceof Xn||t instanceof Ga||t instanceof Nr),G(t=>t instanceof tr||t instanceof Nr?Ba.COMPLETE:(t instanceof Xn?t.code===$t.Redirect||t.code===$t.SupersededByNewNavigation:!1)?Ba.REDIRECTING:Ba.FAILED),ut(t=>t!==Ba.REDIRECTING),qn(1)).subscribe(()=>{e()})}function ZO(n){throw n}var JO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(kl),this.stateManager=j(Z0),this.options=j(rc,{optional:!0})||{},this.pendingTasks=j(Fo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Om),this.urlSerializer=j(Xa),this.location=j(Lo),this.urlHandlingStrategy=j(km),this._events=new qe,this.errorHandler=this.options.errorHandler||ZO,this.navigated=!1,this.routeReuseStrategy=j(KO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(od,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(ad,{optional:!0}),this.eventsSubscription=new Ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Xn&&r.code!==$t.Redirect&&r.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof Go){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||WO(i.source)},s);this.scheduleNavigation(a,$a,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}tF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$a,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Nm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=N0(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return P0(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$a,null,r)}navigate(t,r={skipLocationChange:!1}){return eF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},JO):r===!1?i=V({},XO):i=r,qa(t))return h0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return h0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return J0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function tF(n){return!(n instanceof Wa)&&!(n instanceof Go)}var sd=class{};var nF=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof tr),ui(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Pl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(yr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(Qe(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ie([o,s]).pipe(yr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(bi),O(Vl),O(jt),O(sd),O(Pm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),X0=new W(""),rF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nr&&t.code===Yl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Jl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){rC()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function iF(n){return n.routerState.root}function ic(n,e){return{\u0275kind:n,\u0275providers:e}}function oF(){let n=j(Zt);return e=>{let t=n.get(Rr);if(e!==t.components[0])return;let r=n.get(bi),i=n.get(eT);n.get(Fm)===1&&r.initialNavigation(),n.get(tT,null,le.Optional)?.setUpPreloading(),n.get(X0,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var eT=new W("",{factory:()=>new qe}),Fm=new W("",{providedIn:"root",factory:()=>1});function sF(){return ic(2,[{provide:Fm,useValue:0},{provide:Ll,multi:!0,deps:[Zt],useFactory:e=>{let t=e.get(KC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(bi),o=e.get(eT);J0(i,()=>{r(!0)}),e.get(Om).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))}}])}function aF(){return ic(3,[{provide:Ll,multi:!0,useFactory:()=>{let e=j(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:Fm,useValue:2}])}var tT=new W("");function cF(n){return ic(0,[{provide:tT,useExisting:nF},{provide:sd,useExisting:n}])}function uF(){return ic(8,[m0,{provide:ad,useExisting:m0}])}function lF(n){let e=[{provide:Q0,useValue:qO},{provide:Y0,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return ic(9,e)}var w0=new W("ROUTER_FORROOT_GUARD"),dF=[Lo,{provide:Xa,useClass:qo},bi,tc,{provide:Wo,useFactory:iF,deps:[bi]},Pm,[]],Lm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dF,[],{provide:od,multi:!0,useValue:t},{provide:w0,useFactory:gF,deps:[[bi,new vi,new vl]]},{provide:rc,useValue:r||{}},r?.useHash?fF():pF(),hF(),r?.preloadingStrategy?cF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?mF(r):[],r?.bindToComponentInputs?uF().\u0275providers:[],r?.enableViewTransitions?lF().\u0275providers:[],yF()]}}static forChild(t){return{ngModule:n,providers:[{provide:od,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(w0,8))}}static{this.\u0275mod=Tt({type:n})}static{this.\u0275inj=Ct({})}}return n})();function hF(){return{provide:X0,useFactory:()=>{let n=j(e0),e=j(me),t=j(rc),r=j(Om),i=j(Xa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new rF(i,r,n,e,t)}}}function fF(){return{provide:Ei,useClass:YC}}function pF(){return{provide:Ei,useClass:zg}}function gF(n){return"guarded"}function mF(n){return[n.initialNavigation==="disabled"?aF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?sF().\u0275providers:[]]}var I0=new W("");function yF(){return[{provide:I0,useFactory:oF},{provide:kg,multi:!0,useExisting:I0}]}var vF=[],ud=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Tt({type:n});static \u0275inj=Ct({imports:[Lm.forRoot(vF),Lm]})};var ld=class{id;name="Jeshua Benitez";goalLife="goal";photoUrl="photo";email="jesuaeder.moshi2004@gmail.com";phoneNumber="272-165-6576";location="Orizaba, VEracruz";socialNetwork="@Jeshua Benitez"};var _F="firebase",wF="10.14.1";mr(_F,wF,"app");var oc=new Ar("ANGULARFIRE2_VERSION");var IF=(n,e)=>{let t=e?[e]:gI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Si=class{constructor(){return IF(EF)}},EF="app-check";function Vm(){}var dd=class{zone;delegate;constructor(e,t=Qf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},jm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vm,{},Vm,Vm)),t.pipe(et({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dd(Zone.current)),this.insideAngular=t.run(()=>new dd(Zone.current,la)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(me))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Pt(n){return CF(DF())(n)}function CF(n){return function(t){return t=t.lift(new jm(n.ngZone)),t.pipe(sn(n.outsideAngular),zt(n.insideAngular))}}var SF=new Map,AF={activated:!1,tokenObservers:[]},xF={initialized:!1,enabled:!1};function fn(n){return SF.get(n)||Object.assign({},AF)}function aT(){return xF}var MF="https://content-firebaseappcheck.googleapis.com/v1";var RF="exchangeDebugToken",rT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},m9=24*60*60*1e3;var Um=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new Af,this.pending.promise.catch(t=>{}),yield NF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Af,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function NF(n){return new Promise(e=>{setTimeout(e,n)})}var PF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kr=new fI("appCheck","AppCheck",PF);function cT(n){if(!fn(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function uT(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw kr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw kr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw kr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function lT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${MF}/projects/${t}/apps/${r}:${RF}?key=${i}`,body:{debug_token:e}}}var kF="firebase-app-check-database",OF=1,$m="firebase-app-check-store";var fd=null;function FF(){return fd||(fd=new Promise((n,e)=>{try{let t=indexedDB.open(kF,OF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(kr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore($m,{keyPath:"compositeKey"})}}}catch(t){e(kr.create("storage-open",{originalErrorMessage:t?.message}))}}),fd)}function LF(n,e){return VF(jF(n),e)}function VF(n,e){return M(this,null,function*(){let r=(yield FF()).transaction($m,"readwrite"),o=r.objectStore($m).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(kr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function jF(n){return`${n.options.appId}-${n.name}`}var Hm=new pu("@firebase/app-check");function Bm(n,e){return fu()?LF(n,e).catch(t=>{Hm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dT(){return aT().enabled}function hT(){return M(this,null,function*(){let n=aT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BF={error:"UNKNOWN_ERROR"};function UF(n){return lI.encodeString(JSON.stringify(n),!1)}function qm(n,e=!1){return M(this,null,function*(){let t=n.app;cT(t);let r=fn(t),i=r.token,o;if(i&&!sc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(sc(u)?i=u:yield Bm(t,void 0))}if(!e&&i&&sc(i))return{token:i.token};let s=!1;if(dT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uT(lT(t,yield hT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Bm(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield fn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Hm.warn(u.message):Hm.error(u),o=u}let a;return i?o?sc(i)?a={token:i.token,internalError:o}:a=oT(o):(a={token:i.token},r.token=i,yield Bm(t,i)):a=oT(o),s&&zF(t,a),a})}function $F(n){return M(this,null,function*(){let e=n.app;cT(e);let{provider:t}=fn(e);if(dT()){let r=yield hT(),{token:i}=yield uT(lT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function HF(n,e,t,r){let{app:i}=n,o=fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),iT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>iT(n))}function fT(n,e){let t=fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function iT(n){let{app:e}=n,t=fn(e),r=t.tokenRefresher;r||(r=qF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qF(n){let{app:e}=n;return new Um(()=>M(this,null,function*(){let t=fn(e),r;if(t.token?r=yield qm(n,!0):r=yield qm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rT.RETRIAL_MIN_WAIT,rT.RETRIAL_MAX_WAIT)}function zF(n,e){let t=fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function sc(n){return n.expireTimeMillis-Date.now()>0}function oT(n){return{token:UF(BF),error:n}}var zm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fn(this.app);for(let t of e)fT(this.app,t.next);return Promise.resolve()}};function GF(n,e){return new zm(n,e)}function WF(n){return{getToken:e=>qm(n,e),getLimitedUseToken:()=>$F(n),addTokenListener:e=>HF(n,"INTERNAL",e),removeTokenListener:e=>fT(n.app,e)}}var KF="@firebase/app-check",QF="0.8.8";var YF="app-check",sT="app-check-internal";function ZF(){sa(new oi(YF,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return GF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sT).initialize()})),sa(new oi(sT,n=>{let e=n.getProvider("app-check").getImmediate();return WF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mr(KF,QF)}ZF();var JF=["localhost","0.0.0.0","127.0.0.1"],A9=typeof window<"u"&&JF.includes(window.location.hostname);var XF="firebase",eL="10.14.1";Lt.registerVersion(XF,eL,"app-compat");var tL=["ngOnDestroy"],mT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var pd=class{constructor(e){return e}},Yo=new W("angularfire2.app.options"),Zo=new W("angularfire2.app.name");function ac(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Lt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new pd(s)}var nL=(n,...e)=>{Lg()&&typeof console<"u"&&console[n](...e)},rL={provide:pd,useFactory:ac,deps:[Yo,me,[new vi,Zo]]},yT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Yo,useValue:t},{provide:Zo,useValue:r}]}}constructor(t){Lt.registerVersion("angularfire",oc.full,"core"),Lt.registerVersion("angularfire",oc.full,"app-compat"),Lt.registerVersion("angular",NC.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Rt))};static \u0275mod=Tt({type:n});static \u0275inj=Ct({providers:[rL]})}return n})();function gd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return iL(i,s)||(gT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${oL?" You may need to reload as Firebase is not HMR aware.":""}`),gT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function iL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var oL=typeof module<"u"&&!!module.hot,gT=(n,...e)=>{Lg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Gm=new W("angularfire2.auth.use-emulator"),Wm=new W("angularfire2.auth.settings"),Km=new W("angularfire2.auth.tenant-id"),Qm=new W("angularfire2.auth.langugage-code"),Ym=new W("angularfire2.auth.use-device-language"),Zm=new W("angularfire.auth.persistence"),Jm=(n,e,t,r,i,o,s,a)=>gd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),vT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,v){let b=new qe,R=ee(void 0).pipe(zt(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-3GWKGN6G.js"))),G(()=>ac(t,o,r)),G(N=>Jm(N,o,a,l,h,p,u,m)),Fu({bufferSize:1,refCount:!1}));if(Di(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{R.pipe(Gt()).subscribe();let N=R.pipe($e(F=>F.getRedirectResult().then(J=>J,()=>null)),Pt,Fu({bufferSize:1,refCount:!1})),B=R.pipe($e(F=>new fe(J=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ne=>J.next(ne),ne=>J.error(ne),()=>J.complete()))})))),q=R.pipe($e(F=>new fe(J=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ne=>J.next(ne),ne=>J.error(ne),()=>J.complete()))}))));this.authState=N.pipe(Lu(B),sn(s.outsideAngular),zt(s.insideAngular)),this.user=N.pipe(Lu(q),sn(s.outsideAngular),zt(s.insideAngular)),this.idToken=this.user.pipe($e(F=>F?Ie(F.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe($e(F=>F?Ie(F.getIdTokenResult()):ee(null))),this.credential=Jf(N,b,this.authState.pipe(ut(F=>!F))).pipe(G(F=>F?.user?F:null),sn(s.outsideAngular),zt(s.insideAngular))}return mT(this,R,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Yo),O(Zo,8),O(Rt),O(me),O(hd),O(Gm,8),O(Wm,8),O(Km,8),O(Qm,8),O(Ym,8),O(Zm,8),O(Si,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var _T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wT={};var Or,Xm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),jn=2;jn<arguments.length;jn++)_[jn-2]=arguments[jn];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(R(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=J(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=B(this,I),R(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(R(this))return R(I)?N(this).j(N(I)):N(N(this).j(I));if(R(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,jn=I.i(D)>>>16,Bs=I.i(D)&65535;w[2*E+2*D]+=_*Bs,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Bs,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*jn,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*jn,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function J(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(R(I))return y=J(N(I),y),new F(N(y.g),N(y.h));if(R(y))return y=J(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ne(w),E=ne(E);var D=X(w,1),T=X(E,1);for(E=X(E,2),w=X(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=X(E,1),w=X(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);R(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return J(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ne(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function X(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xm=wT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Or=wT.Integer=s}).apply(typeof _T<"u"?_T:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var ey,aL,Jo,ty,cc,yd,ny,ry,iy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return d.prototype[C].apply(g,L)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let L=0;L<A;L++)c[C+L]=g[L]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var ne=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=tf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class jn{constructor(){this.h=this.g=null}add(d,f){let g=Bs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Bs=new B(()=>new ex,c=>c.reset());class ex{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Us,$s=!1,tf=new jn,sw=()=>{let c=a.Promise.resolve(void 0);Us=()=>{c.then(tx)}};var tx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Bs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}$s=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var nx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Hs(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ne){e:{try{J(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:rx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Hs.aa.h.call(this)}}b(Hs,ht);var rx={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qs="closure_listenable_"+(1e6*Math.random()|0),ix=0;function ox(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++ix,this.da=this.fa=!1}function Qc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Yc(c){this.src=c,this.g={},this.h=0}Yc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=rf(c,d,g,C);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new ox(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function nf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Qc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function rf(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var of="closure_lm_"+(1e6*Math.random()|0),sf={};function aw(c,d,f,g,C){if(g&&g.once)return uw(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)aw(c,d[A],f,g,C);return null}return f=lf(f),c&&c[qs]?c.K(d,f,l(g)?!!g.capture:!!g,C):cw(c,d,f,!1,g,C)}function cw(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,be=cf(c);if(be||(c[of]=be=new Yc(c)),f=be.add(d,f,g,L,A),f.proxy)return f;if(g=sx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)nx||(C=L),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(dw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sx(){function c(f){return d.call(c.src,c.listener,f)}let d=ax;return c}function uw(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)uw(c,d[A],f,g,C);return null}return f=lf(f),c&&c[qs]?c.L(d,f,l(g)?!!g.capture:!!g,C):cw(c,d,f,!0,g,C)}function lw(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)lw(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=lf(f),c&&c[qs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=rf(A,f,g,C),-1<f&&(Qc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=cf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=rf(d,f,g,C)),(f=-1<c?d[c]:null)&&af(f))}function af(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[qs])nf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(dw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=cf(d))?(nf(f,c),f.h==0&&(f.src=null,d[of]=null)):Qc(c)}}}function dw(c){return c in sf?sf[c]:sf[c]="on"+c}function ax(c,d){if(c.da)c=!0;else{d=new Hs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&af(c),c=f.call(g,d)}return c}function cf(c){return c=c[of],c instanceof Yc?c:null}var uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function lf(c){return typeof c=="function"?c:(c[uf]||(c[uf]=function(d){return c.handleEvent(d)}),c[uf])}function ft(){hr.call(this),this.i=new Yc(this),this.M=this,this.F=null}b(ft,hr),ft.prototype[qs]=!0,ft.prototype.removeEventListener=function(c,d,f,g){lw(this,c,d,f,g)};function vt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var C=d;d=new ht(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Zc(L,g,!0,d)&&C}if(L=d.g=c,C=Zc(L,g,!0,d)&&C,C=Zc(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Zc(L,g,!1,d)&&C}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Qc(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var be=L.listener,at=L.ha||L.src;L.fa&&nf(c.i,L),C=be.call(at,g)!==!1&&C}}return C&&!g.defaultPrevented}function hw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function fw(c){c.g=hw(()=>{c.g=null,c.i&&(c.i=!1,fw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class cx extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:fw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(c){hr.call(this),this.h=c,this.g={}}b(zs,hr);var pw=[];function gw(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&af(d)},c),c.g={}}zs.prototype.N=function(){zs.aa.N.call(this),gw(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var df=a.JSON.stringify,ux=a.JSON.parse,lx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hf(){}hf.prototype.h=null;function mw(c){return c.h||(c.h=c.i())}function yw(){}var Gs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ff(){ht.call(this,"d")}b(ff,ht);function pf(){ht.call(this,"c")}b(pf,ht);var ti={},vw=null;function Jc(){return vw=vw||new ft}ti.La="serverreachability";function _w(c){ht.call(this,ti.La,c)}b(_w,ht);function Ws(c){let d=Jc();vt(d,new _w(d))}ti.STAT_EVENT="statevent";function ww(c,d){ht.call(this,ti.STAT_EVENT,c),this.stat=d}b(ww,ht);function _t(c){let d=Jc();vt(d,new ww(d,c))}ti.Ma="timingevent";function Iw(c,d){ht.call(this,ti.Ma,c),this.size=d}b(Iw,ht);function Ks(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Qs(){this.g=!0}Qs.prototype.xa=function(){this.g=!1};function dx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var L="",be=A.split("&"),at=0;at<be.length;at++){var we=be[at].split("=");if(1<we.length){var pt=we[0];we=we[1];var gt=pt.split("_");L=2<=gt.length&&gt[1]=="type"?L+(pt+"="+we+"&"):L+(pt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function hx(c,d,f,g,C,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function no(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+px(c,f)+(g?" "+g:"")})}function fx(c,d){c.info(function(){return"TIMEOUT: "+d})}Qs.prototype.info=function(){};function px(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return df(f)}catch{return d}}var Xc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ew={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gf;function eu(){}b(eu,hf),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},gf=new eu;function fr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dw}function Dw(){this.i=null,this.g="",this.h=!1}var Cw={},mf={};function yf(c,d,f){c.L=1,c.v=iu(Bn(d)),c.m=f,c.P=!0,Tw(c,null)}function Tw(c,d){c.F=Date.now(),tu(c),c.A=Bn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),jw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Dw,c.g=rI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new cx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(pw[0]=C.toString()),C=pw);for(var A=0;A<C.length;A++){var L=aw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ws(),dx(c.i,c.u,c.A,c.l,c.R,c.m)}fr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Un(c)==3?d.j():this.Y(c)},fr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=Un(this.g);var d=this.g.Ba();let oo=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Gw(this.g)))){this.J||gt!=4||d==7||(d==8||0>=oo?Ws(3):Ws(2)),vf(this);var f=this.g.Z();this.X=f;t:if(bw(this)){var g=Gw(this.g);c="";var C=g.length,A=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Ys(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,hx(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,at=this.g;if((be=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(be)){var we=be;break t}}we=null}if(f=we)no(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_f(this,f);else{this.o=!1,this.s=3,_t(12),ni(this),Ys(this);break e}}if(this.P){f=!0;let rn;for(;!this.J&&this.C<L.length;)if(rn=gx(this,L),rn==mf){gt==4&&(this.s=4,_t(14),f=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Cw){this.s=4,_t(15),no(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else no(this.i,this.l,rn,null),_f(this,rn);if(bw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||L.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)no(this.i,this.l,L,"[Invalid Chunked Response]"),ni(this),Ys(this);else if(0<L.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Tf(pt),pt.M=!0,_t(11))}}else no(this.i,this.l,L,null),_f(this,L);gt==4&&ni(this),this.o&&!this.J&&(gt==4?Xw(this.j,this):(this.o=!1,tu(this)))}else Nx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),ni(this),Ys(this)}}}catch{}finally{}};function bw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?mf:(f=Number(d.substring(f,g)),isNaN(f)?Cw:(g+=1,g+f>d.length?mf:(d=d.slice(g,g+f),c.C=g+f,d)))}fr.prototype.cancel=function(){this.J=!0,ni(this)};function tu(c){c.S=Date.now()+c.I,Sw(c,c.I)}function Sw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ks(m(c.ba,c),d)}function vf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(fx(this.i,this.A),this.L!=2&&(Ws(),_t(17)),ni(this),this.s=2,Ys(this)):Sw(this,this.S-c)};function Ys(c){c.j.G==0||c.J||Xw(c.j,c)}function ni(c){vf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,gw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function _f(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||wf(f.h,c))){if(!c.K&&wf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)uu(f),au(f);else break e;Cf(f),_t(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ks(m(f.Za,f),6e3));if(1>=Mw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((c.K||f.g==c)&&uu(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let pt=we[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=we[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let oo=we[5];oo!=null&&typeof oo=="number"&&0<oo&&(g=1.5*oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let rn=c.g;if(rn){let du=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(du){var A=g.h;A.g||du.indexOf("spdy")==-1&&du.indexOf("quic")==-1&&du.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(If(A,A.h),A.h=null))}if(g.D){let bf=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;bf&&(g.ya=bf,Re(g.I,g.D,bf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=nI(g,g.J?g.ia:null,g.W),L.K){Rw(g.h,L);var be=L,at=g.L;at&&(be.I=at),be.B&&(vf(be),tu(be)),g.g=L}else Zw(g);0<f.i.length&&cu(f)}else we[0]!="stop"&&we[0]!="close"||ii(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ii(f,7):Df(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Ws(4)}catch{}}var mx=class{constructor(c,d){this.g=c,this.map=d}};function Aw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Mw(c){return c.h?1:c.g?c.g.size:0}function wf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function If(c,d){c.g?c.g.add(d):c.h=d}function Rw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Aw.prototype.cancel=function(){if(this.i=Nw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Nw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function yx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function vx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Pw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=vx(c),g=yx(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var kw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _x(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,nu(this,c.j),this.o=c.o,this.g=c.g,ru(this,c.s),this.l=c.l;var d=c.i,f=new Xs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ow(this,f),this.m=c.m}else c&&(d=String(c).match(kw))?(this.h=!1,nu(this,d[1]||"",!0),this.o=Zs(d[2]||""),this.g=Zs(d[3]||"",!0),ru(this,d[4]),this.l=Zs(d[5]||"",!0),Ow(this,d[6]||"",!0),this.m=Zs(d[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Js(d,Fw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Js(d,Fw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Js(f,f.charAt(0)=="/"?Ex:Ix,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Js(f,Cx)),c.join("")};function Bn(c){return new ri(c)}function nu(c,d,f){c.j=f?Zs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ru(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ow(c,d,f){d instanceof Xs?(c.i=d,Tx(c.i,c.h)):(f||(d=Js(d,Dx)),c.i=new Xs(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function iu(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Zs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Js(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,wx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function wx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Fw=/[#\/\?@]/g,Ix=/[#\?:]/g,Ex=/[#\?]/g,Dx=/[#\?@]/g,Cx=/#/g;function Xs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pr(c){c.g||(c.g=new Map,c.h=0,c.i&&_x(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Xs.prototype,n.add=function(c,d){pr(this),this.i=null,c=ro(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Lw(c,d){pr(c),d=ro(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Vw(c,d){return pr(c),d=ro(c,d),c.g.has(d)}n.forEach=function(c,d){pr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){pr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){pr(this);let d=[];if(typeof c=="string")Vw(this,c)&&(d=d.concat(this.g.get(ro(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return pr(this),this.i=null,c=ro(this,c),Vw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function jw(c,d,f){Lw(c,d),0<f.length&&(c.i=null,c.g.set(ro(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),c.push(C)}}return this.i=c.join("&")};function ro(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Tx(c,d){d&&!c.j&&(pr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Lw(this,g),jw(this,C,f))},c)),c.j=d}function bx(c,d){let f=new Qs;if(a.Image){let g=new Image;g.onload=v(gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(gr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Sx(c,d){let f=new Qs,g=new AbortController,C=setTimeout(()=>{g.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),gr(f,"TestPingServer: error",!1,d)})}function gr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Ax(){this.g=new lx}function xx(c,d,f){let g=f||"";try{Pw(c,function(C,A){let L=C;l(C)&&(L=df(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ea(c){this.l=c.Ub||null,this.j=c.eb||!1}b(ea,hf),ea.prototype.g=function(){return new ou(this.l,this.j)},ea.prototype.i=function(c){return function(){return c}}({});function ou(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ou,ft),n=ou.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,na(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ta(this):na(this),this.readyState==3&&Bw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ta(this))},n.Qa=function(c){this.g&&(this.response=c,ta(this))},n.ga=function(){this.g&&ta(this)};function ta(c){c.readyState=4,c.l=null,c.j=null,c.v=null,na(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Uw(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Ef(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Uw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Be(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Be,ft);var Mx=/^https?$/i,Rx=["POST","PUT"];n=Be.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gf.g(),this.v=this.o?mw(this.o):mw(gf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){$w(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Rx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){$w(this,A)}};function $w(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Hw(c),su(c)}function Hw(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),su(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),su(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qw(this):this.bb())},n.bb=function(){qw(this)};function qw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)hw(c.Ea,0,c);else if(vt(c,"readystatechange"),Un(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(c.D).match(kw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Mx.test(C?C.toLowerCase():"")}f=g}if(f)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var A=2<Un(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Hw(c)}}finally{su(c)}}}}function su(c,d){if(c.g){zw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||vt(c,"ready");try{f.onreadystatechange=g}catch{}}}function zw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),ux(d)}};function Gw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nx(c){let d={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Ww(c){this.Aa=0,this.i=[],this.j=new Qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,c),this.cb=ra("retryDelaySeedMs",1e4,c),this.Wa=ra("forwardChannelMaxRetries",2,c),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Aw(c&&c.concurrentRequestLimit),this.Da=new Ax,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ww.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){_t(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=nI(this,null,this.W),cu(this)};function Df(c){if(Kw(c),c.G==3){var d=c.U++,f=Bn(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),ia(c,f),d=new fr(c,c.j,d),d.L=2,d.v=iu(Bn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=rI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),tu(d)}tI(c)}function au(c){c.g&&(Tf(c),c.g.cancel(),c.g=null)}function Kw(c){au(c),c.u&&(a.clearTimeout(c.u),c.u=null),uu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function cu(c){if(!xw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Us||sw(),$s||(Us(),$s=!0),tf.add(d,c),c.B=0}}function Px(c,d){return Mw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ks(m(c.Ga,c,d),eI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new fr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Yw(this,C,d),f=Bn(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),ia(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Uw(A)))+"&"+d:this.m&&Ef(f,this.m,A)),If(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,yf(C,f,null)):yf(C,f,d),this.G=2}}else this.G==3&&(c?Qw(this,c):this.i.length==0||xw(this.h)||Qw(this))};function Qw(c,d){var f;d?f=d.l:f=c.U++;let g=Bn(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),ia(c,g),c.m&&c.o&&Ef(g,c.m,c.o),f=new fr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Yw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),If(c.h,f),yf(f,g,d)}function ia(c,d){c.H&&X(c.H,function(f,g){Re(d,g,f)}),c.l&&Pw({},function(f,g){Re(d,g,f)})}function Yw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let be=!0;for(let at=0;at<f;at++){let we=C[at].g,pt=C[at].map;if(we-=A,0>we)A=Math.max(0,C[at].g-100),be=!1;else try{xx(pt,L,"req"+we+"_")}catch{g&&g(pt)}}if(be){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Zw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Us||sw(),$s||(Us(),$s=!0),tf.add(d,c),c.v=0}}function Cf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ks(m(c.Fa,c),eI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Jw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ks(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),au(this),Jw(this))};function Tf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Jw(c){c.g=new fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Bn(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),ia(c,d),c.m&&c.o&&Ef(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=iu(Bn(d)),f.m=null,f.P=!0,Tw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,au(this),Cf(this),_t(19))};function uu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Xw(c,d){var f=null;if(c.g==d){uu(c),Tf(c),c.g=null;var g=2}else if(wf(c.h,d))f=d.D,Rw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Jc(),vt(g,new Iw(g,f)),cu(c)}else Zw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Px(c,d)||g==2&&Cf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function eI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nu(g,"https"),iu(g),C?bx(g.toString(),f):Sx(g.toString(),f)}else _t(2);c.G=0,c.l&&c.l.sa(d),tI(c),Kw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function tI(c){if(c.G=0,c.ka=[],c.l){let d=Nw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function nI(c,d,f){var g=f instanceof ri?Bn(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),ru(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ri(null);g&&nu(A,g),d&&(A.g=d),C&&ru(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),ia(c,g),g}function rI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Be(new ea({eb:f})):new Be(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iI(){}n=iI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lu(){}lu.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){ft.call(this),this.g=new Ww(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new io(this)}b(Ft,ft),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Df(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=df(c),c=f);d.i.push(new mx(d.Ya++,c)),d.G==3&&cu(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Df(this.g),delete this.g,Ft.aa.N.call(this)};function oI(c){ff.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(oI,ff);function sI(){pf.call(this),this.status=1}b(sI,pf);function io(c){this.g=c}b(io,iI),io.prototype.ua=function(){vt(this.g,"a")},io.prototype.ta=function(c){vt(this.g,new oI(c))},io.prototype.sa=function(c){vt(this.g,new sI)},io.prototype.ra=function(){vt(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,iy=nr.createWebChannelTransport=function(){return new lu},ry=nr.getStatEventTarget=function(){return Jc()},ny=nr.Event=ti,yd=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xc.NO_ERROR=0,Xc.TIMEOUT=8,Xc.HTTP_ERROR=6,cc=nr.ErrorCode=Xc,Ew.COMPLETE="complete",ty=nr.EventType=Ew,yw.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Jo=nr.WebChannel=yw,aL=nr.FetchXmlHttpFactory=ea,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,ey=nr.XhrIo=Be}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});var IT="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var xs="10.14.0";var $r=new pu("@firebase/firestore");function rs(){return $r.logLevel}function Cb(n){$r.setLogLevel(n)}function k(n,...e){if($r.logLevel<=_n.DEBUG){let t=e.map(u_);$r.debug(`Firestore (${xs}): ${n}`,...t)}}function ze(n,...e){if($r.logLevel<=_n.ERROR){let t=e.map(u_);$r.error(`Firestore (${xs}): ${n}`,...t)}}function pn(n,...e){if($r.logLevel<=_n.WARN){let t=e.map(u_);$r.warn(`Firestore (${xs}): ${n}`,...t)}}function u_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: `+n;throw ze(e),new Error(e)}function Q(n,e){n||z()}function Tb(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends hI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ly=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},dy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},hy=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Q(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new Sd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new Je(e)}},fy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},py=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new fy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},my=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Q(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new gy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function cL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ad=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=cL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function hs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bb(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends xd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},uL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=class n extends xd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return uL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var fs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function yy(n){return n.fields.find(e=>e.kind===2)}function xi(n){return n.fields.filter(e=>e.kind!==2)}fs.UNKNOWN_ID=-1;var us=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var wc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,tn.min())}};function Sb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new tn(i,$.empty(),e)}function Ab(n){return new tn(n.readTime,n.key,-1)}var tn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),$.empty(),-1)}static max(){return new n(Y.max(),$.empty(),-1)}};function l_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var xb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Md=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(n){return M(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==xb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Rd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Oi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=d_(r.target.error);this.V.reject(new Oi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Oi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new _y(t)}},Hr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(oa())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Mi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fu())return!1;if(n.v())return!0;let e=oa(),t=n.S(e),r=0<t&&t<10,i=Mb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Oi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Oi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Rd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Mb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var vy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Mi(this.B.delete())}},Oi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Xr(n){return n.name==="IndexedDbTransactionError"}var _y=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Mi(this.store.add(e))}get(e){return Mi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Mi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Mi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=d_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new vy(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Mi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=d_(r.target.error);t(i)}})}var ET=!1;function d_(n){let e=Hr.S(oa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ET||(ET=!0,setTimeout(()=>{throw r},0)),r}}return n}var wy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Xr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Jr(t)}yield this.X(6e4)}))}},Iy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=Ab(o);l_(s,r)>0&&(r=s)}),new tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Ht=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Uc(n){return n==null}function Ic(n){return n===0&&1/n==-1/0}function Rb(n){return typeof n=="number"&&Number.isInteger(n)&&!Ic(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DT(e)),e=lL(n.get(t),e);return DT(e)}function lL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function DT(n){return n+""}function xn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var CT=["userId","batchId"];function Ed(n,e){return[n,bt(e)]}function Nb(n,e,t){return[n,bt(e),t]}var dL={},hL=["prefixPath","collectionGroup","readTime","documentId"],fL=["prefixPath","collectionGroup","documentId"],pL=["collectionGroup","readTime","prefixPath","documentId"],gL=["canonicalId","targetId"],mL=["targetId","path"],yL=["path","targetId"],vL=["collectionId","parent"],_L=["indexId","uid"],wL=["uid","sequenceNumber"],IL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EL=["indexId","uid","orderedDocumentKey"],DL=["userId","collectionPath","documentId"],CL=["userId","collectionPath","largestBatchId"],TL=["userId","collectionGroup","largestBatchId"],Pb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bL=[...Pb,"documentOverlays"],kb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ob=kb,h_=[...Ob,"indexConfiguration","indexState","indexEntries"],SL=h_,AL=[...h_,"globals"];var Ec=class extends Md{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=U(n);return Hr.F(t._e,e)}function TT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}},cs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nd(this.data.getIterator())}getIteratorFrom(e){return new Nd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Xo(n){return n.hasNext()?n.getNext():void 0}var qt=class n{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(Ge.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Lb(){return typeof atob<"u"}var Ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var xL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(n){if(Q(!!n),typeof n=="string"){let e=0,t=xL.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qr(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}function Ch(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function f_(n){let e=n.mapValue.fields.__previous_value__;return Ch(e)?f_(e):e}function Dc(n){let e=or(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var Ey=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},zr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dd={nullValue:"NULL_VALUE"};function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ch(n)?4:Vb(n)?9007199254740991:Th(n)?10:11:z()}function kn(n,e){if(n===e)return!0;let t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dc(n).isEqual(Dc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?Ic(s)===Ic(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return hs(n.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(TT(s)!==TT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!kn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Cc(n,e){return(n.values||[]).find(t=>kn(t,e))!==void 0}function Gr(n,e){if(n===e)return 0;let t=Fi(n),r=Fi(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return bT(n.timestampValue,e.timestampValue);case 4:return bT(Dc(n),Dc(e));case 5:return se(n.stringValue,e.stringValue);case 6:return function(o,s){let a=qr(o),u=qr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=se(a[l],u[l]);if(h!==0)return h}return se(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=se(Oe(o.latitude),Oe(s.latitude));return a!==0?a:se(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ST(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,R=se(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:ST(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=se(u[p],h[p]);if(m!==0)return m;let v=Gr(a[u[p]],l[h[p]]);if(v!==0)return v}return se(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function bT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=or(n),r=or(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function ST(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Gr(t[i],r[i]);if(o)return o}return se(t.length,r.length)}function ps(n){return Dy(n)}function Dy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=or(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Dy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Dy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Li(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cy(n){return!!n&&"integerValue"in n}function Tc(n){return!!n&&"arrayValue"in n}function AT(n){return!!n&&"nullValue"in n}function xT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cd(n){return!!n&&"mapValue"in n}function Th(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function gc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Vb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var jb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function ML(n){return"nullValue"in n?Dd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Li(zr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Th(n)?jb:{mapValue:{}}:z()}function RL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Li(zr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?jb:"mapValue"in n?Th(n)?{mapValue:{}}:Br:z()}function MT(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RT(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var yt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(t)}setAll(e){let t=Ge.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=gc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Cd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(gc(this.value))}};function Bb(n){let e=[];return Wi(n.fields,(t,r)=>{let i=new Ge([t]);if(Cd(r)){let o=Bb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qt(e)}var Xe=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),yt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),yt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var On=class{constructor(e,t){this.position=e,this.inclusive=t}};function NT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Gr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function PT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kn(n.position[t],e.position[t]))return!1;return!0}var Vi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function NL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var kd=class{},he=class n extends kd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Sy(e,t,r):t==="array-contains"?new My(e,r):t==="in"?new Od(e,r):t==="not-in"?new Ry(e,r):t==="array-contains-any"?new Ny(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ay(e,r):new xy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gr(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(Gr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends kd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return gs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function gs(n){return n.op==="and"}function Ty(n){return n.op==="or"}function p_(n){return Ub(n)&&gs(n)}function Ub(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function by(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+ps(n.value);if(p_(n))return n.filters.map(e=>by(e)).join(",");{let e=n.filters.map(t=>by(t)).join(",");return`${n.op}(${e})`}}function $b(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$b(s,i.filters[a]),!0):!1}(n,e):void z()}function Hb(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function qb(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${ps(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(qb).join(" ,")+"}"}(n):"Filter"}var Sy=class extends he{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Ay=class extends he{constructor(e,t){super(e,"in",t),this.keys=zb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},xy=class extends he{constructor(e,t){super(e,"not-in",t),this.keys=zb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var My=class extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Tc(t)&&Cc(t.arrayValue,this.value)}},Od=class extends he{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Cc(this.value.arrayValue,t)}},Ry=class extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Cc(this.value.arrayValue,t)}},Ny=class extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Tc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cc(this.value.arrayValue,r))}};var Py=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function ky(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Py(n,e,t,r,i,o,s)}function ji(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>by(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ps(r)).join(",")),e.ue=t}return e.ue}function $c(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$b(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PT(n.startAt,e.startAt)&&PT(n.endAt,e.endAt)}function Fd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ld(n,e){return n.filters.filter(t=>t instanceof he&&t.field.isEqual(e))}function kT(n,e,t){let r=Dd,i=!0;for(let o of Ld(n,e)){let s=Dd,a=!0;switch(o.op){case"<":case"<=":s=ML(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Dd}MT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];MT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function OT(n,e,t){let r=Br,i=!0;for(let o of Ld(n,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=RL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}RT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];RT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var gn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Gb(n,e,t,r,i,o,s,a){return new gn(n,e,t,r,i,o,s,a)}function Ms(n){return new gn(n)}function FT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function g_(n){return n.collectionGroup!==null}function ls(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(Ge.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vi(o,r))}),t.has(Ge.keyField().canonicalString())||e.ce.push(new Vi(Ge.keyField(),r))}return e.ce}function St(n){let e=U(n);return e.le||(e.le=PL(e,ls(n))),e.le}function PL(n,e){if(n.limitType==="F")return ky(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vi(i.field,o)});let t=n.endAt?new On(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new On(n.startAt.position,n.startAt.inclusive):null;return ky(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Oy(n,e){let t=n.filters.concat([e]);return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vd(n,e,t){return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hc(n,e){return $c(St(n),St(e))&&n.limitType===e.limitType}function Wb(n){return`${ji(St(n))}|lt:${n.limitType}`}function is(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qb(i)).join(", ")}]`),Uc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ps(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(St(n))}; limitType=${n.limitType})`}function qc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ls(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=NT(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ls(r),i)||r.endAt&&!function(s,a,u){let l=NT(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ls(r),i))}(n,e)}function Kb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qb(n){return(e,t)=>{let r=!1;for(let i of ls(n)){let o=kL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function kL(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Gr(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Fn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Fb(this.inner)}size(){return this.innerSize}};var OL=new Ne($.comparator);function kt(){return OL}var Yb=new Ne($.comparator);function fc(...n){let e=Yb;for(let t of n)e=e.insert(t.key,t);return e}function Zb(n){let e=Yb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mn(){return mc()}function Jb(){return mc()}function mc(){return new Fn(n=>n.toString(),(n,e)=>n.isEqual(e))}var FL=new Ne($.comparator),LL=new Ae($.comparator);function ae(...n){let e=LL;for(let t of n)e=e.add(t);return e}var VL=new Ae(se);function m_(){return VL}function y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function Xb(n){return{integerValue:""+n}}function eS(n,e){return Rb(e)?Xb(e):y_(n,e)}var ms=class{constructor(){this._=void 0}};function jL(n,e,t){return n instanceof Wr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ch(o)&&(o=f_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof sr?nS(n,e):n instanceof ar?rS(n,e):function(i,o){let s=tS(i,o),a=LT(s)+LT(i.Pe);return Cy(s)&&Cy(i.Pe)?Xb(a):y_(i.serializer,a)}(n,e)}function BL(n,e,t){return n instanceof sr?nS(n,e):n instanceof ar?rS(n,e):t}function tS(n,e){return n instanceof Kr?function(r){return Cy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wr=class extends ms{},sr=class extends ms{constructor(e){super(),this.elements=e}};function nS(n,e){let t=iS(e);for(let r of n.elements)t.some(i=>kn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ar=class extends ms{constructor(e){super(),this.elements=e}};function rS(n,e){let t=iS(e);for(let r of n.elements)t=t.filter(i=>!kn(i,r));return{arrayValue:{values:t}}}var Kr=class extends ms{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function LT(n){return Oe(n.integerValue||n.doubleValue)}function iS(n){return Tc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Bi=class{constructor(e,t){this.field=e,this.transform=t}};function UL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof sr&&i instanceof sr||r instanceof ar&&i instanceof ar?hs(r.elements,i.elements,kn):r instanceof Kr&&i instanceof Kr?kn(r.Pe,i.Pe):r instanceof Wr&&i instanceof Wr}(n.transform,e.transform)}var Fy=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ys=class{};function oS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yr(n.key,He.none()):new Qr(n.key,n.data,He.none());{let t=n.data,r=yt.empty(),i=new Ae(Ge.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mn(n.key,r,new qt(i.toArray()),He.none())}}function $L(n,e,t){n instanceof Qr?function(i,o,s){let a=i.value.clone(),u=jT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mn?function(i,o,s){if(!Td(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(sS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function yc(n,e,t,r){return n instanceof Qr?function(o,s,a,u){if(!Td(o.precondition,s))return a;let l=o.value.clone(),h=BT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof mn?function(o,s,a,u){if(!Td(o.precondition,s))return a;let l=BT(o.fieldTransforms,u,s),h=s.data;return h.setAll(sS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Td(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function HL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=tS(r.transform,i||null);o!=null&&(t===null&&(t=yt.empty()),t.set(r.field,o))}return t||null}function VT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hs(r,i,(o,s)=>UL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qr=class extends ys{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends ys{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function sS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jT(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,BL(s,a,t[i]))}return r}function BT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,jL(o,s,e))}return r}var Yr=class extends ys{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bc=class extends ys{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$L(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Jb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=oS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(t,r)=>VT(t,r))&&hs(this.baseMutations,e.baseMutations,(t,r)=>VT(t,r))}},Ly=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return FL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ac=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Vy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ye,ye;function aS(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function cS(n){if(n===void 0)return ze("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ye.OK:return x.OK;case Ye.CANCELLED:return x.CANCELLED;case Ye.UNKNOWN:return x.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return x.INTERNAL;case Ye.UNAVAILABLE:return x.UNAVAILABLE;case Ye.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ye.NOT_FOUND:return x.NOT_FOUND;case Ye.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ye.ABORTED:return x.ABORTED;case Ye.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ye.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ye=Ye||(Ye={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var UT=null;function uS(){return new TextEncoder}var qL=new Or([4294967295,4294967295],0);function $T(n){let e=uS().encode(n),t=new Xm;return t.update(e),new Uint8Array(t.digest())}function HT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Or([t,r],0),new Or([i,o],0)]}var jy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ki(`Invalid padding: ${t}`);if(r<0)throw new ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ki(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Or.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Or.fromNumber(r)));return i.compare(qL)===1&&(i=new Or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=$T(e),[r,i]=HT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=$T(e),[r,i]=HT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Ne(se),kt(),ae())}},Mc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var ds=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},jd=class{constructor(e,t){this.targetId=e,this.me=t}},Bd=class{constructor(e,t,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ud=class{constructor(){this.fe=0,this.ge=zT(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),t=ae(),r=ae();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Mc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=zT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},By=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kt(),this.qe=qT(),this.Qe=new Ne(se)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Fd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,Xe.newNoDocument(s,Y.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}UT?.et(function(h,p,m,v,b){var R,N,B,q,F,J;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(ne.bloomFilter={applied:b===0,hashCount:(R=X?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(B=(N=X?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(J=(F=X?.bits)===null||F===void 0?void 0:F.padding)!==null&&J!==void 0?J:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ne}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=qr(r).toUint8Array()}catch(u){if(u instanceof Pd)return pn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new jy(s,i,o)}catch(u){return pn(u instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Fd(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Xe.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ae();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new xc(e,t,this.Qe,this.ke,r);return this.ke=kt(),this.qe=qT(),this.Qe=new Ne(se),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ud,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(se),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ud),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function qT(){return new Ne($.comparator)}function zT(){return new Ne($.comparator)}var zL={asc:"ASCENDING",desc:"DESCENDING"},GL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WL={and:"AND",or:"OR"},Uy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function $y(n,e){return n.useProto3Json||Uc(e)?e:{value:e}}function vs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KL(n,e){return vs(n,e.toTimestamp())}function We(n){return Q(!!n),Y.fromTimestamp(function(t){let r=or(t);return new Ve(r.seconds,r.nanos)}(n))}function v_(n,e){return Hy(n,e).canonicalString()}function Hy(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dS(n){let e=ve.fromString(n);return Q(IS(e)),e}function Rc(n,e){return v_(n.databaseId,e.path)}function Nn(n,e){let t=dS(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(pS(t))}function hS(n,e){return v_(n.databaseId,e)}function fS(n){let e=dS(n);return e.length===4?ve.emptyPath():pS(e)}function qy(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pS(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GT(n,e,t){return{name:Rc(n,e),fields:t.value.mapValue.fields}}function gS(n,e,t){let r=Nn(n,e.name),i=We(e.updateTime),o=e.createTime?We(e.createTime):Y.min(),s=new yt({mapValue:{fields:e.fields}}),a=Xe.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function QL(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=Nn(r,i.found.name),s=We(i.found.updateTime),a=i.found.createTime?We(i.found.createTime):Y.min(),u=new yt({mapValue:{fields:i.found.fields}});return Xe.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=Nn(r,i.missing),s=We(i.readTime);return Xe.newNoDocument(o,s)}(n,e):z()}function YL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Q(h===void 0||typeof h=="string"),Ke.fromBase64String(h||"")):(Q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ke.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:cS(l.code);return new P(h,l.message||"")}(s);t=new Bd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nn(n,r.document.name),o=We(r.document.updateTime),s=r.document.createTime?We(r.document.createTime):Y.min(),a=new yt({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ds(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nn(n,r.document),o=r.readTime?We(r.readTime):Y.min(),s=Xe.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ds([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nn(n,r.document),o=r.removedTargetIds||[];t=new ds([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Vy(i,o),a=r.targetId;t=new jd(a,s)}}return t}function Nc(n,e){let t;if(e instanceof Qr)t={update:GT(n,e.key,e.value)};else if(e instanceof Yr)t={delete:Rc(n,e.key)};else if(e instanceof mn)t={update:GT(n,e.key,e.data),updateMask:nV(e.fieldMask)};else{if(!(e instanceof bc))return z();t={verify:Rc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:KL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function zy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(We(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new Wr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new sr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new ar(h)}else"increment"in a?u=new Kr(s,a.increment):z();let l=Ge.fromServerFormat(a.fieldPath);return new Bi(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Nn(n,e.update.name),o=new yt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new qt(l.map(h=>Ge.fromServerFormat(h)))}(e.updateMask);return new mn(i,o,s,t,r)}return new Qr(i,o,t,r)}if(e.delete){let i=Nn(n,e.delete);return new Yr(i,t)}if(e.verify){let i=Nn(n,e.verify);return new bc(i,t)}return z()}function ZL(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?We(i.updateTime):We(o);return s.isEqual(Y.min())&&(s=We(o)),new Fy(s,i.transformResults||[])}(t,e))):[]}function mS(n,e){return{documents:[hS(n,e.path)]}}function yS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hS(n,i);let o=function(l){if(l.length!==0)return wS(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:os(m.field),direction:XL(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=$y(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function vS(n){let e=fS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=_S(p);return m instanceof Te&&p_(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Vi(ss(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Uc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new On(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new On(v,m)}(t.endAt)),Gb(e,i,s,o,a,"F",u,l)}function JL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _S(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ss(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ss(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ss(t.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ss(t.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return he.create(ss(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>_S(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function XL(n){return zL[n]}function eV(n){return GL[n]}function tV(n){return WL[n]}function os(n){return{fieldPath:n.canonicalString()}}function ss(n){return Ge.fromServerFormat(n.fieldPath)}function wS(n){return n instanceof he?function(t){if(t.op==="=="){if(xT(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NAN"}};if(AT(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xT(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NOT_NAN"}};if(AT(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(t.field),op:eV(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>wS(i));return r.length===1?r[0]:{compositeFilter:{op:tV(t.op),filters:r}}}(n):z()}function nV(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _s=class n{constructor(e,t,r,i,o=Y.min(),s=Y.min(),a=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $d=class{constructor(e){this.ct=e}};function rV(n,e){let t;if(e.document)t=gS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=$i(e.noDocument.readTime);t=Xe.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=$i(e.unknownDocument.version);t=Xe.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return Y.fromTimestamp(o)}(e.readTime)),t}function WT(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Rc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:vs(o,s.version.toTimestamp()),createTime:vs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Ui(e.version)}}return r}function Hd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $i(n){let e=new Ve(n.seconds,n.nanoseconds);return Y.fromTimestamp(e)}function Ri(n,e){let t=(e.baseMutations||[]).map(o=>zy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>zy(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new Sc(e.batchId,i,t,r)}function pc(n){let e=$i(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?$i(n.lastLimboFreeSnapshotVersion):Y.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),St(Ms(fS(o.documents[0])))}(n.query):function(o){return St(vS(o))}(n.query),new _s(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ke.fromBase64String(n.resumeToken))}function ES(n,e){let t=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion),i;i=Fd(e.target)?mS(n.ct,e.target):yS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function __(n){let e=vS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vd(e,e.limit,"L"):e}function oy(n,e){return new Ac(e.largestBatchId,zy(n.ct,e.overlayMutation))}function KT(n,e){let t=e.path.lastSegment();return[n,bt(e.path.popLast()),t]}function QT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ui(r.readTime),documentKey:bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Gy=class{getBundleMetadata(e,t){return YT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:$i(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return YT(e).put(function(i){return{bundleId:i.id,createTime:Ui(We(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return ZT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:__(o.bundledQuery),readTime:$i(o.readTime)}}(r)})}saveNamedQuery(e,t){return ZT(e).put(function(i){return{name:i.name,readTime:Ui(We(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function YT(n){return it(n,"bundles")}function ZT(n){return it(n,"namedQueries")}var qd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return uc(e).get(KT(this.userId,t)).next(r=>r?oy(this.serializer,r):null)}getOverlays(e,t){let r=Mn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ac(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(uc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Mn(),o=bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return uc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=oy(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Mn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=oy(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return uc(e).put(function(i,o,s){let[a,u,l]=KT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Nc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function uc(n){return it(n,"documentOverlays")}var Wy=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ke.fromUint8Array(r):Ke.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var rr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ic(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=or(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Vb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Th(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};rr.vt=new rr;function iV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function JT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=iV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Ky=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=JT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=JT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Qy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Yy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ni=class{constructor(){this.jt=new Ky,this.Ht=new Qy(this.jt),this.Jt=new Yy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Pi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Fr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=XT(n.arrayValue,e.arrayValue),t!==0?t:(t=XT(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function XT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var zd=class{constructor(e){this.Xt=new Ae((t,r)=>Ge.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=yy(e);if(t!==void 0&&!this.sn(t))return!1;let r=xi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Ge.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new us(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new us(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new us(r.field,r.dir==="asc"?0:1)));return new fs(fs.UNKNOWN_ID,this.collectionId,t,wc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function DS(n){var e,t;if(Q(n instanceof he||n instanceof Te),n instanceof he){if(n instanceof Od){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>he.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>DS(i));return Te.create(r,n.op)}function oV(n){if(n.getFilters().length===0)return[];let e=Xy(DS(n));return Q(CS(e)),Zy(e)||Jy(e)?[e]:e.getFilters()}function Zy(n){return n instanceof he}function Jy(n){return n instanceof Te&&p_(n)}function CS(n){return Zy(n)||Jy(n)||function(t){if(t instanceof Te&&Ty(t)){for(let r of t.getFilters())if(!Zy(r)&&!Jy(r))return!1;return!0}return!1}(n)}function Xy(n){if(Q(n instanceof he||n instanceof Te),n instanceof he)return n;if(n.filters.length===1)return Xy(n.filters[0]);let e=n.filters.map(r=>Xy(r)),t=Te.create(e,n.op);return t=Gd(t),CS(t)?t:(Q(t instanceof Te),Q(gs(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>w_(r,i)))}function w_(n,e){let t;return Q(n instanceof he||n instanceof Te),Q(e instanceof he||e instanceof Te),t=n instanceof he?e instanceof he?function(i,o){return Te.create([i,o],"and")}(n,e):eb(n,e):e instanceof he?eb(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),gs(i)&&gs(o))return Hb(i,o.getFilters());let s=Ty(i)?i:o,a=Ty(i)?o:i,u=s.filters.map(l=>w_(l,a));return Te.create(u,"or")}(n,e),Gd(t)}function eb(n,e){if(gs(e))return Hb(e,n.getFilters());{let t=e.filters.map(r=>w_(n,r));return Te.create(t,"or")}}function Gd(n){if(Q(n instanceof he||n instanceof Te),n instanceof he)return n;let e=n.getFilters();if(e.length===1)return Gd(e[0]);if(Ub(n))return n;let t=e.map(i=>Gd(i)),r=[];return t.forEach(i=>{i instanceof he?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var ev=class{constructor(){this.un=new Pc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(tn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(tn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Pc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ve.comparator)).toArray()}};var vd=new Uint8Array(0),tv=class{constructor(e,t){this.databaseId=t,this.cn=new Pc,this.ln=new Fn(r=>ji(r),(r,i)=>$c(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:bt(i)};return tb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[bb(t),""],!1,!0);return tb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(xn(s.parent))}return r})}addFieldIndex(e,t){let r=lc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ts(e);return o.next(a=>{s.put(QT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=lc(e),i=ts(e),o=es(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=lc(e),r=es(e),i=ts(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new zd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=es(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ae(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${ji(t)}`);let h=function(F,J){let ne=yy(J);if(ne===void 0)return null;for(let X of Ld(F,ne.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),p=function(F,J){let ne=new Map;for(let X of xi(J))for(let I of Ld(F,X.fieldPath))switch(I.op){case"==":case"in":ne.set(X.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set(X.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null}(l,u),m=function(F,J){let ne=[],X=!0;for(let I of xi(J)){let y=I.kind===0?kT(F,I.fieldPath,F.startAt):OT(F,I.fieldPath,F.startAt);ne.push(y.value),X&&(X=y.inclusive)}return new On(ne,X)}(l,u),v=function(F,J){let ne=[],X=!0;for(let I of xi(J)){let y=I.kind===0?OT(F,I.fieldPath,F.endAt):kT(F,I.fieldPath,F.endAt);ne.push(y.value),X&&(X=y.inclusive)}return new On(ne,X)}(l,u),b=this.In(u,l,m),R=this.In(u,l,v),N=this.Tn(u,l,p),B=this.En(u.indexId,h,b,m.inclusive,R,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(J=>{let ne=$.fromSegments(J.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=oV(Te.create(e.filters,"and")).map(r=>ky(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):vd,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),R=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,R))}return h}An(e,t,r,i){let o=new Pi(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Pi(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new zd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ae(Ge.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ni;for(let i of xi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);rr.vt.It(o,s)}return r.zt()}dn(e){let t=new Ni;return rr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ni;return rr.vt.It(Li(this.databaseId,t),r.Yt(function(o){let s=xi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ni);let o=0;for(let s of xi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Tc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);rr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Ni;u.seed(a.zt()),rr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=lc(e),i=ts(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new wc(p.sequenceNumber,new tn($i(p.readTime),new $(xn(p.documentKey)),p.largestBatchId)):wc.empty(),v=h.fields.map(([b,R])=>new us(Ge.fromServerFormat(b),R));return new fs(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:se(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=lc(e),o=ts(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(QT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return es(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return es(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=es(e),o=new Ae(Fr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Pi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(Fr),i=this.Vn(t,e);if(i==null)return r;let o=yy(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Tc(s))for(let a of s.arrayValue.values||[])r=r.add(new Pi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Pi(t.indexId,e.key,vd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),b=l.getIterator(),R=Xo(v),N=Xo(b);for(;R||N;){let B=!1,q=!1;if(R&&N){let F=h(R,N);F<0?q=!0:F>0&&(B=!0)}else R!=null?q=!0:B=!0;B?(p(N),N=Xo(b)):q?(m(R),R=Xo(v)):(R=Xo(v),N=Xo(b))}}(i,o,Fr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return ts(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Fr(s,a)).filter((s,a,u)=>!a||Fr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Fr(s,e),u=Fr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,vd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,vd,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Fr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nb)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(nb)}};function tb(n){return it(n,"collectionParents")}function es(n){return it(n,"indexEntries")}function lc(n){return it(n,"indexConfiguration")}function ts(n){return it(n,"indexState")}function nb(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;l_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new tn(e.readTime,e.documentKey,t)}var rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function TS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let h of t.mutations){let p=Nb(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Wd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var Kd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=as(e),s=Lr(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new Sc(a,t,r,i),l=function(v,b,R){let N=R.baseMutations.map(q=>Nc(v.ct,q)),B=R.mutations.map(q=>Nc(v.ct,q));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,u),h=[],p=new Ae((m,v)=>se(m.canonicalString(),v.canonicalString()));for(let m of i){let v=Nb(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,dL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Lr(e).get(t).next(r=>r?(Q(r.userId===this.userId),Ri(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Lr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=Ri(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Lr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ri(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Ed(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return as(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=xn(h);if(l===this.userId&&t.path.isEqual(m))return Lr(e).get(p).next(v=>{if(!v)throw z();Q(v.userId===this.userId),o.push(Ri(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(se),i=[];return t.forEach(o=>{let s=Ed(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=as(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,R=xn(v);m===this.userId&&o.path.isEqual(R)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Ed(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(se);return as(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,b=xn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Lr(e).get(o).next(s=>{if(s===null)throw z();Q(s.userId===this.userId),r.push(Ri(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return TS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return as(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=xn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return bS(e,this.userId,t)}Nn(e){return SS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function bS(n,e,t){let r=Ed(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return as(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Lr(n){return it(n,"mutations")}function as(n){return it(n,"documentMutations")}function SS(n){return it(n,"mutationQueues")}var ws=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var nv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ws(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Y.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ns(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ns(e).J((s,a)=>{let u=pc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ns(e).J((r,i)=>{let o=pc(i);t(o)})}qn(e){return ib(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return ib(e).put("targetGlobalKey",t)}Kn(e,t){return ns(e).put(ES(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ji(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ns(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=pc(a);$c(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Vr(e);return t.forEach(s=>{let a=bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Vr(e);return S.forEach(t,o=>{let s=bt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Vr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vr(e),o=ae();return i.J({range:r,H:!0},(s,a,u)=>{let l=xn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=bt(t.path),i=IDBKeyRange.bound([r],[bb(r)],!1,!0),o=0;return Vr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return ns(e).get(t).next(r=>r?pc(r):null)}};function ns(n){return it(n,"targets")}function ib(n){return it(n,"targetGlobal")}function Vr(n){return it(n,"targetDocuments")}function ob([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var rv=class{constructor(e){this.Un=e,this.buffer=new Ae(ob),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ob(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},iv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Jr(t)}yield this.Hn(3e5)}))}},ov=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Ht.oe);let r=new rv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(rb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rb):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),rs()<=_n.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function sV(n,e){return new ov(n,e)}var sv=class{constructor(e,t){this.db=e,this.garbageCollector=sV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return _d(e,r)}removeReference(e,t,r){return _d(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _d(e,t)}nr(e,t){return function(i,o){let s=!1;return SS(i).Y(a=>bS(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Y.min()),Vr(e).delete(function(p){return[0,bt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _d(e,t)}tr(e,t){let r=Vr(e),i,o=Ht.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Ht.oe&&t(new $(xn(i)),o),o=l,i=u):o=Ht.oe}).next(()=>{o!==Ht.oe&&t(new $(xn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function _d(n,e){return Vr(n).put(function(r,i){return{targetId:0,path:bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Qd=class{constructor(){this.changes=new Fn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var av=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ai(e).put(r)}removeEntry(e,t,r){return Ai(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Xe.newInvalidDocument(t);return Ai(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Xe.newInvalidDocument(t)};return Ai(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dc(t))},(i,o)=>{r={document:this.ir(t,o),size:Wd(o)}}).next(()=>r)}getEntries(e,t){let r=kt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=kt(),i=new Ne($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Wd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(cb);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(dc(i.first()),dc(i.last())),s=i.getIterator(),a=s.getNext();return Ai(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&cb(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(dc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Hd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ai(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=kt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(qc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=kt(),s=ab(t,r),a=ab(t,tn.max());return Ai(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new cv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sb(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return sb(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=rV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Y.min())))return r}return Xe.newInvalidDocument(e)}};function AS(n){return new av(n)}var cv=class extends Qd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Fn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>se(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=WT(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Wd(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=WT(this.cr.serializer,s.convertToNoDocument(Y.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function sb(n){return it(n,"remoteDocumentGlobal")}function Ai(n){return it(n,"remoteDocumentsV14")}function dc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ab(n,e){let t=e.documentKey.path.toArray();return[n,Hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cb(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=se(t[o],r[o]),i)return i;return i=se(t.length,r.length),i||(i=se(t[t.length-2],r[r.length-2]),i||se(t[t.length-1],r[r.length-1]))}var uv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Yd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yc(r.mutation,i,qt.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=Mn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=fc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Mn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=kt(),s=mc(),a=function(){return mc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof mn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),yc(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):s.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new uv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=mc(),i=new Ne((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Jb();h.forEach(m=>{if(!o.has(m)){let v=oS(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Mn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:a,changes:Zb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=fc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=fc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new gn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Xe.newInvalidDocument(h)))});let a=fc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&yc(h.mutation,l,qt.empty(),Ve.now()),qc(t,l)&&(a=a.insert(u,l))}),a})}};var lv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:We(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:__(i.bundledQuery),readTime:We(i.readTime)}}(t)),S.resolve()}};var dv=class{constructor(){this.overlays=new Ne($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Mn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Mn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Mn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ac(t,r));let o=this.Ir.get(t);o===void 0&&(o=ae(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var hv=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var kc=class{constructor(){this.Tr=new Ae(Ze.Er),this.dr=new Ae(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ze(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ze(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Ze(t,e),i=new Ze(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Ze(t,e),i=new Ze(t,e+1),o=ae();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ze(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ze=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||se(e.wr,t.wr)}static Ar(e,t){return se(e.wr,t.wr)||$.comparator(e.key,t.key)}};var fv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Ze.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Sc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(se);return t.forEach(i=>{let o=new Ze(i,0),s=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ze(new $(o),0),a=new Ae(se);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Ze(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ze(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var pv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(t))}getEntries(e,t){let r=kt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xe.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=kt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||l_(Ab(h),r)<=0||(i.has(h.key)||qc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gv(this)}getSize(e){return S.resolve(this.size)}},gv=class extends Qd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var mv=class{constructor(e){this.persistence=e,this.Nr=new Fn(t=>ji(t),$c),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kc,this.targetCount=0,this.kr=ws.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ws(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Zd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ht(0),this.Kr=!1,this.Kr=!0,this.$r=new hv,this.referenceDelegate=e(this),this.Ur=new mv(this),this.indexManager=new ev,this.remoteDocumentCache=function(i){return new pv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $d(t),this.Gr=new lv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new fv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new yv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},yv=class extends Md{constructor(e){super(),this.currentSequenceNumber=e}},Jd=class n{constructor(e){this.persistence=e,this.Jr=new kc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var vv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Rd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CT,{unique:!0}),u.createObjectStore("documentMutations")}(e),ub(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),ub(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:DL});l.createIndex("collectionPathOverlayIndex",CL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",TL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:hL});l.createIndex("documentKeyIndex",fL),l.createIndex("collectionGroupIndex",pL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:_L}).createIndex("sequenceNumberIndex",wL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:IL}).createIndex("documentKeyIndex",EL,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Wd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Q(u.userId===o.userId);let l=Ri(this.serializer,u);return TS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ve(s),l=function(p){return[0,bt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:bt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:vL});let r=t.store("collectionParents"),i=new Pc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:bt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ve(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=xn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=pc(i),s=ES(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(ve.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=AS(this.serializer),o=new Zd(Jd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ae();Ri(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new Je(l),p=qd.lt(this.serializer,h),m=o.getIndexManager(h),v=Kd.lt(h,this.serializer,m,o.referenceDelegate);return new Yd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ec(t,Ht.oe),u).next()})})}};function ub(n){n.createObjectStore("targetDocuments",{keyPath:mL}).createIndex("documentTargetsIndex",yL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gL,{unique:!0}),n.createObjectStore("targetGlobal")}var sy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_v=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sv(this,i),this.Ai=t+"main",this.serializer=new $d(u),this.Ri=new Hr(this.Ai,this.hi,new vv(this.serializer)),this.$r=new Wy,this.Ur=new nv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AS(this.serializer),this.Gr=new Gy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,sy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ht(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Xr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return hc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return wd(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):hc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,sy);return!1}}return!(!this.networkEnabled||!this.inForeground)||wd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ec(e,Ht.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>wd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Kd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?AL:u===16?SL:u===15?h_:u===14?Ob:u===13?kb:u===12?bL:u===11?Pb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Ec(a,this.Qr?this.Qr.next():Ht.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,xb);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return hc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,sy)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hc(e).put("owner",t)}static D(){return Hr.D()}bi(e){let t=hc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;xf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function hc(n){return it(n,"owner")}function wd(n){return it(n,"clientMetadata")}function I_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var wv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ae(),i=ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Iv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xf()?8:Mb(oa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Iv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(rs()<=_n.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",is(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(rs()<=_n.DEBUG&&k("QueryEngine","Query:",is(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rs()<=_n.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",is(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,St(t))):S.resolve())}Yi(e,t){if(FT(t))return S.resolve(null);let r=St(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Vd(t,null,"F"),r=St(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Vd(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return FT(t)||i.isEqual(Y.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(rs()<=_n.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),is(t)),this.rs(e,s,t,Sb(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(Qb(e));return t.forEach((i,o)=>{qc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return rs()<=_n.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",is(t)),this.Ji.getDocumentsMatchingQuery(e,t,tn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ev=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(se),this._s=new Fn(o=>ji(o),$c),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function xS(n,e,t,r){return new Ev(n,e,t,r)}function MS(n,e){return M(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function aV(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(R=>{let N=l.docVersions.get(b);Q(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function RS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function cV(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ke.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(R,N,B){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=kt(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(NS(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(Y.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function NS(n,e,t){let r=ae(),i=ae();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=kt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function uV(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Is(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new _s(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Es(n,e,t){return M(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function eh(n,e,t){let r=U(n),i=Y.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,St(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Y.min(),t?o:ae())).next(a=>(OS(r,Kb(e),a),{documents:a,Ts:o})))}function PS(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function kS(n,e){let t=U(n),r=t.us.get(e)||Y.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Sb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OS(t,e,i),i))}function OS(n,e,t){let r=n.us.get(e)||Y.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function lV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=ae(),s=kt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Is(i,function(h){return St(Ms(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>NS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function dV(r,i){return M(this,arguments,function*(n,e,t=ae()){let o=yield Is(n,St(__(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=We(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ke.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function lb(n,e){return`firestore_clients_${n}_${e}`}function db(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ay(n,e){return`firestore_targets_${n}_${e}`}var th=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},vc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=m_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Rb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Dv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Oc=class{constructor(){this.activeTargetIds=m_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},_c=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(se),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=lb(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Oc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(lb(this.persistenceKey,r));if(i){let o=nh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(ay(this.persistenceKey,e));if(i){let o=vc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ay(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Ht.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Ht.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new th(this.currentUser,e,t,r),o=db(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=db(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=ay(this.persistenceKey,e),o=new vc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return nh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return th.Rs(new Je(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return vc.Rs(i,t)}Ls(e){return Dv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=m_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},rh=class{constructor(){this.so=new Oc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Oc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cv=class{_o(e){}shutdown(){}};var ih=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Id=null;function cy(){return Id===null?Id=function(){return 268435456+Math.round(2147483648*Math.random())}():Id++,"0x"+Id.toString(16)}var hV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Tv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var mt="WebChannelConnection",bv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=cy(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw pn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=hV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=cy();return new Promise((s,a)=>{let u=new ey;u.setWithCredentials(!0),u.listenOnce(ty.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cc.NO_ERROR:let h=u.getResponseJson();k(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case cc.TIMEOUT:k(mt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:let p=u.getStatus();if(k(mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(mt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(mt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=cy(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iy(),a=ry(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,b=new Tv({Io:N=>{v?k(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(mt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(J){setTimeout(()=>{throw J},0)}})};return R(p,Jo.EventType.OPEN,()=>{v||(k(mt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),R(p,Jo.EventType.CLOSE,()=>{v||(v=!0,k(mt,`RPC '${e}' stream ${i} transport closed`),b.So())}),R(p,Jo.EventType.ERROR,N=>{v||(v=!0,pn(mt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,Jo.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];Q(!!q);let F=q,J=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(J){k(mt,`RPC '${e}' stream ${i} received error:`,J);let ne=J.status,X=function(w){let E=Ye[w];if(E!==void 0)return cS(E)}(ne),I=J.message;X===void 0&&(X=x.INTERNAL,I="Unknown error status: "+ne+" with message "+J.message),v=!0,b.So(new P(X,I)),p.close()}else k(mt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),R(a,ny.STAT_EVENT,N=>{N.stat===yd.PROXY?k(mt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===yd.NOPROXY&&k(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function FS(){return typeof window<"u"?window:null}function bd(){return typeof document<"u"?document:null}function zc(n){return new Uy(n,!0)}var Fc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var oh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(ze(t.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sv=class extends oh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=YL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?We(s.readTime):Y.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=qy(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Fd(u)?{documents:mS(o,u)}:{query:yS(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=lS(o,s.resumeToken);let l=$y(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){a.readTime=vs(o,s.snapshotVersion.toTimestamp());let l=$y(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=JL(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=qy(this.serializer),t.removeTarget=e,this.a_(t)}},Av=class extends oh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=ZL(e.writeResults,e.commitTime),r=We(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=qy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Nc(this.serializer,r))};this.a_(t)}};var xv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Hy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Hy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Mv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ze(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Rv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){ei(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return M(this,null,function*(){let l=U(u);l.L_.add(4),yield Rs(l),l.q_.set("Unknown"),l.L_.delete(4),yield Gc(l)})}(this))}))}),this.q_=new Mv(r,i)}};function Gc(n){return M(this,null,function*(){if(ei(n))for(let e of n.B_)yield e(!0)})}function Rs(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function bh(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),C_(t)?D_(t):Ps(t).r_()&&E_(t,e))}function Ds(n,e){let t=U(n),r=Ps(t);t.N_.delete(e),r.r_()&&LS(t,e),t.N_.size===0&&(r.r_()?r.o_():ei(t)&&t.q_.set("Unknown"))}function E_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ps(n).A_(e)}function LS(n,e){n.Q_.xe(e),Ps(n).R_(e)}function D_(n){n.Q_=new By({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ps(n).start(),n.q_.v_()}function C_(n){return ei(n)&&!Ps(n).n_()&&n.N_.size>0}function ei(n){return U(n).L_.size===0}function VS(n){n.Q_=void 0}function fV(n){return M(this,null,function*(){n.q_.set("Online")})}function pV(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{E_(n,e)})})}function gV(n,e){return M(this,null,function*(){VS(n),C_(n)?(n.q_.M_(e),D_(n)):n.q_.set("Unknown")})}function mV(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof Bd&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sh(n,r)}else if(e instanceof ds?n.Q_.Ke(e):e instanceof jd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Y.min()))try{let r=yield RS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ke.EMPTY_BYTE_STRING,h.snapshotVersion)),LS(o,u);let p=new _s(h.target,u,l,h.sequenceNumber);E_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield sh(n,r)}})}function sh(n,e,t){return M(this,null,function*(){if(!Xr(e))throw e;n.L_.add(1),yield Rs(n),n.q_.set("Offline"),t||(t=()=>RS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Gc(n)}))})}function jS(n,e){return e().catch(t=>sh(n,t,e))}function Ns(n){return M(this,null,function*(){let e=U(n),t=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yV(e);)try{let i=yield uV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,vV(e,i)}catch(i){yield sh(e,i)}BS(e)&&US(e)})}function yV(n){return ei(n)&&n.O_.length<10}function vV(n,e){n.O_.push(e);let t=Zr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function BS(n){return ei(n)&&!Zr(n).n_()&&n.O_.length>0}function US(n){Zr(n).start()}function _V(n){return M(this,null,function*(){Zr(n).p_()})}function wV(n){return M(this,null,function*(){let e=Zr(n);for(let t of n.O_)e.m_(t.mutations)})}function IV(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=Ly.from(r,e,t);yield jS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ns(n)})}function EV(n,e){return M(this,null,function*(){e&&Zr(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return aS(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Zr(r).s_(),yield jS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ns(r)}})}(n,e)),BS(n)&&US(n)})}function hb(n,e){return M(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ei(t);t.L_.add(3),yield Rs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Gc(t)})}function Nv(n,e){return M(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield Gc(t)):e||(t.L_.add(2),yield Rs(t),t.q_.set("Unknown"))})}function Ps(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new Sv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:fV.bind(null,n),Ro:pV.bind(null,n),mo:gV.bind(null,n),d_:mV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),C_(n)?D_(n):n.q_.set("Unknown")):(yield n.K_.stop(),VS(n))}))),n.K_}function Zr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new Av(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_V.bind(null,n),mo:EV.bind(null,n),f_:wV.bind(null,n),g_:IV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield Ns(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Pv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ks(n,e){if(ze("AsyncQueue",`${e}: ${n}`),Xr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var ah=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=fc(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ch=class{constructor(){this.W_=new Ne($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Cs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ah.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var kv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ov=class{constructor(){this.queries=fb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=fb(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function fb(){return new Fn(n=>Wb(n),Hc)}function T_(n,e){return M(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new kv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ks(s,`Initialization of query '${is(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&S_(t)})}function b_(n,e){return M(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function DV(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&S_(t)}function CV(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function S_(n){n.Y_.forEach(e=>{e.next()})}var Fv,pb;(pb=Fv||(Fv={})).ea="default",pb.Cache="cache";var Lc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Cs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fv.Cache}};var Lv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var uh=class{constructor(e){this.serializer=e}Es(e){return Nn(this.serializer,e)}ds(e){return e.metadata.exists?gS(this.serializer,e.document,!1):Xe.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return We(e)}},Vv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$S(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new uh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ae()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield lV(this.localStore,new uh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield dV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function $S(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var lh=class{constructor(e){this.key=e}},dh=class{constructor(e){this.key=e}},hh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=Qb(e),this.Ra=new ah(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ch,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=qc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==R&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return R(v)-R(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Cs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ch,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new dh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new lh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ae();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Cs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},jv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Bv=class{constructor(e){this.key=e,this.va=!1}},Uv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Fn(a=>Wb(a),Hc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne($.comparator),this.Na=new Map,this.La=new kc,this.Ba={},this.ka=new Map,this.qa=ws.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function TV(n,e,t=!0){return M(this,null,function*(){let r=Sh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield HS(r,e,t,!0),i})}function bV(n,e){return M(this,null,function*(){let t=Sh(n);yield HS(t,e,!0,!1)})}function HS(n,e,t,r){return M(this,null,function*(){let i=yield Is(n.localStore,St(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield A_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&bh(n.remoteStore,i),a})}function A_(n,e,t,r,i){return M(this,null,function*(){n.Ka=(p,m,v)=>function(R,N,B,q){return M(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield eh(R.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let J=q&&q.targetChanges.get(N.targetId),ne=q&&q.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(F,R.isPrimaryClient,J,ne);return $v(R,N.targetId,X.wa),X.snapshot})}(n,p,m,v);let o=yield eh(n.localStore,e,!0),s=new hh(e,o.Ts),a=s.ma(o.documents),u=Mc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);$v(n,t,l.wa);let h=new jv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function SV(n,e,t){return M(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Hc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Es(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ds(r.remoteStore,i.targetId),Ts(r,i.targetId)}).catch(Jr))):(Ts(r,i.targetId),yield Es(r.localStore,i.targetId,!0))})}function AV(n,e){return M(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ds(t.remoteStore,r.targetId))})}function xV(n,e,t){return M(this,null,function*(){let r=N_(n);try{let i=yield function(s,a){let u=U(s),l=Ve.now(),h=a.reduce((v,b)=>v.add(b.key),ae()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=kt(),R=ae();return u.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(R=R.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=HL(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new mn(q.key,F,Bb(F.value.mapValue),He.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Zb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(se)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield lr(r,i.changes),yield Ns(r.remoteStore)}catch(i){let o=ks(i,"Failed to persist write");t.reject(o)}})}function qS(n,e){return M(this,null,function*(){let t=U(n);try{let r=yield cV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield lr(t,r,e)}catch(r){yield Jr(r)}})}function gb(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&S_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MV(n,e,t){return M(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne($.comparator);s=s.insert(o,Xe.newNoDocument(o,Y.min()));let a=ae().add(o),u=new xc(Y.min(),new Map,new Ne(se),s,a);yield qS(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),R_(r)}else yield Es(r.localStore,e,!1).then(()=>Ts(r,e,t)).catch(Jr)})}function RV(n,e){return M(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield aV(t.localStore,e);M_(t,r,null),x_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lr(t,i)}catch(i){yield Jr(i)}})}function NV(n,e,t){return M(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Q(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);M_(r,e,t),x_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lr(r,i)}catch(i){yield Jr(i)}})}function PV(n,e){return M(this,null,function*(){let t=U(n);ei(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ks(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function x_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function M_(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ts(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zS(n,r)})}function zS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ds(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),R_(n))}function $v(n,e,t){for(let r of t)r instanceof lh?(n.La.addReference(r.key,e),kV(n,r)):r instanceof dh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zS(n,r.key)):z()}function kV(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),R_(n))}function R_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new Bv(t)),n.Oa=n.Oa.insert(t,r),bh(n.remoteStore,new _s(St(Ms(t.path)),r,"TargetPurposeLimboResolution",Ht.oe))}}function lr(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=wv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return M(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Xr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,R)}}})}(r.localStore,o))})}function OV(n,e){return M(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield MS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lr(t,r.hs)}})}function FV(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ae().add(r.key);{let i=ae(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function LV(n,e){return M(this,null,function*(){let t=U(n),r=yield eh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&$v(t,e.targetId,i.wa),i})}function VV(n,e){return M(this,null,function*(){let t=U(n);return kS(t.localStore,e).then(r=>lr(t,r))})}function jV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ns(i.remoteStore):t==="acknowledged"||t==="rejected"?(M_(i,e,r||null),x_(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield lr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function BV(n,e){return M(this,null,function*(){let t=U(n);if(Sh(t),N_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mb(t,r.toArray());t.Qa=!0,yield Nv(t.remoteStore,!0);for(let o of i)bh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ts(t,s),Es(t.localStore,s,!0))),Ds(t.remoteStore,s)}),yield i,yield mb(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{Ds(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne($.comparator)}(t),t.Qa=!1,yield Nv(t.remoteStore,!1)}})}function mb(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Is(r.localStore,St(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield LV(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield PS(r.localStore,s);a=yield Is(r.localStore,l),yield A_(r,GS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function GS(n){return Gb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UV(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function $V(n,e,t,r){return M(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield kS(i.localStore,Kb(o[0])),a=xc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ke.EMPTY_BYTE_STRING);yield lr(i,s,a);break}case"rejected":yield Es(i.localStore,e,!0),Ts(i,e,r);break;default:z()}})}function HV(n,e,t){return M(this,null,function*(){let r=Sh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield PS(r.localStore,i),s=yield Is(r.localStore,o);yield A_(r,GS(o),s.targetId,!1,s.resumeToken),bh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Es(r.localStore,i,!1).then(()=>{Ds(r.remoteStore,i),Ts(r,i)}).catch(Jr))}})}function Sh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MV.bind(null,e),e.Ca.d_=DV.bind(null,e.eventManager),e.Ca.$a=CV.bind(null,e.eventManager),e}function N_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NV.bind(null,e),e}function qV(n,e,t){let r=U(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,b){let R=U(v),N=We(b.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",B=>R.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress($S(u));let l=new Vv(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield lr(o,p.Ia,void 0),yield function(v,b){let R=U(v);return R.persistence.runTransaction("Save bundle","readwrite",N=>R.Gr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return pn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Hv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=zc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return xS(this.persistence,new Xd,t.initialUser,this.serializer)}Ga(t){return new Zd(Jd.Zr,this.serializer)}Wa(t){return new rh}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var fh=class n extends Hv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield Sf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield N_(this.Ja.syncEngine),yield Ns(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return xS(this.persistence,new Xd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new iv(r,e.asyncQueue,t)}Ha(e,t){let r=new Iy(t,this.persistence);return new wy(e.asyncQueue,r)}Ga(e){let t=I_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new _v(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FS(),bd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new rh}},qv=class n extends fh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield Sf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof _c&&(this.sharedClientState.syncEngine={no:jV.bind(null,t),ro:$V.bind(null,t),io:HV.bind(null,t),Qi:UV.bind(null,t),eo:VV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield BV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=FS();if(!_c.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=I_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _c(t,e.asyncQueue,r,e.clientId,e.initialUser)}},P_=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OV.bind(null,this.syncEngine),yield Nv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ov}()}createDatastore(t){let r=zc(t.databaseInfo.databaseId),i=function(s){return new bv(s)}(t.databaseInfo);return function(s,a,u,l){return new xv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Rv(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>gb(this.syncEngine,r,0),function(){return ih.D()?new ih:new Cv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new Uv(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Rs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function yb(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var bs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var zv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Lv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Gv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=U(i),a={documents:o.map(p=>Rc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=QL(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new bc(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=U(r),s={writes:i.map(a=>Nc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Y.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Y.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Y.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Wv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Fc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Gv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Uc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!aS(t)}return!1}};var Kv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=Ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ks(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function uy(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield MS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function vb(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield k_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hb(e.remoteStore,i)),n._onlineComponents=e})}function k_(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield uy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pn("Error using user provided cache. Falling back to memory cache: "+t),yield uy(n,new Hv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield uy(n,new Hv);return n._offlineComponents})}function Ah(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield vb(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield vb(n,new P_))),n._onlineComponents})}function WS(n){return k_(n).then(e=>e.persistence)}function O_(n){return k_(n).then(e=>e.localStore)}function KS(n){return Ah(n).then(e=>e.remoteStore)}function F_(n){return Ah(n).then(e=>e.syncEngine)}function zV(n){return Ah(n).then(e=>e.datastore)}function Ss(n){return M(this,null,function*(){let e=yield Ah(n),t=e.eventManager;return t.onListen=TV.bind(null,e.syncEngine),t.onUnlisten=SV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AV.bind(null,e.syncEngine),t})}function GV(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield WS(n),t=yield KS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),Gc(o)}(t)}))}function WV(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield WS(n),t=yield KS(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=U(i);o.L_.add(0),yield Rs(o),o.q_.set("Offline")})}(t)}))}function KV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ks(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield O_(n),e,t)})),t.promise}function QS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new bs({next:m=>{h.Za(),s.enqueueAndForget(()=>b_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Lc(Ms(a.path),h,{includeMetadataChanges:!0,_a:!0});return T_(o,p)}(yield Ss(n),n.asyncQueue,e,t,r)})),r.promise}function QV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield eh(i,o,!0),u=new hh(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=ks(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield O_(n),e,t)})),t.promise}function YS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new bs({next:m=>{h.Za(),s.enqueueAndForget(()=>b_(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Lc(a,h,{includeMetadataChanges:!0,_a:!0});return T_(o,p)}(yield Ss(n),n.asyncQueue,e,t,r)})),r.promise}function YV(n,e){let t=new bs(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Ss(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Ss(n),t)}))}}function ZV(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?uS().encode(s):s,function(h,p){return new zv(h,p)}(function(h,p){if(h instanceof Uint8Array)return yb(h,p);if(h instanceof ArrayBuffer)return yb(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,zc(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){qV(yield F_(n),i,r)}))}function JV(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield O_(n),e)}))}function ZS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _b=new Map;function L_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wb(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ib(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ph=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ly;switch(r.type){case"firstParty":return new py(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=_b.get(t);r&&(k("ComponentProvider","Removing Datastore"),_b.delete(t),r.terminate())}(this),Promise.resolve()}};function XS(n,e,t,r={}){var i;let o=(n=_e(n,Hi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Je.MOCK_USER;else{a=dI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(l)}n._authCredentials=new dy(new Sd(a,u))}}var lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Pn=class n extends lt{constructor(e,t,r){super(e,t,Ms(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function j_(n,e,...t){if(n=Fe(n),L_("collection","path",e),n instanceof Hi){let r=ve.fromString(e,...t);return Ib(r),new Pn(n,null,r)}{if(!(n instanceof Me||n instanceof Pn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return Ib(r),new Pn(n.firestore,null,r)}}function eA(n,e){if(n=_e(n,Hi),L_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lt(n,null,function(r){return new gn(ve.emptyPath(),r)}(e))}function Wc(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=Ad.newId()),L_("doc","path",e),n instanceof Hi){let r=ve.fromString(e,...t);return wb(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof Pn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return wb(r),new Me(n.firestore,n instanceof Pn?n.converter:null,new $(r))}}function B_(n,e){return n=Fe(n),e=Fe(e),(n instanceof Me||n instanceof Pn)&&(e instanceof Me||e instanceof Pn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function U_(n,e){return n=Fe(n),e=Fe(e),n instanceof lt&&e instanceof lt&&n.firestore===e.firestore&&Hc(n._query,e._query)&&n.converter===e.converter}var gh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fc(this,"async_queue_retry"),this.Vu=()=>{let r=bd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Pv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Qv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Yv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var tA=-1,je=class extends Hi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gh(e),this._firestoreClient=void 0,yield e}})}};function dt(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nA(n),n._firestoreClient}function nA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Ey(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Kv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function rA(n,e){pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return oA(n,P_.provider,{build:r=>new fh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function iA(n){return M(this,null,function*(){pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();oA(n,P_.provider,{build:t=>new qv(t,e.cacheSizeBytes)})})}function oA(n,e,t){if((n=_e(n,je))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},nA(n)}function sA(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!Hr.D())return Promise.resolve();let i=r+"main";yield Hr.delete(i)})}(I_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function aA(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return PV(yield F_(t),r)})),r.promise}(dt(n=_e(n,je)))}function cA(n){return GV(dt(n=_e(n,je)))}function uA(n){return WV(dt(n=_e(n,je)))}function lA(n,e){let t=dt(n=_e(n,je)),r=new Yv;return ZV(t,n._databaseId,e,r),r}function dA(n,e){return JV(dt(n=_e(n,je)),e).then(t=>t?new lt(n,null,t.query):null)}var Ln=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ke.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cr=class{constructor(e){this._methodName=e}};var qi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var Vc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var XV=/^__.*__$/,Zv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qr(e,this.data,t,this.fieldTransforms)}},mh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var yh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hA(this.Cu)&&XV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Jv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zc(e)}Qu(e,t,r,i=!1){return new yh({Cu:e,methodName:t,qu:r,path:Ge.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ki(n){let e=n._freezeSettings(),t=zc(n._databaseId);return new Jv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);q_("Data must be an object, but it was:",s,r);let a=gA(r,s),u,l;if(o.merge)u=new qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=r_(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yA(h,m)||h.push(m)}u=new qt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Zv(new yt(a),u,l)}var jc=class n extends cr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fA(n,e,t){return new yh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Xv=class n extends cr{_toFieldTransform(e){return new Bi(e.path,new Wr)}isEqual(e){return e instanceof n}},e_=class n extends cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=fA(this,e,!0),r=this.Ku.map(o=>Qi(o,t)),i=new sr(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&Mf(this.Ku,e.Ku)}},t_=class n extends cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=fA(this,e,!0),r=this.Ku.map(o=>Qi(o,t)),i=new ar(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&Mf(this.Ku,e.Ku)}},n_=class n extends cr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Kr(e.serializer,eS(e.serializer,this.$u));return new Bi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function $_(n,e,t,r){let i=n.Qu(1,e,t);q_("Data must be an object, but it was:",i,r);let o=[],s=yt.empty();Wi(r,(u,l)=>{let h=z_(e,u,t);l=Fe(l);let p=i.Nu(h);if(l instanceof jc)o.push(h);else{let m=Qi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new qt(o);return new mh(s,a,i.fieldTransforms)}function H_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[r_(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(r_(e,o[m])),u.push(o[m+1]);let l=[],h=yt.empty();for(let m=a.length-1;m>=0;--m)if(!yA(l,a[m])){let v=a[m],b=u[m];b=Fe(b);let R=s.Nu(v);if(b instanceof jc)l.push(v);else{let N=Qi(b,R);N!=null&&(l.push(v),h.set(v,N))}}let p=new qt(l);return new mh(h,p,s.fieldTransforms)}function pA(n,e,t,r=!1){return Qi(t,n.Qu(r?4:3,e))}function Qi(n,e){if(mA(n=Fe(n)))return q_("Unsupported field value:",e,n),gA(n,e);if(n instanceof cr)return function(r,i){if(!hA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Qi(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:vs(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vs(i.serializer,o)}}if(r instanceof qi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:lS(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:v_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return y_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xh(r)}`)}(n,e)}function gA(n,e){let t={};return Fb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,(r,i)=>{let o=Qi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof qi||n instanceof Ln||n instanceof Me||n instanceof cr||n instanceof Vc)}function q_(n,e,t){if(!mA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=xh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function r_(n,e,t){if((e=Fe(e))instanceof yn)return e._internalPath;if(typeof e=="string")return z_(n,e);throw vh("Field path arguments must be of type string or ",n,!1,void 0,t)}var e2=new RegExp("[~\\*/\\[\\]]");function z_(n,e,t){if(e.search(e2)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yn(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function yA(n,e){return n.some(t=>t.isEqual(e))}var zi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new i_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Rh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},i_=class extends zi{data(){return super.data()}};function Rh(n,e){return typeof e=="string"?z_(n,e):e instanceof yn?e._internalPath:e._delegate._internalPath}function vA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bc=class{},Gi=class extends Bc{};function dr(n,e,...t){let r=[];e instanceof Bc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof o_).length,a=o.filter(u=>u instanceof _h).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var _h=class n extends Gi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AA(e._query,t),new lt(e.firestore,e.converter,Oy(e._query,t))}_parse(e){let t=Ki(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Db(p,h);let v=[];for(let b of p)v.push(Eb(u,o,b));m={arrayValue:{values:v}}}else m=Eb(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Db(p,h),m=pA(a,s,p,h==="in"||h==="not-in");return he.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function _A(n,e,t){let r=e,i=Rh("where",n);return _h._create(i,r,t)}var o_=class n extends Bc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)AA(s,u),s=Oy(s,u)}(e._query,t),new lt(e.firestore,e.converter,Oy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var s_=class n extends Gi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vi(o,s)}(e._query,this._field,this._direction);return new lt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new gn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function wA(n,e="asc"){let t=e,r=Rh("orderBy",n);return s_._create(r,t)}var wh=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new lt(e.firestore,e.converter,Vd(e._query,this._limit,this._limitType))}};function IA(n){return JS("limit",n),wh._create("limit",n,"F")}function EA(n){return JS("limitToLast",n),wh._create("limitToLast",n,"L")}var Ih=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=SA(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function DA(...n){return Ih._create("startAt",n,!0)}function CA(...n){return Ih._create("startAfter",n,!1)}var Eh=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=SA(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function TA(...n){return Eh._create("endBefore",n,!1)}function bA(...n){return Eh._create("endAt",n,!0)}function SA(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof zi)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ls(o))if(p.field.isKeyField())h.push(Li(s,u.key));else{let m=u.data.field(p.field);if(Ch(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new On(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ki(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let R=h[b];if(m[b].field.isKeyField()){if(typeof R!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!g_(s)&&R.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let N=s.path.child(ve.fromString(R));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Li(a,B))}else{let N=pA(u,l,R);v.push(N)}}return new On(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Eb(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g_(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Li(n,new $(r))}if(t instanceof Me)return Li(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(t)}.`)}function Db(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var As=class{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new Vc(o)}convertGeoPoint(e){return new qi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=f_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){let t=or(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);Q(IS(r));let i=new zr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Nh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var a_=class extends As{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var ir=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nn=class extends zi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Rh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ur=class extends nn{data(e={}){return super.data(e)}},vn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ur(this._firestore,this._userDataWriter,r.key,r,new ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:t2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function t2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function G_(n,e){return n instanceof nn&&e instanceof nn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vn&&e instanceof vn&&n._firestore===e._firestore&&U_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function xA(n){n=_e(n,Me);let e=_e(n.firestore,je);return QS(dt(e),n._key).then(t=>Y_(e,n,t))}var ur=class extends As{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function MA(n){n=_e(n,Me);let e=_e(n.firestore,je),t=dt(e),r=new ur(e);return KV(t,n._key).then(i=>new nn(e,r,n._key,i,new ir(i!==null&&i.hasLocalMutations,!0),n.converter))}function RA(n){n=_e(n,Me);let e=_e(n.firestore,je);return QS(dt(e),n._key,{source:"server"}).then(t=>Y_(e,n,t))}function NA(n){n=_e(n,lt);let e=_e(n.firestore,je),t=dt(e),r=new ur(e);return vA(n._query),YS(t,n._query).then(i=>new vn(e,r,n,i))}function PA(n){n=_e(n,lt);let e=_e(n.firestore,je),t=dt(e),r=new ur(e);return QV(t,n._query).then(i=>new vn(e,r,n,i))}function kA(n){n=_e(n,lt);let e=_e(n.firestore,je),t=dt(e),r=new ur(e);return YS(t,n._query,{source:"server"}).then(i=>new vn(e,r,n,i))}function W_(n,e,t){n=_e(n,Me);let r=_e(n.firestore,je),i=Nh(n.converter,e,t);return Os(r,[Mh(Ki(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function K_(n,e,t,...r){n=_e(n,Me);let i=_e(n.firestore,je),o=Ki(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof yn?H_(o,"updateDoc",n._key,e,t,r):$_(o,"updateDoc",n._key,e),Os(i,[s.toMutation(n._key,He.exists(!0))])}function OA(n){return Os(_e(n.firestore,je),[new Yr(n._key,He.none())])}function FA(n,e){let t=_e(n.firestore,je),r=Wc(n),i=Nh(n.converter,e);return Os(t,[Mh(Ki(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function Q_(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Qv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Qv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Me)l=_e(n.firestore,je),h=Ms(n._key.path),u={next:p=>{e[s]&&e[s](Y_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,lt);l=_e(p.firestore,je),h=p._query;let m=new ur(l);u={next:v=>{e[s]&&e[s](new vn(l,m,p,v))},error:e[s+1],complete:e[s+2]},vA(n._query)}return function(m,v,b,R){let N=new bs(R),B=new Lc(v,N,b);return m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return T_(yield Ss(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return b_(yield Ss(m),B)}))}}(dt(l),h,a,u)}function LA(n,e){return YV(dt(n=_e(n,je)),Qv(e)?e:{next:e})}function Os(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return xV(yield F_(r),i,o)})),o.promise}(dt(n),e)}function Y_(n,e,t){let r=t.docs.get(e._key),i=new ur(n);return new nn(n,i,e._key,r,new ir(t.hasPendingWrites,t.fromCache),e.converter)}var n2={maxAttempts:5};var Dh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ki(e)}set(e,t,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=Nh(i.converter,t,r),s=Mh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof yn?H_(this._dataReader,"WriteBatch.update",o._key,t,r,i):$_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(n,e){if((n=Fe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var c_=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ki(t)}get(t){let r=jr(t,this._firestore),i=new a_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new zi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new zi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=jr(t,this._firestore),s=Nh(o.converter,r,i),a=Mh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=jr(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof yn?H_(this._dataReader,"Transaction.update",s._key,r,i,o):$_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=jr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=jr(e,this._firestore),r=new ur(this._firestore);return super.get(e).then(i=>new nn(this._firestore,r,t._key,i._document,new ir(!1,!1),t.converter))}};function VA(n,e,t){n=_e(n,je);let r=Object.assign(Object.assign({},n2),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new rt;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield zV(o);new Wv(o.asyncQueue,l,a,s,u).au()})),u.promise}(dt(n),i=>e(new c_(n,i)),r)}function jA(){return new jc("deleteField")}function BA(){return new Xv("serverTimestamp")}function UA(...n){return new e_("arrayUnion",n)}function $A(...n){return new t_("arrayRemove",n)}function HA(n){return new n_("increment",n)}(function(e,t=!0){(function(i){xs=i})(pI),sa(new oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new je(new hy(r.getProvider("auth-internal")),new my(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mr(IT,"4.7.3",e),mr(IT,"4.7.3","esm2017")})();var r2="@firebase/firestore-compat",i2="0.3.38";function nw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function zA(){if(!Lb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ph=class n{constructor(e){this._delegate=e}static fromBase64String(e){return zA(),new n(Ln.fromBase64String(e))}static fromUint8Array(e){return qA(),new n(Ln.fromUint8Array(e))}toBase64(){return zA(),this._delegate.toBase64()}toUint8Array(){return qA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Z_(n){return o2(n,["next","error","complete"])}function o2(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var J_=class{enableIndexedDbPersistence(e,t){return rA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return iA(e._delegate)}clearIndexedDbPersistence(e){return sA(e._delegate)}},kh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){XS(this._delegate,e,t,r)}enableNetwork(){return cA(this._delegate)}disableNetwork(){return uA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,V_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return aA(this._delegate)}onSnapshotsInSync(e){return LA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vs(this,j_(this._delegate,e))}catch(t){throw At(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vn(this,Wc(this._delegate,e))}catch(t){throw At(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,eA(this._delegate,e))}catch(t){throw At(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return VA(this._delegate,t=>e(new Oh(this,t)))}batch(){return dt(this._delegate),new Fh(new Dh(this._delegate,e=>Os(this._delegate,e)))}loadBundle(e){return lA(this._delegate,e)}namedQuery(e){return dA(this._delegate,e).then(t=>t?new Xi(this,t):null)}},Fs=class extends As{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ph(new Ln(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Vn.forKey(t,this.firestore,null)}};function s2(n){Cb(n)}var Oh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fs(e)}get(e){let t=Yi(e);return this._delegate.get(t).then(r=>new Zi(this._firestore,new nn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Yi(e);return r?(nw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}},Fh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Yi(e);return r?(nw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ls=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ur(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ji(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Fs(e),t),i.set(t,o)),o}};Ls.INSTANCES=new WeakMap;var Vn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fs(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vs(this.firestore,j_(this._delegate,e))}catch(t){throw At(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Me?B_(this._delegate,e):!1}set(e,t){t=nw("DocumentReference.set",t);try{return t?W_(this._delegate,e,t):W_(this._delegate,e)}catch(r){throw At(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?K_(this._delegate,e):K_(this._delegate,e,t,...r)}catch(i){throw At(i,"updateDoc()","DocumentReference.update()")}}delete(){return OA(this._delegate)}onSnapshot(...e){let t=GA(e),r=WA(e,i=>new Zi(this.firestore,new nn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Q_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=MA(this._delegate):e?.source==="server"?t=RA(this._delegate):t=xA(this._delegate),t.then(r=>new Zi(this.firestore,new nn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ls.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function At(n,e,t){return n.message=n.message.replace(e,t),n}function GA(n){for(let e of n)if(typeof e=="object"&&!Z_(e))return e;return{}}function WA(n,e){var t,r;let i;return Z_(n[0])?i=n[0]:Z_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Zi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return G_(this._delegate,e._delegate)}},Ji=class extends Zi{data(e){let t=this._delegate.data(e);return this._delegate._converter||Tb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Xi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fs(e)}where(e,t,r){try{return new n(this.firestore,dr(this._delegate,_A(e,t,r)))}catch(i){throw At(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,dr(this._delegate,wA(e,t)))}catch(r){throw At(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,dr(this._delegate,IA(e)))}catch(t){throw At(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,dr(this._delegate,EA(e)))}catch(t){throw At(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,dr(this._delegate,DA(...e)))}catch(t){throw At(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,dr(this._delegate,CA(...e)))}catch(t){throw At(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,dr(this._delegate,TA(...e)))}catch(t){throw At(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,dr(this._delegate,bA(...e)))}catch(t){throw At(t,"endAt()","Query.endAt()")}}isEqual(e){return U_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=PA(this._delegate):e?.source==="server"?t=kA(this._delegate):t=NA(this._delegate),t.then(r=>new Kc(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=GA(e),r=WA(e,i=>new Kc(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Q_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ls.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},X_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ji(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Kc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ji(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new X_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ji(this._firestore,r))})}isEqual(e){return G_(this._delegate,e._delegate)}},Vs=class n extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Vn(this.firestore,e):null}doc(e){try{return e===void 0?new Vn(this.firestore,Wc(this._delegate)):new Vn(this.firestore,Wc(this._delegate,e))}catch(t){throw At(t,"doc()","CollectionReference.doc()")}}add(e){return FA(this._delegate,e).then(t=>new Vn(this.firestore,t))}isEqual(e){return B_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ls.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Yi(n){return _e(n,Me)}var ew=class n{constructor(...e){this._delegate=new yn(...e)}static documentId(){return new n(Ge.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof yn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var tw=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=BA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=jA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=UA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=$A(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=HA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var a2={Firestore:kh,GeoPoint:qi,Timestamp:Ve,Blob:Ph,Transaction:Oh,WriteBatch:Fh,DocumentReference:Vn,DocumentSnapshot:Zi,Query:Xi,QueryDocumentSnapshot:Ji,QuerySnapshot:Kc,CollectionReference:Vs,FieldPath:ew,FieldValue:tw,setLogLevel:s2,CACHE_SIZE_UNLIMITED:tA};function c2(n,e){n.INTERNAL.registerComponent(new oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},a2)))}function u2(n){c2(n,(e,t)=>new kh(e,t,new J_)),n.registerVersion(r2,i2)}u2(Lt);function l2(n,e=la){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function KA(n,e){return l2(n,e)}function d2(n,e){return KA(n,e).pipe(di(void 0),fa(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function ow(n,e){return KA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Lh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=ZA(r,t);return new jh(i,o,this.afs)}snapshotChanges(){return d2(this.ref,this.afs.schedulers.outsideAngular).pipe(Pt)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ie(this.ref.get(e)).pipe(Pt)}};function Vh(n,e){return ow(n,e).pipe(di(void 0),fa(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function QA(n,e,t){return Vh(n,t).pipe(li((r,i)=>h2(r,i.map(o=>o.payload),e),[]),ep(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function h2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=f2(n,r))}),n}function rw(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function f2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return rw(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return rw(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rw(n,e.oldIndex,1);break}return n}function YA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var jh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Vh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),fa(),ut(([r,i])=>i.length>0||!r),G(([,r])=>r),Pt)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=YA(e);return QA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pt)}valueChanges(e={}){return ow(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Pt)}get(e){return Ie(this.query.get(e)).pipe(Pt)}add(e){return this.ref.add(e)}doc(e){return new Lh(this.ref.doc(e),this.afs)}},iw=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Vh(this.query,this.afs.schedulers.outsideAngular).pipe(Pt):Vh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),ut(t=>t.length>0),Pt)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=YA(e);return QA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pt)}valueChanges(e={}){return ow(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Pt)}get(e){return Ie(this.query.get(e)).pipe(Pt)}},p2=new W("angularfire2.enableFirestorePersistence"),g2=new W("angularfire2.firestore.persistenceSettings"),m2=new W("angularfire2.firestore.settings"),y2=new W("angularfire2.firestore.use-emulator");function ZA(n,e=t=>t){return{query:e(n),ref:n}}var Ot=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,v,b,R,N,B,q){this.schedulers=u;let F=ac(t,a,r),J=h;p&&Jm(F,a,m,b,R,N,v,B),[this.firestore,this.persistenceEnabled$]=gd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ne=a.runOutsideAngular(()=>F.firestore());if(o&&ne.settings(o),J&&ne.useEmulator(...J),i&&!Di(s)){let X=()=>{try{return Ie(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ee(!1)}};return[ne,a.runOutsideAngular(X)]}else return[ne,ee(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=ZA(i,r),a=this.schedulers.ngZone.run(()=>o);return new jh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new iw(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Lh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Yo),O(Zo,8),O(p2,8),O(m2,8),O(Rt),O(me),O(hd),O(g2,8),O(y2,8),O(vT,8),O(Gm,8),O(Wm,8),O(Km,8),O(Qm,8),O(Ym,8),O(Zm,8),O(Si,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Bh=class n{constructor(e){this.db=e;this.headerRef=e.collection(this.dbPath)}accesoHeader="header service running...";dbPath="/header";headerRef;getHeader(){return this.headerRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var js=class n{constructor(e){this.db=e;this.skillsRef=e.collection(this.dbPath)}accesoSkills="skills running...";dbPath="/Skills";skillsRef;getSkills(){return this.skillsRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Uh=class n{constructor(e,t){this.headerService=e;this.skillsService=t;console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}header=new ld;skills={lenguajes:"",tecnologias:""};static \u0275fac=function(t){return new(t||n)(Pe(Bh),Pe(js))};static \u0275cmp=ot({type:n,selectors:[["app-header"]],decls:30,vars:6,consts:[[1,"header-card"],["src","assets/images/IMG-20240924-WA0177.jpg","alt","Profile Photo",1,"profile-image"],[1,"goal"],[1,"contact-list"],[1,"header-actions"],["href","URL DE TU CV PDF","target","_blank",1,"btn"],["href","https://github.com/Jeshuabenitez","target","_blank",1,"icon-link"],["href","https://www.instagram.com/jeshua_benitez/","target","_blank",1,"icon-link"]],template:function(t,r){t&1&&(re(0,"div",0),Bt(1,"img",1),re(2,"h1"),te(3),K(),re(4,"p",2),te(5),K(),re(6,"ul",3)(7,"li")(8,"strong"),te(9,"Email:"),K(),te(10),K(),re(11,"li")(12,"strong"),te(13,"Phone:"),K(),te(14),K(),re(15,"li")(16,"strong"),te(17,"Location:"),K(),te(18),K(),re(19,"li")(20,"strong"),te(21,"Network:"),K(),te(22),K()(),re(23,"div",4)(24,"a",5),te(25,"\u{1F4C4} Download CV"),K(),re(26,"a",6),te(27,"\u{1F310} GitHub"),K(),re(28,"a",7),te(29,"\u{1F4CE} Instagram"),K()()()),t&2&&(Ce(3),Mr(r.header.name),Ce(2),Mr(r.header.goalLife),Ce(5),nt(" ",r.header.email,""),Ce(4),nt(" ",r.header.phoneNumber,""),Ce(4),nt(" ",r.header.location,""),Ce(4),nt(" ",r.header.socialNetwork,""))},styles:[".header-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#1e1e2f,#2b2d42);padding:30px;border-radius:12px;box-shadow:0 4px 12px #0000004d;color:#fff;text-align:center}.profile-image[_ngcontent-%COMP%]{width:160px;height:200px;object-fit:cover;border-radius:10px;border:3px solid #ffffff;margin-bottom:16px;box-shadow:0 4px 10px #0006}.header-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:4px}.header-card[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{color:#b0bec5;margin-bottom:16px;font-size:1.1rem}.contact-list[_ngcontent-%COMP%]{list-style:none;padding:0;max-width:420px;margin:0 auto 24px;text-align:left}.contact-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.95rem;margin-bottom:6px}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:12px}.btn[_ngcontent-%COMP%], .icon-link[_ngcontent-%COMP%]{background-color:#58a6ff;color:#fff;padding:8px 16px;text-decoration:none;border-radius:6px;font-weight:700;font-size:.95rem;transition:all .3s ease;border:none}.btn[_ngcontent-%COMP%]:hover, .icon-link[_ngcontent-%COMP%]:hover{background-color:#1e8fff;color:#fff}"]})};var $h=class n{constructor(e){this.db=e;this.workExperienceRef=e.collection(this.dbPath)}accesoWorkExperience="work experience running...";dbPath="/work-experience";workExperienceRef;getWorkExperience(){return this.workExperienceRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function I2(n,e){if(n&1&&(re(0,"div",2)(1,"strong"),te(2),K(),re(3,"p")(4,"strong"),te(5,"Date:"),K(),te(6),K(),re(7,"p")(8,"strong"),te(9,"Location:"),K(),te(10),K(),re(11,"p")(12,"strong"),te(13,"Company:"),K(),te(14),K()()),n&2){let t=e.$implicit;Ce(2),Mr(t.position),Ce(4),Rg(" ",t.startDate," - ",t.endDate,""),Ce(4),nt(" ",t.location,""),Ce(4),nt(" ",t.company,"")}}var Hh=class n{constructor(e){this.workExperienceService=e;console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(t=>t.map(r=>V({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.workExperience=t,console.log(this.workExperience)})}workExperience=[];static \u0275fac=function(t){return new(t||n)(Pe($h))};static \u0275cmp=ot({type:n,selectors:[["app-work-experience"]],decls:4,vars:1,consts:[[1,"work-experience-card"],["class","work-entry",4,"ngFor","ngForOf"],[1,"work-entry"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"h2"),te(2,"Work Experience"),K(),dn(3,I2,15,5,"div",1),K()),t&2&&(Ce(3),Jt("ngForOf",r.workExperience))},dependencies:[Sn],styles:[".work-experience-card[_ngcontent-%COMP%]{background-color:transparent;padding:20px;border-radius:12px;margin-bottom:20px}.work-experience-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0f6fc;font-size:1.6rem;margin-bottom:15px}.work-entry[_ngcontent-%COMP%]{background-color:#2d333b;padding:12px 16px;border-radius:8px;border-left:4px solid #58a6ff;margin-bottom:16px}.work-entry[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#58a6ff;font-weight:700;font-size:1.1rem;display:block;margin-bottom:6px}.work-entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#d1d5da;font-size:.95rem}"]})};var qh=class n{constructor(e){this.db=e;this.educationRef=e.collection(this.dbPath)}accesoEducation="education running...";dbPath="/Education";educationRef;getEducation(){return this.educationRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function C2(n,e){if(n&1&&(re(0,"div",2)(1,"p")(2,"strong"),te(3,"Training:"),K(),te(4),K(),re(5,"p")(6,"strong"),te(7,"School:"),K(),te(8),K(),re(9,"p")(10,"strong"),te(11,"Licenses:"),K(),te(12),K()()),n&2){let t=e.$implicit;Ce(4),nt(" ",t.Training,""),Ce(4),nt(" ",t.School,""),Ce(4),nt(" ",t.licenses,"")}}var zh=class n{constructor(e){this.educationService=e;console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(t=>t.map(r=>V({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.education=t,console.log(this.education)})}education=[];static \u0275fac=function(t){return new(t||n)(Pe(qh))};static \u0275cmp=ot({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[1,"education-container"],["class","work-entry",4,"ngFor","ngForOf"],[1,"work-entry"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"h2"),te(2,"Schooling"),K(),dn(3,C2,13,3,"div",1),K()),t&2&&(Ce(3),Jt("ngForOf",r.education))},dependencies:[Sn],styles:[".education-container[_ngcontent-%COMP%]{background-color:transparent;padding:25px;border-radius:12px;margin-bottom:20px}.education-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0f6fc;font-size:1.6rem;margin-bottom:15px}.work-entry[_ngcontent-%COMP%]{background-color:#2d333b;padding:12px 16px;border-radius:8px;border-left:4px solid #58a6ff;margin-bottom:16px}.work-entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#d1d5da;font-size:.95rem}.work-entry[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#58a6ff;font-weight:700}"]})};function b2(n,e){if(n&1&&(re(0,"div",2)(1,"p")(2,"strong"),te(3,"Programming languages:"),K(),te(4),K(),re(5,"p")(6,"strong"),te(7,"Technologies:"),K(),te(8),K()()),n&2){let t=e.$implicit;Ce(4),nt(" ",t.lenguajes,""),Ce(4),nt(" ",t.tecnologias,"")}}var Gh=class n{constructor(e){this.skillsService=e;console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(G(t=>t.map(r=>V({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.skills=t,console.log(this.skills)})}skills=[];static \u0275fac=function(t){return new(t||n)(Pe(js))};static \u0275cmp=ot({type:n,selectors:[["app-skills"]],decls:4,vars:1,consts:[[1,"skills-card"],["class","work-entry",4,"ngFor","ngForOf"],[1,"work-entry"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"h2"),te(2,"Skills"),K(),dn(3,b2,9,2,"div",1),K()),t&2&&(Ce(3),Jt("ngForOf",r.skills))},dependencies:[Sn],styles:[".skills-card[_ngcontent-%COMP%]{background-color:transparent;padding:20px;border-radius:12px;margin-bottom:20px}.skills-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0f6fc;font-size:1.6rem;margin-bottom:15px}.work-entry[_ngcontent-%COMP%]{background-color:#2d333b;padding:12px 16px;border-radius:8px;border-left:4px solid #58a6ff;margin-bottom:16px}.work-entry[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#58a6ff;font-weight:700}.work-entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#d1d5da;font-size:.95rem}"]})};var Wh=class n{constructor(e){this.db=e;this.certificatesRef=e.collection(this.dbPath)}accesoCertificates="certificates running...";dbPath="/certificates";certificatesRef;getCertificates(){return this.certificatesRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kh=class n{constructor(e){this.certificatesService=e;console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(t=>t.map(r=>V({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.certificates=t,console.log(this.certificates)})}certificates=[];normalizeUrl(e){if(!e)return null;let t=e.trim(),r=/^https?:\/\//i.test(t)?t:`https://${t}`;try{return new URL(r),r}catch{return null}}static \u0275fac=function(t){return new(t||n)(Pe(Wh))};static \u0275cmp=ot({type:n,selectors:[["app-certificates"]],decls:14,vars:0,consts:[[1,"certificates-card"],[1,"work-entry"],["href","https://www.kaggle.com/learn/certification/jeshuabenitez/python","target","_blank","rel","noopener noreferrer",1,"btn-link"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"h2"),te(2,"Certificados"),K(),re(3,"div",1)(4,"p")(5,"strong"),te(6,"Certificado:"),K(),te(7," Python"),K(),re(8,"p")(9,"strong"),te(10,"Instituci\xF3n:"),K(),te(11," Kaggle"),K(),re(12,"a",2),te(13," Ver certificado "),K()()())},styles:[".certificates-card[_ngcontent-%COMP%]{background-color:transparent;padding:20px;border-radius:12px;margin-bottom:20px}.certificates-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0f6fc;font-size:1.6rem;margin-bottom:15px}.work-entry[_ngcontent-%COMP%]{background-color:#2d333b;padding:12px 16px;border-radius:8px;border-left:4px solid #58a6ff;margin-bottom:16px}.work-entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;color:#d1d5da;font-size:.95rem}.work-entry[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#58a6ff;font-weight:700}.btn-link[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px}.btn-link[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};var Qh=class n{constructor(e){this.db=e;this.languagesRef=e.collection(this.dbPath)}accesoLanguages="Languages running...";dbPath="/Languages";languagesRef;getLanguages(){return this.languagesRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var R2=n=>({width:n});function N2(n,e){if(n&1&&(re(0,"div",2)(1,"p")(2,"strong"),te(3),K()(),re(4,"div",3),Bt(5,"div",4),K()()),n&2){let t=e.$implicit,r=xC();Ce(3),Mr(t.idiomas),Ce(2),Jt("ngStyle",RC(2,R2,r.getLevelWidth(t.nivel)))}}var Yh=class n{constructor(e){this.languagesService=e;console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(G(t=>t.map(r=>V({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.languages=t,console.log(this.languages)})}languages=[];getLevelWidth(e){if(!e)return"0%";switch(e.trim().toLowerCase()){case"beginner":return"30%";case"intermediate":return"60%";case"advanced":return"100%";default:return"0%"}}static \u0275fac=function(t){return new(t||n)(Pe(Qh))};static \u0275cmp=ot({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[1,"languages-card"],["class","language-entry",4,"ngFor","ngForOf"],[1,"language-entry"],[1,"level-bar"],[1,"level-fill",3,"ngStyle"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"h2"),te(2,"Languages"),K(),dn(3,N2,6,4,"div",1),K()),t&2&&(Ce(3),Jt("ngForOf",r.languages))},dependencies:[Sn,JC],styles:[".languages-card[_ngcontent-%COMP%]{background-color:transparent;padding:20px;border-radius:12px;display:flex;flex-direction:column;gap:10px}.languages-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0f6fc;font-size:1.6rem;margin-bottom:10px}.language-entry[_ngcontent-%COMP%]{background-color:#2d333b;padding:12px 16px;border-radius:8px;border-left:4px solid #58a6ff;margin-bottom:12px}.language-entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 6px;color:#d1d5da;font-size:.95rem}.language-entry[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#58a6ff;font-weight:700}.level-bar[_ngcontent-%COMP%]{width:100%;height:8px;background-color:#1c2128;border-radius:4px;overflow:hidden}.level-fill[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;transition:width .3s ease}"]})};var Zh=class n{constructor(e){this.db=e;this.interestsRef=e.collection(this.dbPath)}accesoInterests="interests running...";dbPath="/Interests";interestsRef;getInterests(){return this.interestsRef}static \u0275fac=function(t){return new(t||n)(O(Ot))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function O2(n,e){if(n&1&&(re(0,"span",3),te(1),K()),n&2){let t=e.$implicit;Ce(),nt(" ",t.interes," ")}}var Jh=class n{constructor(e){this.interestsService=e;console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(t=>t.map(r=>V({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.interests=t,console.log(this.interests)})}interests=[];static \u0275fac=function(t){return new(t||n)(Pe(Zh))};static \u0275cmp=ot({type:n,selectors:[["app-interests"]],decls:5,vars:1,consts:[[1,"interests-card"],[1,"interests-list"],["class","interest-chip",4,"ngFor","ngForOf"],[1,"interest-chip"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"h2"),te(2,"Interests"),K(),re(3,"div",1),dn(4,O2,2,1,"span",2),K()()),t&2&&(Ce(4),Jt("ngForOf",r.interests))},dependencies:[Sn],styles:[".interests-card[_ngcontent-%COMP%]{background-color:transparent;padding:20px;border-radius:12px;display:flex;flex-direction:column;gap:10px;align-items:center;text-align:center}.interests-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f0f6fc;font-size:1.6rem;margin-bottom:10px}.interests-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.interest-chip[_ngcontent-%COMP%]{background-color:#2d333b;color:#c9d1d9;padding:6px 12px;border-radius:16px;font-size:.95rem;border:1px solid #444c56;transition:background-color .3s ease}.interest-chip[_ngcontent-%COMP%]:hover{background-color:#444c56;color:#fff}"]})};var Xh=class n{title="mycv";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ot({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"cv-container"],[1,"cv-header"],[1,"cv-grid"],[1,"cv-left"],[1,"cv-right"],[1,"languages-wrap"],[1,"cv-footer"]],template:function(t,r){t&1&&(re(0,"div",0)(1,"section",1),Bt(2,"app-header"),K(),re(3,"div",2)(4,"section",3),Bt(5,"app-work-experience")(6,"app-education"),K(),re(7,"section",4),Bt(8,"app-skills")(9,"app-certificates"),re(10,"div",5),Bt(11,"app-languages"),K()()(),re(12,"section",6),Bt(13,"app-interests"),K()())},dependencies:[Uh,Hh,zh,Gh,Kh,Yh,Jh],styles:[`.languages-wrap{flex:1;display:flex;flex-direction:column;justify-content:stretch}.cv-footer{grid-column:1 / -1;margin-top:0;background-color:#161b22;padding:20px;border-radius:10px;box-shadow:0 2px 8px #0000004d}.cv-header{grid-column:1 / 3}@media print{body{background-color:#fff!important;color:#000!important;font-size:5pt;zoom:.35}.wave-background,.header-actions,.icon-link,a[href^=http]{display:none!important}.cv-container{max-width:100%;padding:0;margin:0;box-shadow:none!important;background:none!important}.cv-header,.cv-grid,.cv-left,.cv-right{display:block!important;width:100%}.cv-left section,.cv-right section{page-break-inside:avoid;break-inside:avoid;box-shadow:none!important;background:none!important}.profile-image{display:block;margin:0 auto 10px}}
`],encapsulation:2})};var XA={production:!0,firebaseConfig:{apiKey:"AIzaSyDVK1bPp6ndWzmsuQ9tXw7hp0VXVj5AWwY",authDomain:"my-cv-jeshuabenitez.firebaseapp.com",projectId:"my-cv-jeshuabenitez",storageBucket:"my-cv-jeshuabenitez.firebasestorage.app",messagingSenderId:"1088783654588",appId:"1:1088783654588:web:54aaf93dd68f47c4f33ab9"}};var ef=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Tt({type:n,bootstrap:[Xh]});static \u0275inj=Ct({imports:[u0,ud,yT.initializeApp(XA.firebaseConfig)]})};c0().bootstrapModule(ef,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
